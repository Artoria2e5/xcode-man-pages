<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>CACHE(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CACHE(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">CACHE(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">sys_cache_control</code>,
  <code class="Nm">sys_icache_invalidate</code>,
  <code class="Nm">sys_dcache_flush</code> &#x2014;
<div class="Nd">cache control</div>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<span class="Lb">Standard C&#x00A0;Library (libc, -lc)</span>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<code class="In">#include
  &lt;<a class="In">libkern/OSCacheControl.h</a>&gt;</code>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">sys_cache_control</code>(<var class="Fa" style="white-space: nowrap;">int
    function</var>, <var class="Fa" style="white-space: nowrap;">void
    *start</var>, <var class="Fa" style="white-space: nowrap;">size_t
    len</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">sys_icache_invalidate</code>(<var class="Fa" style="white-space: nowrap;">void
    *start</var>, <var class="Fa" style="white-space: nowrap;">size_t
    len</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">sys_dcache_flush</code>(<var class="Fa" style="white-space: nowrap;">void
    *start</var>, <var class="Fa" style="white-space: nowrap;">size_t
    len</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
These functions operate on every cache line containing one of the
  <var class="Fa">len</var> bytes of memory pointed to by
  <var class="Fa">start</var>. Normally the operations apply to every processor
  in the system, but the exact semantics of these operations is platform
  dependent. They should be used with caution.
<p class="Pp"><code class="Fn">sys_cache_control</code>() performs the operation
    specified by <var class="Fa">function</var>. Refer to the header file for a
    list of currently supported functions.</p>
<p class="Pp"><code class="Fn">sys_icache_invalidate</code>() prepares memory
    for execution, typically by invalidating the instruction cache for the
    indicated range. This should be called after writing machine instructions to
    memory, and before executing them. On IA32 processors this function is a
    NOP, because their instruction caches are coherent.</p>
<p class="Pp"><code class="Fn">sys_dcache_flush</code>() writes modified data
    cache lines to main memory, and then invalidates all lines in the range
    being operated on. It can be useful when dealing with cache incoherent
    devices or DMA.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
<code class="Fn">sys_cache_control</code>() returns zero on success, ENOTSUP if
  <var class="Fa">function</var> is not valid.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">atomic(3)</a>, <a class="Xr">barrier(3)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
These functions first appeared in Mac OS 10.5 (Leopard).
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 21, 2006</td>
    <td class="foot-os">Darwin</td>
  </tr>
</table>
</body>
</html>
