<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>CGI::Push(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CGI::Push(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">CGI::Push(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
CGI::Push - Simple Interface to Server Push
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
    use strict;
    use warnings;

    use CGI::Push qw(:standard);

    do_push(
        -next_page =&gt; \&amp;next_page,
        -last_page =&gt; \&amp;last_page,
        -delay     =&gt; 0.5
    );

    sub next_page {
        my($q,$counter) = @_;
        return undef if $counter &gt;= 10;
        ....
    }

    sub last_page {
        my($q,$counter) = @_;
        return ...
    }
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
CGI::Push is a subclass of the CGI object created by CGI.pm. It is specialized
  for server push operations, which allow you to create animated pages whose
  content changes at regular intervals.
<p class="Pp">You provide CGI::Push with a pointer to a subroutine that will
    draw one page. Every time your subroutine is called, it generates a new
    page. The contents of the page will be transmitted to the browser in such a
    way that it will replace what was there beforehand. The technique will work
    with HTML pages as well as with graphics files, allowing you to create
    animated GIFs.</p>
<p class="Pp">Only Netscape Navigator supports server push. Internet Explorer
    browsers do not.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="USING_CGI::Push"><a class="permalink" href="#USING_CGI::Push">USING
  CGI::Push</a></h1>
CGI::Push adds one new method to the standard CGI suite, <b>do_push()</b>. When
  you call this method, you pass it a reference to a subroutine that is
  responsible for drawing each new page, an interval delay, and an optional
  subroutine for drawing the last page. Other optional parameters include most
  of those recognized by the CGI <b>header()</b> method.
<p class="Pp">You may call <b>do_push()</b> in the object oriented manner or
    not, as you prefer:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    use CGI::Push;
    $q = CGI::Push-&gt;new;
    $q-&gt;do_push(-next_page=&gt;\&amp;draw_a_page);

        -or-

    use CGI::Push qw(:standard);
    do_push(-next_page=&gt;\&amp;draw_a_page);
</pre>
<p class="Pp">Parameters are as follows:</p>
<dl class="Bl-tag">
  <dt>-next_page</dt>
  <dd><span class="Li"></span>
    <pre>
    do_push(-next_page=&gt;\&amp;my_draw_routine);
    </pre>
    <p class="Pp">This required parameter points to a reference to a subroutine
        responsible for drawing each new page. The subroutine should expect two
        parameters consisting of the CGI object and a counter indicating the
        number of times the subroutine has been called. It should return the
        contents of the page as an <b>array</b> of one or more items to print.
        It can return a false value (or an empty array) in order to abort the
        redrawing loop and print out the final page (if any)</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    sub my_draw_routine {
        my($q,$counter) = @_;
        return undef if $counter &gt; 100;
        ...
    }
    </pre>
    <p class="Pp">You are of course free to refer to create and use global
        variables within your draw routine in order to achieve special
      effects.</p>
  </dd>
  <dt>-last_page</dt>
  <dd>This optional parameter points to a reference to the subroutine
      responsible for drawing the last page of the series. It is called after
      the -next_page routine returns a false value. The subroutine itself should
      have exactly the same calling conventions as the -next_page routine.</dd>
  <dt>-type</dt>
  <dd>This optional parameter indicates the content type of each page. It
      defaults to &quot;text/html&quot;. Normally the module assumes that each
      page is of a homogeneous MIME type. However if you provide either of the
      magic values &quot;heterogeneous&quot; or &quot;dynamic&quot; (the latter
      provided for the convenience of those who hate long parameter names), you
      can specify the MIME type -- and other header fields -- on a per-page
      basis. See &quot;heterogeneous pages&quot; for more details.</dd>
  <dt>-delay</dt>
  <dd>This indicates the delay, in seconds, between frames. Smaller delays
      refresh the page faster. Fractional values are allowed.
    <p class="Pp"><b>If not specified, -delay will default to 1 second</b></p>
  </dd>
  <dt>-cookie, -target, -expires, -nph</dt>
  <dd>These have the same meaning as the like-named parameters in
      <b>CGI::header()</b>.
    <p class="Pp">If not specified, -nph will default to 1 (as needed for many
        servers, see below).</p>
  </dd>
</dl>
<section class="Ss">
<h2 class="Ss" id="Heterogeneous_Pages"><a class="permalink" href="#Heterogeneous_Pages">Heterogeneous
  Pages</a></h2>
Ordinarily all pages displayed by CGI::Push share a common MIME type. However by
  providing a value of &quot;heterogeneous&quot; or &quot;dynamic&quot; in the
  <b>do_push()</b> -type parameter, you can specify the MIME type of each page
  on a case-by-case basis.
<p class="Pp">If you use this option, you will be responsible for producing the
    HTTP header for each page. Simply modify your draw routine to look like
    this:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    sub my_draw_routine {
        my($q,$counter) = @_;
        return header('text/html'),   # note we're producing the header here
        ....
    }
</pre>
<p class="Pp">You can add any header fields that you like, but some (cookies and
    status fields included) may not be interpreted by the browser. One
    interesting effect is to display a series of pages, then, after the last
    page, to redirect the browser to a new URL. Because <b>redirect()</b> does
    b&lt;not&gt; work, the easiest way is with a -refresh header field, as shown
    below:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    sub my_draw_routine {
        my($q,$counter) = @_;
        return undef if $counter &gt; 10;
        return header('text/html'),   # note we're producing the header here
        ...
    }

    sub my_last_page {
        return header(-refresh=&gt;'5; URL=http://somewhere.else/finished.html',
                      -type=&gt;'text/html'),
        ...
    }
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Changing_the_Page_Delay_on_the_Fly"><a class="permalink" href="#Changing_the_Page_Delay_on_the_Fly">Changing
  the Page Delay on the Fly</a></h2>
If you would like to control the delay between pages on a page-by-page basis,
  call <b>push_delay()</b> from within your draw routine. <b>push_delay()</b>
  takes a single numeric argument representing the number of seconds you wish to
  delay after the current page is displayed and before displaying the next one.
  The delay may be fractional. Without parameters, <b>push_delay()</b> just
  returns the current delay.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="INSTALLING_CGI::Push_SCRIPTS"><a class="permalink" href="#INSTALLING_CGI::Push_SCRIPTS">INSTALLING
  CGI::Push SCRIPTS</a></h1>
Server push scripts must be installed as no-parsed-header (NPH) scripts in order
  to work correctly on many servers. On Unix systems, this is most often
  accomplished by prefixing the script's name with &quot;nph-&quot;. Recognition
  of NPH scripts happens automatically with WebSTAR and Microsoft IIS. Users of
  other servers should see their documentation for help.
<p class="Pp">Apache web server from version 1.3b2 on does not need server push
    scripts installed as NPH scripts: the -nph parameter to <b>do_push()</b> may
    be set to a false value to disable the extra headers needed by an NPH
    script.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR_INFORMATION"><a class="permalink" href="#AUTHOR_INFORMATION">AUTHOR
  INFORMATION</a></h1>
The CGI.pm distribution is copyright 1995-2007, Lincoln D. Stein. It is
  distributed under the Artistic License 2.0. It is currently maintained by Lee
  Johnson with help from many contributors.
<p class="Pp">Address bug reports and comments to:
    https://github.com/leejo/CGI.pm/issues</p>
<p class="Pp">The original bug tracker can be found at:
    https://rt.cpan.org/Public/Dist/Display.html?Queue=CGI.pm</p>
<p class="Pp">When sending bug reports, please provide the version of CGI.pm,
    the version of Perl, the name and version of your Web server, and the name
    and version of the operating system you are using. If the problem is even
    remotely browser dependent, please provide information about the affected
    browsers as well. Copyright 1995-1998, Lincoln D. Stein. All rights
    reserved.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
This section intentionally left blank.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
CGI::Carp, CGI
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-06-02</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
