<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Man page generated from reStructuredText.
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>LLVM-PROFDATA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">LLVM-PROFDATA(1)</td>
    <td class="head-vol">LLVM</td>
    <td class="head-rtitle">LLVM-PROFDATA(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
llvm-profdata - Profile data tool
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>llvm-profdata</b> <i>command</i> [<i>args...</i>]
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>llvm-profdata</b> tool is a small utility for working with profile data
  files.
</section>
<section class="Sh">
<h1 class="Sh" id="COMMANDS"><a class="permalink" href="#COMMANDS">COMMANDS</a></h1>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li><i>merge</i></li>
  <li><i>show</i></li>
  <li><i>overlap</i></li>
</ul>
</div>
<br/>
</section>
<section class="Sh">
<h1 class="Sh" id="MERGE"><a class="permalink" href="#MERGE">MERGE</a></h1>
<section class="Ss">
<h2 class="Ss" id="SYNOPSIS_2"><a class="permalink" href="#SYNOPSIS_2">SYNOPSIS</a></h2>
<b>llvm-profdata merge</b> [<i>options</i>] [<i>filename...</i>]
</section>
<section class="Ss">
<h2 class="Ss" id="DESCRIPTION_2"><a class="permalink" href="#DESCRIPTION_2">DESCRIPTION</a></h2>
<b>llvm-profdata merge</b> takes several profile data files generated by PGO
  instrumentation and merges them together into a single indexed profile data
  file.
<p class="Pp">By default profile data is merged without modification. This means
    that the relative importance of each input file is proportional to the
    number of samples or counts it contains. In general, the input from a longer
    training run will be interpreted as relatively more important than a shorter
    run. Depending on the nature of the training runs it may be useful to adjust
    the weight given to each input file by using the <b>-weighted-input</b>
    option.</p>
<p class="Pp">Profiles passed in via <b>-weighted-input</b>,
    <b>-input-files</b>, or via positional arguments are processed once for each
    time they are seen.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h2>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-help</b></dt>
  <dd>Print a summary of command line options.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-output=output, -o=output</b></dt>
  <dd>Specify the output file name. <i>Output</i> cannot be <b>-</b> as the
      resulting indexed profile data can't be written to standard output.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-weighted-input=weight,filename</b></dt>
  <dd>Specify an input file name along with a weight. The profile counts of the
      supplied <b>filename</b> will be scaled (multiplied) by the supplied
      <b>weight</b>, where where <b>weight</b> is a decimal integer &gt;= 1.
      Input files specified without using this option are assigned a default
      weight of 1. Examples are shown below.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-input-files=path, -f=path</b></dt>
  <dd>Specify a file which contains a list of files to merge. The entries in
      this file are newline-separated. Lines starting with '#' are skipped.
      Entries may be of the form &lt;filename&gt; or
      &lt;weight&gt;,&lt;filename&gt;.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-remapping-file=path, -r=path</b></dt>
  <dd>Specify a file which contains a remapping from symbol names in the input
      profile to the symbol names that should be used in the output profile. The
      file should consist of lines of the form <b>&lt;input-symbol&gt;
      &lt;output-symbol&gt;</b>. Blank lines and lines starting with <b>#</b>
      are skipped.
    <p class="Pp">The llvm-cxxmap tool can be used to generate the symbol
        remapping file.</p>
  </dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-instr (default)</b></dt>
  <dd>Specify that the input profile is an instrumentation-based profile.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-sample</b></dt>
  <dd>Specify that the input profile is a sample-based profile.
    <p class="Pp">The format of the generated file can be generated in one of
        three ways:</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-binary (default)</b></dt>
  <dd></dd>
</dl>
</div>
<br/>
<p class="Pp">Emit the profile using a binary encoding. For
    instrumentation-based profile the output format is the indexed binary
    format.</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-text</b></dt>
  <dd></dd>
</dl>
</div>
<br/>
<p class="Pp">Emit the profile in text mode. This option can also be used with
    both sample-based and instrumentation-based profile. When this option is
    used the profile will be dumped in the text format that is parsable by the
    profile reader.</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-gcc</b></dt>
  <dd></dd>
</dl>
</div>
<br/>
<p class="Pp">Emit the profile using GCC's gcov format (Not yet supported).</p>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-sparse[=true|false]</b></dt>
  <dd>Do not emit function records with 0 execution count. Can only be used in
      conjunction with -instr. Defaults to false, since it can inhibit compiler
      optimization during PGO.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-num-threads=N, -j=N</b></dt>
  <dd>Use N threads to perform profile merging. When N=0, llvm-profdata
      auto-detects an appropriate number of threads to use. This is the
    default.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-failure-mode=[any|all]</b></dt>
  <dd>Set the failure mode. There are two options: 'any' causes the merge
      command to fail if any profiles are invalid, and 'all' causes the merge
      command to fail only if all profiles are invalid. If 'all' is set,
      information from any invalid profiles is excluded from the final merged
      product. The default failure mode is 'any'.</dd>
</dl>
</div>
<br/>
</section>
<section class="Ss">
<h2 class="Ss" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h2>
</section>
<section class="Ss">
<h2 class="Ss" id="Basic_Usage"><a class="permalink" href="#Basic_Usage">Basic
  Usage</a></h2>
Merge three profiles:
<div class="Bd-indent">
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
llvm-profdata merge foo.profdata bar.profdata baz.profdata -output merged.profdata
<b></b>
</pre>
</div>
<br/>
</div>
<br/>
</section>
<section class="Ss">
<h2 class="Ss" id="Weighted_Input"><a class="permalink" href="#Weighted_Input">Weighted
  Input</a></h2>
The input file <i>foo.profdata</i> is especially important, multiply its counts
  by 10:
<div class="Bd-indent">
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
llvm-profdata merge -weighted-input=10,foo.profdata bar.profdata baz.profdata -output merged.profdata
<i></i>
</pre>
</div>
<br/>
</div>
<br/>
<p class="Pp">Exactly equivalent to the previous invocation (explicit form;
    useful for programmatic invocation):</p>
<div class="Bd-indent">
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
llvm-profdata merge -weighted-input=10,foo.profdata -weighted-input=1,bar.profdata -weighted-input=1,baz.profdata -output merged.profdata
<i></i>
</pre>
</div>
<br/>
</div>
<br/>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SHOW"><a class="permalink" href="#SHOW">SHOW</a></h1>
<section class="Ss">
<h2 class="Ss" id="SYNOPSIS_3"><a class="permalink" href="#SYNOPSIS_3">SYNOPSIS</a></h2>
<b>llvm-profdata show</b> [<i>options</i>] [<i>filename</i>]
</section>
<section class="Ss">
<h2 class="Ss" id="DESCRIPTION_3"><a class="permalink" href="#DESCRIPTION_3">DESCRIPTION</a></h2>
<b>llvm-profdata show</b> takes a profile data file and displays the information
  about the profile counters for this file and for any of the specified
  function(s).
<p class="Pp">If <i>filename</i> is omitted or is <b>-</b>, then
    <b>llvm-profdata show</b> reads its input from standard input.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="OPTIONS_2"><a class="permalink" href="#OPTIONS_2">OPTIONS</a></h2>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-all-functions</b></dt>
  <dd>Print details for every function.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-counts</b></dt>
  <dd>Print the counter values for the displayed functions.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-function=string</b></dt>
  <dd>Print details for a function if the function's name contains the given
      string.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-help</b></dt>
  <dd>Print a summary of command line options.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-output=output, -o=output</b></dt>
  <dd>Specify the output file name. If <i>output</i> is <b>-</b> or it isn't
      specified, then the output is sent to standard output.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-instr (default)</b></dt>
  <dd>Specify that the input profile is an instrumentation-based profile.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-text</b></dt>
  <dd>Instruct the profile dumper to show profile counts in the text format of
      the instrumentation-based profile data representation. By default, the
      profile information is dumped in a more human readable form (also in text)
      with annotations.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-topn=n</b></dt>
  <dd>Instruct the profile dumper to show the top <b>n</b> functions with the
      hottest basic blocks in the summary section. By default, the topn
      functions are not dumped.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-sample</b></dt>
  <dd>Specify that the input profile is a sample-based profile.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-memop-sizes</b></dt>
  <dd>Show the profiled sizes of the memory intrinsic calls for shown
    functions.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-value-cutoff=n</b></dt>
  <dd>Show only those functions whose max count values are greater or equal to
      <b>n</b>. By default, the value-cutoff is set to 0.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-list-below-cutoff</b></dt>
  <dd>Only output names of functions whose max count value are below the cutoff
      value.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-showcs</b></dt>
  <dd>Only show context sensitive profile counts. The default is to filter all
      context sensitive profile counts.</dd>
</dl>
</div>
<br/>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="OVERLAP"><a class="permalink" href="#OVERLAP">OVERLAP</a></h1>
<section class="Ss">
<h2 class="Ss" id="SYNOPSIS_4"><a class="permalink" href="#SYNOPSIS_4">SYNOPSIS</a></h2>
<b>llvm-profdata overlap</b> [<i>options</i>] [<i>base profile file</i>]
  [<i>test profile file</i>]
</section>
<section class="Ss">
<h2 class="Ss" id="DESCRIPTION_4"><a class="permalink" href="#DESCRIPTION_4">DESCRIPTION</a></h2>
<b>llvm-profdata overlap</b> takes two profile data files and displays the
  <i>overlap</i> of counter distribution between the whole files and between any
  of the specified functions.
<p class="Pp">In this command, <i>overlap</i> is defined as follows: Suppose
    <i>base profile file</i> has the following counts: {c1_1, c1_2, ..., c1_n,
    c1_u_1, c2_u_2, ..., c2_u_s}, and <i>test profile file</i> has {c2_1, c2_2,
    ..., c2_n, c2_v_1, c2_v_2, ..., c2_v_t}. Here c{1|2}_i (i = 1 .. n) are
    matched counters and c1_u_i (i = 1 .. s) and c2_v_i (i = 1 .. v) are
    unmatched counters (or counters only existing in) <i>base profile file</i>
    and <i>test profile file</i>, respectively. Let sum_1 = c1_1 + c1_2 + ... +
    c1_n + c1_u_1 + c2_u_2 + ... + c2_u_s, and sum_2 = c2_1 + c2_2 + ... + c2_n
    + c2_v_1 + c2_v_2 + ... + c2_v_t. <i>overlap</i> = min(c1_1/sum_1,
    c2_1/sum_2) + min(c1_2/sum_1, c2_2/sum_2) + ... + min(c1_n/sum_1,
    c2_n/sum_2).</p>
<p class="Pp">The result overlap distribution is a percentage number, ranging
    from 0.0% to 100.0%, where 0.0% means there is no overlap and 100.0% means a
    perfect overlap.</p>
<p class="Pp">Here is an example, if <i>base profile file</i> has counts of
    {400, 600}, and <i>test profile file</i> has matched counts of {60000,
    40000}. The <i>overlap</i> is 80%.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="OPTIONS_3"><a class="permalink" href="#OPTIONS_3">OPTIONS</a></h2>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-function=string</b></dt>
  <dd>Print details for a function if the function's name contains the given
      string.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-help</b></dt>
  <dd>Print a summary of command line options.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-o=output or -o output</b></dt>
  <dd>Specify the output file name. If <i>output</i> is <b>-</b> or it isn't
      specified, then the output is sent to standard output.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-value-cutoff=n</b></dt>
  <dd>Show only those functions whose max count values are greater or equal to
      <b>n</b>. By default, the value-cutoff is set to max of unsigned long
      long.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-cs</b></dt>
  <dd>Only show overlap for the context sensitive profile counts. The default is
      to show non-context sensitive profile counts.</dd>
</dl>
</div>
<br/>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<b>llvm-profdata</b> returns 1 if the command is omitted or is invalid, if it
  cannot read input files, or if there is a mismatch between their data.
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Maintained by the LLVM Team (https://llvm.org/).
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2003-2020, LLVM Project
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-08-05</td>
    <td class="foot-os">Apple Clang 12.0.0</td>
  </tr>
</table>
</body>
</html>
