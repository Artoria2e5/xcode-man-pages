<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>NBDST(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">NBDST(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">NBDST(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">nbdst</code> &#x2014;
<div class="Nd">NetBoot deferred shadow tool</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">nbdst</code></td>
    <td>[<code class="Fl">-recycle</code> | <code class="Fl">-preallocate</code>
      <var class="Ar">size</var>] <var class="Ar">devnode</var>
      <var class="Ar">shadowfile</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">nbdst</code> is used during NetBoot to associate a shadow file
  with the disk image being used as the root device. After the shadow file is
  attached, subsequent writes to the root device will be redirected to the
  shadow file, which normally resides on local storage.
  <code class="Nm">nbdst</code> is invoked by /etc/rc.netboot
</section>
<section class="Sh">
<h1 class="Sh" id="ARGUMENTS"><a class="permalink" href="#ARGUMENTS">ARGUMENTS</a></h1>
The following arguments must be specified:
<dl class="Bl-tag Bl-compact">
  <dt><var class="Ar">devnode</var></dt>
  <dd>The device node of the root device, in the form &#x201C;disk0&#x201D;</dd>
  <dt><var class="Ar">shadowfile</var></dt>
  <dd>Path to a shadow file which will be created and associated with the
      NetBoot root device</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#recycle"><code class="Fl" id="recycle">-recycle</code></a></dt>
  <dd>If a shadow file already exists, reset it and use it again. Otherwise,
      information written to an existing shadow file will reappear. Reusing a
      previous shadow file without resetting it requires that the shadow file be
      created with the same base image.</dd>
  <dt><a class="permalink" href="#preallocate"><code class="Fl" id="preallocate">-preallocate</code></a>
    <var class="Ar">size</var></dt>
  <dd>Set the shadow file to the given size up front. This forces a reset of the
      shadow file (like <code class="Fl">-recycle</code>).</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTE"><a class="permalink" href="#NOTE">NOTE</a></h1>
<code class="Nm">nbdst</code> can only be run as root.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">hdiutil(1)</a>, <a class="Xr">hdik(8)</a>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">29 Apr 2003</td>
    <td class="foot-os">macOS</td>
  </tr>
</table>
</body>
</html>
