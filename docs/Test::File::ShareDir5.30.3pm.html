<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Test::File::ShareDir(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test::File::ShareDir(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test::File::ShareDir(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Test::File::ShareDir - Create a Fake ShareDir for your modules for testing.
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
version 1.001002
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
    use Test::More;

    # use FindBin; optional

    use Test::File::ShareDir
        # -root =&gt; &quot;$FindBin::Bin/../&quot; # optional,
        -share =&gt; {
            -module =&gt; { 'My::Module' =&gt; 'share/MyModule' }
            -dist   =&gt; { 'My-Dist'    =&gt; 'share/somefolder' }
        };

    use My::Module;

    use File::ShareDir qw( module_dir dist_dir );

    module_dir( 'My::Module' ) # dir with files from $dist/share/MyModule

    dist_dir( 'My-Dist' ) # dir with files from $dist/share/somefolder
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<span class="Li">&quot;Test::File::ShareDir&quot;</span> is some low level
  plumbing to enable a distribution to perform tests while consuming its own
  <span class="Li">&quot;share&quot;</span> directories in a manner similar to
  how they will be once installed.
<p class="Pp">This allows <span class="Li">&quot;File::ShareDir&quot;</span> to
    see the <i>latest</i> version of content instead of simply whatever is
    installed on whichever target system you happen to be testing on.</p>
<p class="Pp"><b>Note:</b> This module only has support for creating 'new' style
    share dirs and are NOT compatible with old File::ShareDirs.</p>
<p class="Pp">For this reason, unless you have File::ShareDir 1.00 or later
    installed, this module will not be usable by you.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SIMPLE_INTERFACE"><a class="permalink" href="#SIMPLE_INTERFACE">SIMPLE
  INTERFACE</a></h1>
Starting with version <span class="Li">0.4.0</span>, there are a few extra
  interfaces you can use.
<p class="Pp">These will probably be more useful, and easier to grok, because
    they don't have a layer of indirection in order to simultaneously support
    both <span class="Li">&quot;Module&quot;</span> and
    <span class="Li">&quot;Dist&quot;</span>
    <span class="Li">&quot;ShareDir&quot;</span>'s.</p>
<section class="Ss">
<h2 class="Ss" id="Simple_Exporter_Interfaces"><a class="permalink" href="#Simple_Exporter_Interfaces">Simple
  Exporter Interfaces</a></h2>
<i></i><i>&quot;Test::File::ShareDir::Dist&quot;</i><i></i>
<p class="Pp"><span class="Li">&quot;Test::File::ShareDir::Dist&quot;</span>
    provides a simple export interface for making
    <span class="Li">&quot;TempDir&quot;</span>
    <span class="Li">&quot;ShareDir&quot;</span>'s from a given path:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    use Test::File::ShareDir::Dist { &quot;Dist-Name&quot; =&gt; &quot;share/&quot; };
</pre>
<p class="Pp">This will automatically create a
    <span class="Li">&quot;ShareDir&quot;</span> for
    <span class="Li">&quot;Dist-Name&quot;</span> in a
    <span class="Li">&quot;TempDir&quot;</span> based on the contents of
    <span class="Li">&quot;CWD/share/&quot;</span></p>
<p class="Pp">See <span class="Li">&quot;Test::File::ShareDir::Dist&quot;</span>
    for details.</p>
<p class="Pp"><i></i><i>&quot;Test::File::ShareDir::Module&quot;</i><i></i></p>
<p class="Pp"><span class="Li">&quot;Test::File::ShareDir::Module&quot;</span>
    provides a simple export interface for making
    <span class="Li">&quot;TempDir&quot;</span>
    <span class="Li">&quot;ShareDir&quot;</span>'s from a given path:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    use Test::File::ShareDir::Module { &quot;Module::Name&quot; =&gt; &quot;share/&quot; };
</pre>
<p class="Pp">This will automatically create a
    <span class="Li">&quot;ShareDir&quot;</span> for
    <span class="Li">&quot;Module::Name&quot;</span> in a
    <span class="Li">&quot;TempDir&quot;</span> based on the contents of
    <span class="Li">&quot;CWD/share/&quot;</span></p>
<p class="Pp">See
    <span class="Li">&quot;Test::File::ShareDir::Module&quot;</span> for
    details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Simple_Object_Oriented_Interfaces"><a class="permalink" href="#Simple_Object_Oriented_Interfaces">Simple
  Object Oriented Interfaces</a></h2>
<i></i><i>&quot;Test::File::ShareDir::Object::Dist&quot;</i><i></i>
<p class="Pp"><span class="Li">&quot;Test::File::ShareDir::Object::Dist&quot;</span>
    provides a simple object oriented interface for making
    <span class="Li">&quot;TempDir&quot;</span>
    <span class="Li">&quot;ShareDir&quot;</span>'s from a given path:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    use Test::File::ShareDir::Object::Dist;

    my $obj = Test::File::ShareDir::Object::Dist-&gt;new( dists =&gt; { &quot;Dist-Name&quot; =&gt; &quot;share/&quot; } );
    $obj-&gt;install_all_dists;
    $obj-&gt;register;
</pre>
<p class="Pp">This will automatically create a
    <span class="Li">&quot;ShareDir&quot;</span> for
    <span class="Li">&quot;Dist-Name&quot;</span> in a
    <span class="Li">&quot;TempDir&quot;</span> based on the contents of
    <span class="Li">&quot;CWD/share/&quot;</span></p>
<p class="Pp">See
    <span class="Li">&quot;Test::File::ShareDir::Object::Dist&quot;</span> for
    details.</p>
<p class="Pp"><i></i><i>&quot;Test::File::ShareDir::Object::Module&quot;</i><i></i></p>
<p class="Pp"><span class="Li">&quot;Test::File::ShareDir::Object::Module&quot;</span>
    provides a simple object oriented interface for making
    <span class="Li">&quot;TempDir&quot;</span>
    <span class="Li">&quot;ShareDir&quot;</span>'s from a given path:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    use Test::File::ShareDir::Object::Module;

    my $obj = Test::File::ShareDir::Object::Module-&gt;new( modules =&gt; { &quot;Module::Name&quot; =&gt; &quot;share/&quot; } );
    $obj-&gt;install_all_modules;
    $obj-&gt;register;
</pre>
<p class="Pp">This will automatically create a
    <span class="Li">&quot;ShareDir&quot;</span> for
    <span class="Li">&quot;Module::Name&quot;</span> in a
    <span class="Li">&quot;TempDir&quot;</span> based on the contents of
    <span class="Li">&quot;CWD/share/&quot;</span></p>
<p class="Pp">See
    <span class="Li">&quot;Test::File::ShareDir::Object::Module&quot;</span> for
    details.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SCOPE_LIMITED_UTILITIES"><a class="permalink" href="#SCOPE_LIMITED_UTILITIES">SCOPE
  LIMITED UTILITIES</a></h1>
<span class="Li">&quot;Test::File::ShareDir&quot;</span> provides a few utility
  functions to aide in temporarily adjusting
  <span class="Li">&quot;ShareDir&quot;</span> behavior.
<p class="Pp"><span class="Li"></span></p>
<pre>
    use Test::File::ShareDir qw( with_dist_dir with_module_dir );

    with_dist_dir({ 'Dist-Name' =&gt; 'Some/Path' }, sub {
      # dist_dir() now behaves differently here
    });
    with_module_dir({ 'Module::Name' =&gt; 'Some/Path' }, sub {
      # module_dir() now behaves differently here
    });
</pre>
<p class="Pp">See <span class="Li">&quot;EXPORTABLE FUNCTIONS&quot;</span> for
    details.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="IMPORTING"><a class="permalink" href="#IMPORTING">IMPORTING</a></h1>
Since <span class="Li">1.001000</span>, there are 2 ways of passing arguments to
  <span class="Li">&quot;import&quot;</span>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use Foo { -root =&gt; ... options }, qw( functions to import );
  use Foo -optname =&gt; option, -optname =&gt; option, qw( functions to import );
</pre>
<p class="Pp">Both should work, but the former might be less prone to accidental
    issues.</p>
<section class="Ss">
<h2 class="Ss" id="_s-1IMPORT_OPTIONS_s0"><a class="permalink" href="#_s-1IMPORT_OPTIONS_s0">IMPORT
  OPTIONS</a></h2>
<i>-root</i>
<p class="Pp">This parameter is the prefix the other paths are relative to.</p>
<p class="Pp">If this parameter is not specified, it defaults to the Current
    Working Directory ( <span class="Li">&quot;CWD&quot;</span> ).</p>
<p class="Pp">In versions prior to <span class="Li">0.3.0</span>, this value was
    mandatory.</p>
<p class="Pp">The rationale behind using <span class="Li">&quot;CWD&quot;</span>
    as the default value is as follows.</p>
<ul class="Bl-bullet">
  <li>Most users of this module are likely to be using it to test
    distributions</li>
  <li>Most users of this module will be using it in
      <span class="Li">&quot;$project/t/&quot;</span> to load files from
      <span class="Li">&quot;$project/share/&quot;</span></li>
  <li>Most <span class="Li">&quot;CPAN&quot;</span> tools run tests with
      <span class="Li">&quot;CWD&quot;</span> =
    <span class="Li">$project</span></li>
</ul>
<p class="Pp">Therefor, defaulting to <span class="Li">&quot;CWD&quot;</span> is
    a reasonably sane default for most people, but where it is not it can still
    be overridden.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  -root =&gt; &quot;$FindBin::Bin/../&quot; # resolves to project root from t/ regardless of Cwd.
</pre>
<p class="Pp"><i>-share</i></p>
<p class="Pp">This parameter is mandatory, and contains a
    <span class="Li">&quot;hashref&quot;</span> containing the data that
    explains what directories you want shared.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  -share =&gt;  { ..... }
</pre>
<p class="Pp">-module</p>
<p class="Pp"><span class="Li">&quot;-module&quot;</span> contains a
    <span class="Li">&quot;hashref&quot;</span> mapping Module names to path
    names for module_dir style share dirs.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  -share =&gt; {
    -module =&gt; { 'My::Module' =&gt; 'share/mymodule/', }
  }

  ...

  module_dir('My::Module')
</pre>
<p class="Pp">Notedly, it is a <span class="Li">&quot;hashref&quot;</span>,
    which means there is a limitation of one share dir per module. This is
    simply because having more than one share dir per module makes no sense at
    all.</p>
<p class="Pp">-dist</p>
<p class="Pp"><span class="Li">&quot;-dist&quot;</span> contains a
    <span class="Li">&quot;hashref&quot;</span> mapping Distribution names to
    path names for dist_dir style share dirs. The same limitation applied to
    <span class="Li">&quot;-module&quot;</span> applies here.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  -share =&gt; {
    -dist =&gt; { 'My-Dist' =&gt; 'share/mydist' }
  }
  ...
  dist_dir('My-Dist')
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXPORTABLE_FUNCTIONS"><a class="permalink" href="#EXPORTABLE_FUNCTIONS">EXPORTABLE
  FUNCTIONS</a></h1>
<section class="Ss">
<h2 class="Ss" id="with_dist_dir"><a class="permalink" href="#with_dist_dir">with_dist_dir</a></h2>
Sets up a <span class="Li">&quot;ShareDir&quot;</span> environment with limited
  context.
<p class="Pp"><span class="Li"></span></p>
<pre>
  # with_dist_dir(\%config, \&amp;sub);
  with_dist_dir( { 'Dist-Name' =&gt; 'share/' } =&gt; sub {

      # File::ShareDir resolves to a copy of share/ in this context.

  } );
</pre>
<p class="Pp"><span class="Li">%config</span> can contain anything
    <span class="Li">&quot;Test::File::ShareDir::Dist&quot;</span> accepts.</p>
<dl class="Bl-tag">
  <dt>&quot;-root&quot;: Defaults to $CWD</dt>
  <dd></dd>
  <dt>&quot;<i>$distName</i>&quot;: Declare $distName's
    &quot;ShareDir&quot;.</dt>
  <dd></dd>
</dl>
<p class="Pp"><i>Since 1.001000</i></p>
</section>
<section class="Ss">
<h2 class="Ss" id="with_module_dir"><a class="permalink" href="#with_module_dir">with_module_dir</a></h2>
Sets up a <span class="Li">&quot;ShareDir&quot;</span> environment with limited
  context.
<p class="Pp"><span class="Li"></span></p>
<pre>
  # with_module_dir(\%config, \&amp;sub);
  with_module_dir( { 'Module::Name' =&gt; 'share/' } =&gt; sub {

      # File::ShareDir resolves to a copy of share/ in this context.

  } );
</pre>
<p class="Pp"><span class="Li">%config</span> can contain anything
    <span class="Li">&quot;Test::File::ShareDir::Module&quot;</span>
  accepts.</p>
<dl class="Bl-tag">
  <dt>&quot;-root&quot;: Defaults to $CWD</dt>
  <dd></dd>
  <dt>&quot;<i>$moduleName</i>&quot;: Declare $moduleName's
    &quot;ShareDir&quot;.</dt>
  <dd></dd>
</dl>
<p class="Pp"><i>Since 1.001000</i></p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="THANKS"><a class="permalink" href="#THANKS">THANKS</a></h1>
Thanks to the <span class="Li">&quot;#distzilla&quot;</span> crew for
  ideas,suggestions, code review and debugging, even though not all of it made
  it into releases.
<ul class="Bl-bullet">
  <li>DOLMEN &lt;cpan:///author/dolmen&gt;</li>
  <li>ETHER &lt;cpan:///author/ether&gt;</li>
  <li>HAARG &lt;cpan:///author/haarg&gt;</li>
  <li>RJBS &lt;cpan:///author/rjbs&gt;</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Kent Fredric &lt;kentnl@cpan.org&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
This software is copyright (c) 2017 by Kent Fredric &lt;kentnl@cpan.org&gt;.
<p class="Pp">This is free software; you can redistribute it and/or modify it
    under the same terms as the Perl 5 programming language system itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-03-01</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
