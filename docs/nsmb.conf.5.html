<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>NSMB.CONF(5)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">NSMB.CONF(5)</td>
    <td class="head-vol">File Formats Manual</td>
    <td class="head-rtitle">NSMB.CONF(5)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">nsmb.conf</code> &#x2014;
<div class="Nd">configuration file for SMB requests</div>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <code class="Nm">nsmb.conf</code> file contains information about the
  computers and shares or mount points for the SMB network protocol.
<p class="Pp">The configuration hierarchy is made up of several sections, each
    section containing a few or several lines of parameters and their assigned
    values. Each of these sections must begin with a section name enclosed
    within square brackets, similar to:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent">[<var class="Ar">section_name</var>]</div>
<p class="Pp">The end of each section is marked by either the start of a new
    section, or by the abrupt ending of the file, commonly referred to as the
    EOF. Each section may contain zero or more parameters such as:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent">[<var class="Ar">section_name</var>]</div>
<div class="Bd
  Bd-indent"><var class="Ar">key</var>=<var class="Ar">value</var></div>
<p class="Pp">where <var class="Ar">key</var> represents a parameter name, and
    <var class="Ar">value</var> would be the parameter's assigned value.</p>
<p class="Pp">The SMB library uses the following information for section
  names:</p>
<p class="Pp"></p>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#A)"><code class="Ic" id="A)">A)</code></a></dt>
  <dd>[<code class="Li">default</code>]</dd>
  <dt><a class="permalink" href="#B)"><code class="Ic" id="B)">B)</code></a></dt>
  <dd>[<var class="Ar">SERVER</var>]</dd>
  <dt><a class="permalink" href="#C)"><code class="Ic" id="C)">C)</code></a></dt>
  <dd>[<var class="Ar">SERVER</var>:<var class="Ar">SHARE</var>]</dd>
</dl>
<p class="Pp">Possible keywords may include:</p>
<table class="Bl-column">
  <tr>
    <td><b class="Sy">Keyword</b></td>
    <td>Section</td>
    <td>Default Comment</td>
  </tr>
  <tr>
    <td><b class="Sy"></b></td>
    <td>A B C Values</td>
  </tr>
  <tr>
    <td><var class="Va">addr</var></td>
    <td>- + -</td>
    <td></td>
    <td>DNS name or IP address of server</td>
  </tr>
  <tr>
    <td><var class="Va">nbtimeout</var></td>
    <td>+ + -</td>
    <td>1s</td>
    <td>Timeout for resolving a NetBIOS name</td>
  </tr>
  <tr>
    <td><var class="Va">minauth</var></td>
    <td>+ + -</td>
    <td>NTLMv2</td>
    <td>Minimum authentication level allowed</td>
  </tr>
  <tr>
    <td><var class="Va">port445</var></td>
    <td>+ + -</td>
    <td>both</td>
    <td>How to use SMB TCP/UDP ports</td>
  </tr>
  <tr>
    <td><var class="Va">streams</var></td>
    <td>+ + +</td>
    <td>yes</td>
    <td>Use NTFS Streams if server supported</td>
  </tr>
  <tr>
    <td><var class="Va">soft</var></td>
    <td>+ + +</td>
    <td>no</td>
    <td>Force all mounts to be soft</td>
  </tr>
  <tr>
    <td><var class="Va">notify_off</var></td>
    <td>+ + +</td>
    <td>no</td>
    <td>Turn off using notifications</td>
  </tr>
  <tr>
    <td><var class="Va">kloglevel</var></td>
    <td>+ - -</td>
    <td>0</td>
    <td>Turn on smb kernel logging</td>
  </tr>
  <tr>
    <td><var class="Va">protocol_vers_map</var></td>
    <td>+ - -</td>
    <td>7</td>
    <td>Bitmap of SMB Versions that are enabled</td>
  </tr>
  <tr>
    <td><var class="Va">signing_required</var></td>
    <td>+ - -</td>
    <td>no</td>
    <td>Turn on smb client signing</td>
  </tr>
  <tr>
    <td><var class="Va">signing_req_vers</var></td>
    <td>+ - -</td>
    <td>6</td>
    <td>Bitmap of SMB Versions that have signing required</td>
  </tr>
  <tr>
    <td><var class="Va">validate_neg_off</var></td>
    <td>+ - -</td>
    <td>no</td>
    <td>Turn off using validate negotiate</td>
  </tr>
  <tr>
    <td><var class="Va">max_resp_timeout</var></td>
    <td>+ + -</td>
    <td>30s</td>
    <td>Max time to wait for any response from server</td>
  </tr>
  <tr>
    <td><var class="Va">submounts_off</var></td>
    <td>+ + +</td>
    <td>no</td>
    <td>Turn off using submounts</td>
  </tr>
  <tr>
    <td><var class="Va">dir_cache_async_cnt</var></td>
    <td>+ + -</td>
    <td>10</td>
    <td>Max async queries to fill dir cache</td>
  </tr>
  <tr>
    <td><var class="Va">dir_cache_max</var></td>
    <td>+ + -</td>
    <td>60s</td>
    <td>Max time to cache for a dir</td>
  </tr>
  <tr>
    <td><var class="Va">dir_cache_min</var></td>
    <td>+ + -</td>
    <td>30s</td>
    <td>Min time to cache for a dir</td>
  </tr>
  <tr>
    <td><var class="Va">max_dirs_cached</var></td>
    <td>+ + -</td>
    <td>Varies</td>
    <td>Varies from 200-300 depending on RAM amount</td>
  </tr>
  <tr>
    <td><var class="Va">max_cached_per_dir</var></td>
    <td>+ + -</td>
    <td>Varies</td>
    <td>Varies from 2000-10000 depending on RAM amount</td>
  </tr>
  <tr>
    <td><var class="Va">netBIOS_before_DNS</var></td>
    <td>+ + +</td>
    <td>no</td>
    <td>Try NetBIOS resolution before DNS resolution</td>
  </tr>
</table>
<p class="Pp">The minimum authentication level can be one of:</p>
<dl class="Bl-tag">
  <dt>Li kerberos</dt>
  <dd>Kerberos - NTLMv2, NTLM, LM, and plain-text password authentication are
      not attempted.</dd>
  <dt><a class="permalink" href="#ntlmv2"><code class="Li" id="ntlmv2">ntlmv2</code></a></dt>
  <dd>NTLMv2 - Kerberos authentication is attempted if a Kerberos token can be
      obtained, otherwise NTLMv2 authentication is attempted; if the server
      doesn't support encrypted passwords, the authentication fails.</dd>
  <dt><a class="permalink" href="#ntlm"><code class="Li" id="ntlm">ntlm</code></a></dt>
  <dd>NTLM - Kerberos authentication is attempted if a Kerberos token can be
      obtained, otherwise NTLMv2 authentication is attempted and, if that fails,
      NTLMv1 authentication is attempted, with zeroes in the LM hash; if the
      server doesn't support encrypted passwords, the authentication fails.</dd>
  <dt><a class="permalink" href="#lm"><code class="Li" id="lm">lm</code></a></dt>
  <dd>LM - Kerberos authentication is attempted if a Kerberos token can be
      obtained, otherwise NTLMv2 authentication is attempted and, if that fails,
      NTLMv1 authentication is attempted, including the LM hash; if the server
      doesn't support encrypted passwords, the authentication fails.</dd>
  <dt><a class="permalink" href="#none"><code class="Li" id="none">none</code></a></dt>
  <dd>none - The same as <code class="Li">lm</code> except that, if the server
      doesn't support encrypted passwords, plain-text passwords are used.
      Required for servers that don't support extended security.</dd>
</dl>
<p class="Pp">(Note: &quot;NetBIOS&quot; as used below means &quot;NetBIOS over
    TCP/IP.&quot;)</p>
<p class="Pp">&quot;How to use SMB TCP/UDP ports&quot; can be one of:</p>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#both"><code class="Li" id="both">both</code></a></dt>
  <dd>Attempt to connect via port 445. If that is unsuccessful, try to connect
      via NetBIOS.</dd>
  <dt><a class="permalink" href="#netbios_only"><code class="Li" id="netbios_only">netbios_only</code></a></dt>
  <dd>Do not attempt to connect via port 445.</dd>
  <dt><a class="permalink" href="#no_netbios"><code class="Li" id="no_netbios">no_netbios</code></a></dt>
  <dd>Attempt to connect via port 445. If that is unsuccessful, do not try to
      connect via NetBIOS.</dd>
</dl>
<p class="Pp">&quot;Bitmap of SMB Versions that are enabled&quot; can be one
  of:</p>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#7_==_0111"><code class="Li" id="7_==_0111">7
    == 0111</code></a></dt>
  <dd>SMB 1/2/3 should be enabled</dd>
  <dt><a class="permalink" href="#6_==_0110"><code class="Li" id="6_==_0110">6
    == 0110</code></a></dt>
  <dd>SMB 2/3 should be enabled</dd>
  <dt><a class="permalink" href="#4_==_0100"><code class="Li" id="4_==_0100">4
    == 0100</code></a></dt>
  <dd>SMB 3 should be enabled</dd>
</dl>
<p class="Pp">&quot;Bitmap of SMB Versions that have signing required&quot; can
    be one of:</p>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#7"><code class="Li" id="7">7</code></a></dt>
  <dd>Signing required for SMB 1/2/3.</dd>
  <dt><a class="permalink" href="#6"><code class="Li" id="6">6</code></a></dt>
  <dd>Signing required for SMB 2/3.</dd>
  <dt><a class="permalink" href="#4"><code class="Li" id="4">4</code></a></dt>
  <dd>Signing required for SMB 3.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt><span class="Pa">/etc/nsmb.conf</span></dt>
  <dd>The global configuration file.</dd>
  <dt><span class="Pa">~/Library/Preferences/nsmb.conf</span></dt>
  <dd>The user's configuration file, conflicts will be overwritten by the global
      file.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
What follows is a sample configuration file which may, or may not match your
  environment:
<div class="Bd Pp Bd-indent">
<pre>
# Configuration file for example.com
[default]
minauth=ntlmv2
streams=yes
soft=yes
notify_off=yes
[WINXP]
addr=windowsXP.apple.com
</pre>
</div>
<p class="Pp">All lines which begin with the
    &#x2018;<code class="Li">#</code>&#x2019; character are comments and will
    not be parsed. The &#x201C;<code class="Li">default</code>&#x201D; section
    specifies that only Kerberos and NTLMv2 authentication should be attempted;
    NTLM authentication should not be attempted if NTLMv2 authentication fails,
    and plain-text authentication should not be attempted if the server doesn't
    support encrypted passwords.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">smbutil(1)</a>, <a class="Xr">mount_smbfs(8)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
This manual page was originally written by <span class="An">Sergey Osokin</span>
  &#x27E8;osa@FreeBSD.org&#x27E9; and <span class="An">Tom Rhodes</span>
  &#x27E8;trhodes@FreeBSD.org&#x27E9;.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 30, 2003</td>
    <td class="foot-os">Mac OS X 10.15</td>
  </tr>
</table>
</body>
</html>
