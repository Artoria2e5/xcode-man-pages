<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.10 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Brigade(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Brigade(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Brigade(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
APR::Brigade - Perl API for manipulating APR Bucket Brigades
</section>
<section class="Sh">
<h1 class="Sh" id="Synopsis"><a class="permalink" href="#Synopsis">Synopsis</a></h1>
<span class="Li"></span>
<pre>
  use APR::Brigade ();
  
  $bb = APR::Brigade-&gt;new($r-&gt;pool, $c-&gt;bucket_alloc);
  $ba = $bb-&gt;bucket_alloc();
  $pool = $bb-&gt;pool;
  
  $bb-&gt;insert_head($b);
  $bb-&gt;insert_tail($b);
  
  $b_first = $bb-&gt;first;
  $b_last  = $bb-&gt;last;
  
  $b_prev = $bb-&gt;prev($b_last);
  $b_next = $bb-&gt;next($b);
  
  $bb2 = APR::Brigade-&gt;new($r-&gt;pool, $c-&gt;bucket_alloc);
  $bb1-&gt;concat($bb2);
  
  $len = $bb-&gt;flatten($data);
  $len = $bb2-&gt;flatten($data, $wanted);
  
  $len = $bb-&gt;length;
  $bb3 = $bb-&gt;split($b_last);
  
  last if $bb-&gt;is_empty();
  $bb-&gt;cleanup();
  $bb-&gt;destroy();
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="Description"><a class="permalink" href="#Description">Description</a></h1>
<span class="Li">&quot;APR::Brigade&quot;</span> allows you to create,
  manipulate and delete APR bucket brigades.
</section>
<section class="Sh">
<h1 class="Sh" id="API"><a class="permalink" href="#API">API</a></h1>
<span class="Li">&quot;APR::Brigade&quot;</span> provides the following
  functions and/or methods:
<section class="Ss">
<h2 class="Ss" id="_cleanup_"><a class="permalink" href="#_cleanup_">&quot;cleanup&quot;</a></h2>
Empty out an entire bucket brigade:
<p class="Pp"><span class="Li"></span></p>
<pre>
  $bb-&gt;cleanup;
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd>The brigade to cleanup</dd>
  <dt>ret: no return value</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method destroys all of the buckets within the bucket
    brigade's bucket list. This is similar to
    <span class="Li">&quot;destroy()&quot;</span>, except that it does not
    deregister the brigade's <span class="Li">&quot;pool()&quot;</span> cleanup
    function.</p>
<p class="Pp">Generally, you should use
    <span class="Li">&quot;destroy()&quot;</span>. This function can be useful
    in situations where you have a single brigade that you wish to reuse many
    times by destroying all of the buckets in the brigade and putting new
    buckets into it later.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_concat_"><a class="permalink" href="#_concat_">&quot;concat&quot;</a></h2>
Concatenate brigade <span class="Li">$bb2</span> onto the end of brigade
  <span class="Li">$bb1</span>, leaving brigade <span class="Li">$bb2</span>
  empty:
<p class="Pp"><span class="Li"></span></p>
<pre>
  $bb1-&gt;concat($bb2);
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb1 ( &quot;APR::Brigade object&quot; )</dt>
  <dd>The brigade to concatenate to.</dd>
  <dt>arg1: $bb2 ( &quot;APR::Brigade object&quot; )</dt>
  <dd>The brigade to concatenate and empty afterwards.</dd>
  <dt>ret: no return value</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_destroy_"><a class="permalink" href="#_destroy_">&quot;destroy&quot;</a></h2>
destroy an entire bucket brigade, includes all of the buckets within the bucket
  brigade's bucket list.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $bb-&gt;destroy();
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd>The bucket brigade to destroy.</dd>
  <dt>ret: no return value</dt>
  <dd></dd>
  <dt>excpt: &quot;APR::Error&quot;</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_is_empty_"><a class="permalink" href="#_is_empty_">&quot;is_empty&quot;</a></h2>
Test whether the bucket brigade is empty
<p class="Pp"><span class="Li"></span></p>
<pre>
  $ret = $bb-&gt;is_empty();
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd></dd>
  <dt>ret: $ret ( boolean )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_first_"><a class="permalink" href="#_first_">&quot;first&quot;</a></h2>
Return the first bucket in a brigade
<p class="Pp"><span class="Li"></span></p>
<pre>
  $b_first = $bb-&gt;first;
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd></dd>
  <dt>ret: $b_first ( &quot;APR::Bucket object&quot; )</dt>
  <dd>The first bucket in the bucket brigade <span class="Li">$bb</span>.
    <p class="Pp"><span class="Li">&quot;undef&quot;</span> is returned if there
        are no buckets in <span class="Li">$bb</span>.</p>
  </dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_flatten_"><a class="permalink" href="#_flatten_">&quot;flatten&quot;</a></h2>
Get the data from buckets in the bucket brigade as one string
<p class="Pp"><span class="Li"></span></p>
<pre>
  $len = $bb-&gt;flatten($buffer);
  $len = $bb-&gt;flatten($buffer, $wanted);
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd></dd>
  <dt>arg1: $buffer ( SCALAR )</dt>
  <dd>The buffer to fill. All previous data will be lost.</dd>
  <dt>opt arg2: $wanted ( number )</dt>
  <dd>If no argument is passed then all data will be returned. If
      <span class="Li">$wanted</span> is specified -- that number or less bytes
      will be returned.</dd>
  <dt>ret: $len ( number )</dt>
  <dd>How many bytes were actually read.
    <p class="Pp"><span class="Li">$buffer</span> gets populated with the string
        that is read. It will contain an empty string if there was nothing to
        read.</p>
  </dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
  <dt>excpt: &quot;APR::Error&quot;</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_insert_head_"><a class="permalink" href="#_insert_head_">&quot;insert_head&quot;</a></h2>
Insert a list of buckets at the front of a brigade
<p class="Pp"><span class="Li"></span></p>
<pre>
  $bb-&gt;insert_head($b);
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd>Brigade to insert into</dd>
  <dt>arg1: $b ( &quot;APR::Bucket object&quot; )</dt>
  <dd>the bucket to insert. More buckets could be attached to that bucket.</dd>
  <dt>ret: no return value</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_insert_tail_"><a class="permalink" href="#_insert_tail_">&quot;insert_tail&quot;</a></h2>
Insert a list of buckets at the end of a brigade
<p class="Pp"><span class="Li"></span></p>
<pre>
  $bb-&gt;insert_tail($b);
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd>Brigade to insert into</dd>
  <dt>arg1: $b ( &quot;APR::Bucket object&quot; )</dt>
  <dd>the bucket to insert. More buckets could be attached to that bucket.</dd>
  <dt>ret: no return value</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_last_"><a class="permalink" href="#_last_">&quot;last&quot;</a></h2>
Return the last bucket in the brigade
<p class="Pp"><span class="Li"></span></p>
<pre>
  $b_last = $bb-&gt;last;
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd></dd>
  <dt>ret: $b_last ( &quot;APR::Bucket object&quot; )</dt>
  <dd>The last bucket in the bucket brigade <span class="Li">$bb</span>.
    <p class="Pp"><span class="Li">&quot;undef&quot;</span> is returned if there
        are no buckets in <span class="Li">$bb</span>.</p>
  </dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_length_"><a class="permalink" href="#_length_">&quot;length&quot;</a></h2>
Return the total length of the data in the brigade (not the number of buckets)
<p class="Pp"><span class="Li"></span></p>
<pre>
  $len = $bb-&gt;length;
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd></dd>
  <dt>ret: $len ( number )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_new_"><a class="permalink" href="#_new_">&quot;new&quot;</a></h2>
<span class="Li"></span>
<pre>
  my $nbb = APR::Brigade-&gt;new($p, $bucket_alloc);
  my $nbb =          $bb-&gt;new($p, $bucket_alloc);
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object or class&quot; )</dt>
  <dd></dd>
  <dt>arg1: $p ( &quot;APR::Pool object&quot; )</dt>
  <dd></dd>
  <dt>arg2: $bucket_alloc ( &quot;APR::BucketAlloc object&quot; )</dt>
  <dd></dd>
  <dt>ret: $nbb ( &quot;APR::Brigade object&quot; )</dt>
  <dd>a newly created bucket brigade object</dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">Example:</p>
<p class="Pp">Create a new bucket brigade, using the request object's pool:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use Apache2::Connection ();
  use Apache2::RequestRec ();
  use APR::Brigade ();
  my $bb = APR::Brigade-&gt;new($r-&gt;pool, $r-&gt;connection-&gt;bucket_alloc);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_bucket_alloc_"><a class="permalink" href="#_bucket_alloc_">&quot;bucket_alloc&quot;</a></h2>
Get the bucket allocator associated with this brigade.
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $ba = $bb-&gt;bucket_alloc();
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object or class&quot; )</dt>
  <dd></dd>
  <dt>ret: $ba ( &quot;APR::BucketAlloc object&quot; )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_next_"><a class="permalink" href="#_next_">&quot;next&quot;</a></h2>
Return the next bucket in a brigade
<p class="Pp"><span class="Li"></span></p>
<pre>
  $b_next = $bb-&gt;next($b);
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd></dd>
  <dt>arg1: $b ( &quot;APR::Bucket object&quot; )</dt>
  <dd>The bucket after which the next bucket <span class="Li">$b_next</span> is
      located</dd>
  <dt>ret: $b_next ( &quot;APR::Bucket object&quot; )</dt>
  <dd>The next bucket after bucket <span class="Li">$b</span>.
    <p class="Pp"><span class="Li">&quot;undef&quot;</span> is returned if there
        is no next bucket (i.e. <span class="Li">$b</span> is the last
      bucket).</p>
  </dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_pool_"><a class="permalink" href="#_pool_">&quot;pool&quot;</a></h2>
The pool the brigade is associated with.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $pool = $bb-&gt;pool;
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd></dd>
  <dt>ret: $pool ( &quot;APR::Pool object&quot; )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">The data is not allocated out of the pool, but a cleanup is
    registered with this pool. If the brigade is destroyed by some mechanism
    other than pool destruction, the destroying function is responsible for
    killing the registered cleanup.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_prev_"><a class="permalink" href="#_prev_">&quot;prev&quot;</a></h2>
Return the previous bucket in the brigade
<p class="Pp"><span class="Li"></span></p>
<pre>
  $b_prev = $bb-&gt;prev($b);
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd></dd>
  <dt>arg1: $b ( &quot;APR::Bucket object&quot; )</dt>
  <dd>The bucket located after bucket <span class="Li">$b_prev</span></dd>
  <dt>ret: $b_prev ( &quot;APR::Bucket object&quot; )</dt>
  <dd>The bucket located before bucket <span class="Li">$b</span>.
    <p class="Pp"><span class="Li">&quot;undef&quot;</span> is returned if there
        is no previous bucket (i.e. <span class="Li">$b</span> is the first
        bucket).</p>
  </dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_split_"><a class="permalink" href="#_split_">&quot;split&quot;</a></h2>
Split a bucket brigade into two, such that the given bucket is the first in the
  new bucket brigade.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $bb2 = $bb-&gt;split($b);
</pre>
<dl class="Bl-tag">
  <dt>obj: $bb ( &quot;APR::Brigade object&quot; )</dt>
  <dd>The brigade to split</dd>
  <dt>arg1: $b ( &quot;APR::Bucket object&quot; )</dt>
  <dd>The first bucket of the new brigade</dd>
  <dt>ret: $bb2 ( &quot;APR::Brigade object&quot; )</dt>
  <dd>The new brigade.</dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This function is useful when a filter wants to pass only the
    initial part of a brigade to the next filter.</p>
<p class="Pp">Example:</p>
<p class="Pp">Create a bucket brigade with three buckets, and split it into two
    brigade such that the second brigade will have the last two buckets.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $bb1 = APR::Brigade-&gt;new($r-&gt;pool, $c-&gt;bucket_alloc);
  my $ba  = $c-&gt;bucket_alloc();
  $bb1-&gt;insert_tail(APR::Bucket-&gt;new($ba, &quot;1&quot;));
  $bb1-&gt;insert_tail(APR::Bucket-&gt;new($ba, &quot;2&quot;));
  $bb1-&gt;insert_tail(APR::Bucket-&gt;new($ba, &quot;3&quot;));
</pre>
<p class="Pp"><span class="Li">$bb1</span> now contains buckets &quot;1&quot;,
    &quot;2&quot;, &quot;3&quot;. Now do the split at the second bucket:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $b = $bb1-&gt;first; # 1
  $b = $bb1-&gt;next($b); # 2
  my $bb2 = $bb1-&gt;split($b);
</pre>
<p class="Pp">Now <span class="Li">$bb1</span> contains bucket &quot;1&quot;.
    <span class="Li">$bb2</span> contains buckets: &quot;2&quot;,
  &quot;3&quot;</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="See_Also"><a class="permalink" href="#See_Also">See
  Also</a></h1>
mod_perl 2.0 documentation.
</section>
<section class="Sh">
<h1 class="Sh" id="Copyright"><a class="permalink" href="#Copyright">Copyright</a></h1>
mod_perl 2.0 and its core modules are copyrighted under The Apache Software
  License, Version 2.0.
</section>
<section class="Sh">
<h1 class="Sh" id="Authors"><a class="permalink" href="#Authors">Authors</a></h1>
The mod_perl development team and numerous contributors.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-06-18</td>
    <td class="foot-os">perl v5.28.2</td>
  </tr>
</table>
</body>
</html>
