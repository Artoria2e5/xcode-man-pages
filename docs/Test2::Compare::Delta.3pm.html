<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Test2::Compare::Delta(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test2::Compare::Delta(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test2::Compare::Delta(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Test2::Compare::Delta - Representation of differences between nested data
  structures.
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This is used by Test2::Compare. When data structures are compared a delta will
  be returned. Deltas are a tree data structure that represent all the
  differences between two other data structures.
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_s-1CLASS_METHODS_s0"><a class="permalink" href="#_s-1CLASS_METHODS_s0">CLASS
  METHODS</a></h2>
<dl class="Bl-tag">
  <dt>$class-&gt;add_column($NAME =&gt; sub { ... })</dt>
  <dd></dd>
  <dt>$class-&gt;add_column($NAME, %PARAMS)</dt>
  <dd>This can be used to add columns to the table that it produced when a
      comparison fails. The first argument should always be the column name,
      which must be unique.
    <p class="Pp">The first form simply takes a coderef that produces the value
        that should be displayed in the column for any given delta. The
        arguments passed into the sub are the delta, and the row ID.</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    Test2::Compare::Delta-&gt;add_column(
        Foo =&gt; sub {
            my ($delta, $id) = @_;
            return $delta-&gt;... ? 'foo' : 'bar'
        },
    );
    </pre>
    <p class="Pp">The second form allows you some extra options. The
        <span class="Li">'value'</span> key is required, and must be a coderef.
        All other keys are optional.</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    Test2::Compare::Delta-&gt;add_column(
        'Foo',    # column name
        value =&gt; sub { ... },    # how to get the cell value
        alias       =&gt; 'FOO',    # Display name (used in table header)
        no_collapse =&gt; $bool,    # Show column even if it has no values?
    );
    </pre>
  </dd>
  <dt>$bool = $class-&gt;remove_column($NAME)</dt>
  <dd>This will remove the specified column. This will return true if the column
      existed and was removed. This will return false if the column did not
      exist. No exceptions are thrown. If a missing column is a problem then you
      need to check the return yourself.</dd>
  <dt>$class-&gt;set_column_alias($NAME, $ALIAS)</dt>
  <dd>This can be used to change the table header, overriding the default column
      names with new ones.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_s-1ATTRIBUTES_s0"><a class="permalink" href="#_s-1ATTRIBUTES_s0">ATTRIBUTES</a></h2>
<dl class="Bl-tag">
  <dt>$bool = $delta-&gt;verified</dt>
  <dd></dd>
  <dt>$delta-&gt;set_verified($bool)</dt>
  <dd>This will be true if the delta itself matched, if the delta matched then
      the problem is in the delta's children, not the delta itself.</dd>
  <dt>$aref = $delta-&gt;id</dt>
  <dd></dd>
  <dt>$delta-&gt;set_id([$type, $name])</dt>
  <dd>ID for the delta, used to produce the path into the data structure. An
      example is <span class="Li">&quot;['HASH' =&gt; 'foo']&quot;</span> which
      means the delta is in the path
      <span class="Li">&quot;...-&gt;{'foo'}&quot;</span>. Valid types are
      <span class="Li">&quot;HASH&quot;</span>,
      <span class="Li">&quot;ARRAY&quot;</span>,
      <span class="Li">&quot;SCALAR&quot;</span>,
      <span class="Li">&quot;META&quot;</span>, and
      <span class="Li">&quot;METHOD&quot;</span>.</dd>
  <dt>$val = $delta-&gt;got</dt>
  <dd></dd>
  <dt>$delta-&gt;set_got($val)</dt>
  <dd>Deltas are produced by comparing a received data structure 'got' against a
      check data structure 'check'. The 'got' attribute contains the value that
      was received for comparison.</dd>
  <dt>$check = $delta-&gt;chk</dt>
  <dd></dd>
  <dt>$check = $delta-&gt;check</dt>
  <dd></dd>
  <dt>$delta-&gt;set_chk($check)</dt>
  <dd></dd>
  <dt>$delta-&gt;set_check($check)</dt>
  <dd>Deltas are produced by comparing a received data structure 'got' against a
      check data structure 'check'. The 'check' attribute contains the value
      that was expected in the comparison.
    <p class="Pp"><span class="Li">&quot;check&quot;</span> and
        <span class="Li">&quot;chk&quot;</span> are aliases for the same
        attribute.</p>
  </dd>
  <dt>$aref = $delta-&gt;children</dt>
  <dd></dd>
  <dt>$delta-&gt;set_children([$delta1, $delta2, ...])</dt>
  <dd>A Delta may have child deltas. If it does then this is an arrayref with
      those children.</dd>
  <dt>$dne = $delta-&gt;dne</dt>
  <dd></dd>
  <dt>$delta-&gt;set_dne($dne)</dt>
  <dd>Sometimes a comparison results in one side or the other not existing at
      all, in which case this is set to the name of the attribute that does not
      exist. This can be set to 'got' or 'check'.</dd>
  <dt>$e = $delta-&gt;exception</dt>
  <dd></dd>
  <dt>$delta-&gt;set_exception($e)</dt>
  <dd>This will be set to the exception in cases where the comparison failed due
      to an exception being thrown.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_s-1OTHER_s0"><a class="permalink" href="#_s-1OTHER_s0">OTHER</a></h2>
<dl class="Bl-tag">
  <dt>$string = $delta-&gt;render_got</dt>
  <dd>Renders the string that should be used in a table to represent the
      received value in a comparison.</dd>
  <dt>$string = $delta-&gt;render_check</dt>
  <dd>Renders the string that should be used in a table to represent the
      expected value in a comparison.</dd>
  <dt>$bool = $delta-&gt;should_show</dt>
  <dd>This will return true if the delta should be shown in the table. This is
      normally true for any unverified delta. This will also be true for deltas
      that contain extra useful debug information.</dd>
  <dt>$aref = $delta-&gt;filter_visible</dt>
  <dd>This will produce an arrayref of <span class="Li">&quot;[ $path =&gt;
      $delta ]&quot;</span> for all deltas that should be displayed in the
      table.</dd>
  <dt>$aref = $delta-&gt;table_header</dt>
  <dd>This returns an array ref of the headers for the table.</dd>
  <dt>$string = $delta-&gt;table_op</dt>
  <dd>This returns the operator that should be shown in the table.</dd>
  <dt>$string = $delta-&gt;table_check_lines</dt>
  <dd>This returns the defined lines (extra debug info) that should be
      displayed.</dd>
  <dt>$string = $delta-&gt;table_got_lines</dt>
  <dd>This returns the generated lines (extra debug info) that should be
      displayed.</dd>
  <dt>$aref = $delta-&gt;table_rows</dt>
  <dd>This returns an arrayref of table rows, each row is itself an
    arrayref.</dd>
  <dt>@table_lines = $delta-&gt;table</dt>
  <dd>Returns all the lines of the table that should be displayed.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SOURCE"><a class="permalink" href="#SOURCE">SOURCE</a></h1>
The source code repository for Test2-Suite can be found at
  <i>https://github.com/Test-More/Test2-Suite/</i>.
</section>
<section class="Sh">
<h1 class="Sh" id="MAINTAINERS"><a class="permalink" href="#MAINTAINERS">MAINTAINERS</a></h1>
<dl class="Bl-tag">
  <dt>Chad Granum &lt;exodist@cpan.org&gt;</dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<dl class="Bl-tag">
  <dt>Chad Granum &lt;exodist@cpan.org&gt;</dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright 2018 Chad Granum &lt;exodist@cpan.org&gt;.
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
<p class="Pp">See <i>http://dev.perl.org/licenses/</i></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-10-22</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
