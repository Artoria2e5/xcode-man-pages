<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Mail::DKIM::Signature(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mail::DKIM::Signature(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Mail::DKIM::Signature(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Mail::DKIM::Signature - represents a DKIM-Signature header
</section>
<section class="Sh">
<h1 class="Sh" id="CONSTRUCTORS"><a class="permalink" href="#CONSTRUCTORS">CONSTRUCTORS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_fBnew()_fP__-_create_a_new_signature_from_parameters"><a class="permalink" href="#_fBnew()_fP__-_create_a_new_signature_from_parameters"><b>new()</b>
  - create a new signature from parameters</a></h2>
<span class="Li"></span>
<pre>
  my $signature = Mail::DKIM::Signature-&gt;new(
                      [ Algorithm =&gt; 'rsa-sha1', ]
                      [ Signature =&gt; $base64, ]
                      [ Method =&gt; 'relaxed', ]
                      [ Domain =&gt; 'example.org', ]
                      [ Identity =&gt; 'user@example.org', ]
                      [ Headers =&gt; 'from:subject:date:message-id', ]
                      [ Query =&gt; 'dns', ]
                      [ Selector =&gt; 'alpha', ]
                      [ Timestamp =&gt; time(), ]
                      [ Expiration =&gt; time() + 86400, ]
                  );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBparse()_fP__-_create_a_new_signature_from_a_DKIM-Signature_header"><a class="permalink" href="#_fBparse()_fP__-_create_a_new_signature_from_a_DKIM-Signature_header"><b>parse()</b>
  - create a new signature from a DKIM-Signature header</a></h2>
<span class="Li"></span>
<pre>
  my $sig = Mail::DKIM::Signature-&gt;parse(
                  'DKIM-Signature: a=rsa-sha1; b=yluiJ7+0=; c=relaxed'
            );
</pre>
<p class="Pp">Constructs a signature by parsing the provided DKIM-Signature
    header content. You do not have to include the header name (i.e.
    &quot;DKIM-Signature:&quot;) but it is recommended, so the header name can
    be preserved and returned the same way in <b>as_string()</b>.</p>
<p class="Pp">Note: The input to this constructor is in the same format as the
    output of the as_string method.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_fBalgorithm()_fP__-_get_or_set_the_algorithm_(a=)_field"><a class="permalink" href="#_fBalgorithm()_fP__-_get_or_set_the_algorithm_(a=)_field"><b>algorithm()</b>
  - get or set the algorithm (a=) field</a></h2>
The algorithm used to generate the signature. Should be either
  &quot;rsa-sha1&quot;, an RSA-signed SHA-1 digest, or &quot;rsa-sha256&quot;,
  an RSA-signed SHA-256 digest.
<p class="Pp">See also <b>hash_algorithm()</b>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBas_string()_fP__-_the_signature_header_as_a_string"><a class="permalink" href="#_fBas_string()_fP__-_the_signature_header_as_a_string"><b>as_string()</b>
  - the signature header as a string</a></h2>
<span class="Li"></span>
<pre>
  print $signature-&gt;as_string . &quot;\n&quot;;
</pre>
<p class="Pp">outputs</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  DKIM-Signature: a=rsa-sha1; b=yluiJ7+0=; c=relaxed
</pre>
<p class="Pp">As shown in the example, the as_string method can be used to
    generate the DKIM-Signature that gets prepended to a signed message.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBas_string_without_data()_fP__-_signature_without_the_signature_data"><a class="permalink" href="#_fBas_string_without_data()_fP__-_signature_without_the_signature_data"><b>as_string_without_data()</b>
  - signature without the signature data</a></h2>
<span class="Li"></span>
<pre>
  print $signature-&gt;as_string_without_data . &quot;\n&quot;;
</pre>
<p class="Pp">outputs</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  DKIM-Signature: a=rsa-sha1; b=; c=relaxed
</pre>
<p class="Pp">This is similar to the <b>as_string()</b> method, but it always
    excludes the &quot;data&quot; part. This is used by the DKIM
    canonicalization methods, which require incorporating this part of the
    signature into the signed message.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBbody_count()_fP__-_get_or_set_the_body_count_(l=)_field"><a class="permalink" href="#_fBbody_count()_fP__-_get_or_set_the_body_count_(l=)_field"><b>body_count()</b>
  - get or set the body count (l=) field</a></h2>
<span class="Li"></span>
<pre>
  my $i = $signature-&gt;body_count;
</pre>
<p class="Pp">Informs the verifier of the number of bytes in the body of the
    email included in the cryptographic hash, starting from 0 immediately
    following the CRLF preceding the body. Also known as the l= tag.</p>
<p class="Pp">When creating a signature, this tag may be either omitted, or set
    after the selected canonicalization system has received the entire message
    body (but before it canonicalizes the DKIM-Signature).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBbody_hash()_fP__-_get_or_set_the_body_hash_(bh=)_field"><a class="permalink" href="#_fBbody_hash()_fP__-_get_or_set_the_body_hash_(bh=)_field"><b>body_hash()</b>
  - get or set the body hash (bh=) field</a></h2>
<span class="Li"></span>
<pre>
  my $bh = $signature-&gt;body_hash;
</pre>
<p class="Pp">The hash of the body part of the message. Whitespace is ignored in
    this value. This tag is required.</p>
<p class="Pp">When accessing this value, whitespace is stripped from the tag for
    you.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBcanonicalization()_fP__-_get_or_set_the_canonicalization_(c=)_field"><a class="permalink" href="#_fBcanonicalization()_fP__-_get_or_set_the_canonicalization_(c=)_field"><b>canonicalization()</b>
  - get or set the canonicalization (c=) field</a></h2>
<span class="Li"></span>
<pre>
  $signature-&gt;canonicalization('relaxed', 'simple');

  ($header, $body) = $signature-&gt;canonicalization;
</pre>
<p class="Pp">Message canonicalization (default is &quot;simple/simple&quot;).
    This informs the verifier of the type of canonicalization used to prepare
    the message for signing.</p>
<p class="Pp">In scalar context, this returns header/body canonicalization as a
    single string separated by /. In list context, it returns a two element
    array, containing first the header canonicalization, then the body.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBdata()_fP__-_get_or_set_the_signature_data_(b=)_field"><a class="permalink" href="#_fBdata()_fP__-_get_or_set_the_signature_data_(b=)_field"><b>data()</b>
  - get or set the signature data (b=) field</a></h2>
<span class="Li"></span>
<pre>
  my $base64 = $signature-&gt;data;
  $signature-&gt;data($base64);
</pre>
<p class="Pp">The signature data. Whitespace is automatically stripped from the
    returned value. The data is Base64-encoded.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBdomain()_fP__-_get_or_set_the_domain_(d=)_field"><a class="permalink" href="#_fBdomain()_fP__-_get_or_set_the_domain_(d=)_field"><b>domain()</b>
  - get or set the domain (d=) field</a></h2>
<span class="Li"></span>
<pre>
  my $d = $signature-&gt;domain;          # gets the domain value
  $signature-&gt;domain('example.org');   # sets the domain value
</pre>
<p class="Pp">The domain of the signing entity, as specified in the signature.
    This is the domain that will be queried for the public key.</p>
<p class="Pp">If using an &quot;internationalized domain name&quot;, the domain
    name must be converted to ASCII (following section 4.1 of RFC 3490) before
    passing it to this method.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBexpiration()_fP__-_get_or_set_the_signature_expiration_(x=)_field"><a class="permalink" href="#_fBexpiration()_fP__-_get_or_set_the_signature_expiration_(x=)_field"><b>expiration()</b>
  - get or set the signature expiration (x=) field</a></h2>
Signature expiration (default is undef, meaning no expiration). The signature
  expiration, if defined, is an unsigned integer identifying the standard Unix
  seconds-since-1970 time when the signature will expire.
</section>
<section class="Ss">
<h2 class="Ss" id="_fBget_public_key()_fP__-_fetches_the_public_key_referenced_by_this_signature"><a class="permalink" href="#_fBget_public_key()_fP__-_fetches_the_public_key_referenced_by_this_signature"><b>get_public_key()</b>
  - fetches the public key referenced by this signature</a></h2>
<span class="Li"></span>
<pre>
  my $pubkey = $signature-&gt;get_public_key;
</pre>
<p class="Pp">Public key to fetch is determined by the protocol, selector, and
    domain fields.</p>
<p class="Pp">This method caches the result of the fetch, so subsequent calls
    will not require additional DNS queries.</p>
<p class="Pp">This method will <span class="Li">&quot;die&quot;</span> if an
    error occurs.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBget_tag()_fP__-_access_the_raw_value_of_a_tag_in_this_signature"><a class="permalink" href="#_fBget_tag()_fP__-_access_the_raw_value_of_a_tag_in_this_signature"><b>get_tag()</b>
  - access the raw value of a tag in this signature</a></h2>
<span class="Li"></span>
<pre>
  my $raw_identity = $signature-&gt;get_tag('i');
</pre>
<p class="Pp">Use this method to access a tag not already supported by
    Mail::DKIM, or if you want to bypass decoding of the value by
  Mail::DKIM.</p>
<p class="Pp">For example, the raw i= (identity) tag is encoded in
    quoted-printable form. If you use the <b>identity()</b> method, Mail::DKIM
    will decode from quoted-printable before returning the value. But if you use
    get_tag('i'), you can access the encoded quoted-printable form of the
  value.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBhash_algorithm()_fP__-_access_the_hash_algorithm_specified_in_this_signature"><a class="permalink" href="#_fBhash_algorithm()_fP__-_access_the_hash_algorithm_specified_in_this_signature"><b>hash_algorithm()</b>
  - access the hash algorithm specified in this signature</a></h2>
<span class="Li"></span>
<pre>
  my $hash = $signature-&gt;hash_algorithm;
</pre>
<p class="Pp">Determines what hashing algorithm is used as part of the
    signature's specified algorithm.</p>
<p class="Pp">For algorithm &quot;rsa-sha1&quot;, the hash algorithm is
    &quot;sha1&quot;. Likewise, for algorithm &quot;rsa-sha256&quot;, the hash
    algorithm is &quot;sha256&quot;. If the algorithm is not recognized, undef
    is returned.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBheaderlist()_fP__-_get_or_set_the_signed_header_fields_(h=)_field"><a class="permalink" href="#_fBheaderlist()_fP__-_get_or_set_the_signed_header_fields_(h=)_field"><b>headerlist()</b>
  - get or set the signed header fields (h=) field</a></h2>
<span class="Li"></span>
<pre>
  $signature-&gt;headerlist('a:b:c');

  my $headerlist = $signature-&gt;headerlist;

  my @headers = $signature-&gt;headerlist;
</pre>
<p class="Pp">Signed header fields. A colon-separated list of header field names
    that identify the header fields presented to the signing algorithm.</p>
<p class="Pp">In scalar context, the list of header field names will be returned
    as a single string, with the names joined together with colons. In list
    context, the header field names will be returned as a list.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBidentity()_fP__-_get_or_set_the_signing_identity_(i=)_field"><a class="permalink" href="#_fBidentity()_fP__-_get_or_set_the_signing_identity_(i=)_field"><b>identity()</b>
  - get or set the signing identity (i=) field</a></h2>
<span class="Li"></span>
<pre>
  my $i = $signature-&gt;identity;
</pre>
<p class="Pp">Identity of the user or agent on behalf of which this message is
    signed. The identity has an optional local part, followed by &quot;@&quot;,
    then a domain name. The domain name should be the same as or a subdomain of
    the domain returned by the <span class="Li">&quot;domain&quot;</span>
    method.</p>
<p class="Pp">Ideally, the identity should match the identity listed in the
    From: header, or the Sender: header, but this is not required to have a
    valid signature. Whether the identity used is &quot;authorized&quot; to sign
    for the given message is not determined here.</p>
<p class="Pp">If using an &quot;internationalized domain name&quot;, the domain
    name must be converted to ASCII (following section 4.1 of RFC 3490) before
    passing it to this method.</p>
<p class="Pp">Identity values are encoded in the signature in quoted-printable
    format. Using this method will translate to/from quoted-printable as
    necessary. If you want the raw quoted-printable version of the identity, use
    <span class="Li">$signature</span>-&gt;get_tag('i').</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBkey()_fP__-_get_or_set_the_private_key_object"><a class="permalink" href="#_fBkey()_fP__-_get_or_set_the_private_key_object"><b>key()</b>
  - get or set the private key object</a></h2>
<span class="Li"></span>
<pre>
  my $key = $signature-&gt;key;

  $signature-&gt;key(Mail::DKIM::PrivateKey-&gt;load(File =&gt; 'private.key'));
</pre>
<p class="Pp">The private key is used for signing messages. It is not used for
    verifying messages.</p>
<p class="Pp">The key object can be any object that implements the
    <b>sign_digest()</b> method. (Providing your own object can be useful if
    your actual keys are stored out-of-process.)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBmethod()_fP__-_get_or_set_the_canonicalization_(c=)_field"><a class="permalink" href="#_fBmethod()_fP__-_get_or_set_the_canonicalization_(c=)_field"><b>method()</b>
  - get or set the canonicalization (c=) field</a></h2>
Message canonicalization (default is &quot;simple&quot;). This informs the
  verifier of the type of canonicalization used to prepare the message for
  signing.
</section>
<section class="Ss">
<h2 class="Ss" id="_fBprotocol()_fP__-_get_or_set_the_query_methods_(q=)_field"><a class="permalink" href="#_fBprotocol()_fP__-_get_or_set_the_query_methods_(q=)_field"><b>protocol()</b>
  - get or set the query methods (q=) field</a></h2>
A colon-separated list of query methods used to retrieve the public key (default
  is &quot;dns&quot;). Each query method is of the form
  &quot;type[/options]&quot;, where the syntax and semantics of the options
  depends on the type.
</section>
<section class="Ss">
<h2 class="Ss" id="_fBresult()_fP__-_get_or_set_the_verification_result"><a class="permalink" href="#_fBresult()_fP__-_get_or_set_the_verification_result"><b>result()</b>
  - get or set the verification result</a></h2>
<span class="Li"></span>
<pre>
  my $result = $signature-&gt;result;

  $signature-&gt;result('pass');

  # to set the result with details
  $signature-&gt;result('invalid', 'no public key');
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBresult_detail()_fP__-_access_the_result,_plus_details_if_available"><a class="permalink" href="#_fBresult_detail()_fP__-_access_the_result,_plus_details_if_available"><b>result_detail()</b>
  - access the result, plus details if available</a></h2>
<span class="Li"></span>
<pre>
  my $detail = $signature-&gt;result_detail;
</pre>
<p class="Pp">An explanation of possible detail messages can be found in the
    documentation for &quot;<b>result_detail()</b>&quot; in
    Mail::DKIM::Verifier.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBselector()_fP__-_get_or_set_the_selector_(s=)_field"><a class="permalink" href="#_fBselector()_fP__-_get_or_set_the_selector_(s=)_field"><b>selector()</b>
  - get or set the selector (s=) field</a></h2>
The selector subdivides the namespace for the &quot;d=&quot; (domain) tag.
</section>
<section class="Ss">
<h2 class="Ss" id="_fBprettify()_fP__-_alters_the_signature_to_look__nicer__as_an_email_header"><a class="permalink" href="#_fBprettify()_fP__-_alters_the_signature_to_look__nicer__as_an_email_header"><b>prettify()</b>
  - alters the signature to look &quot;nicer&quot; as an email header</a></h2>
<span class="Li"></span>
<pre>
  $signature-&gt;prettify;
</pre>
<p class="Pp">This method may alter the signature in a way that breaks
    signatures, so it should be done ONLY when the signature is being generated,
    BEFORE being fed to the canonicalization algorithm.</p>
<p class="Pp">See also <b>prettify_safe()</b>, which will not break
  signatures.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBprettify_safe()_fP__-_same_as__fBprettify()_fP_but_only_touches_the_b=_part"><a class="permalink" href="#_fBprettify_safe()_fP__-_same_as__fBprettify()_fP_but_only_touches_the_b=_part"><b>prettify_safe()</b>
  - same as <b>prettify()</b> but only touches the b= part</a></h2>
<span class="Li"></span>
<pre>
  $signature-&gt;prettify_safe;
</pre>
<p class="Pp">This method will not break the signature, but it only affects the
    b= part of the signature.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBtimestamp()_fP__-_get_or_set_the_signature_timestamp_(t=)_field"><a class="permalink" href="#_fBtimestamp()_fP__-_get_or_set_the_signature_timestamp_(t=)_field"><b>timestamp()</b>
  - get or set the signature timestamp (t=) field</a></h2>
Signature timestamp (default is undef, meaning unknown creation time). This is
  the time that the signature was created. The value is an unsigned integer
  identifying the number of standard Unix seconds-since-1970.
</section>
<section class="Ss">
<h2 class="Ss" id="_fBversion()_fP__-_get_or_set_the__s-1DKIM_s0_specification_version_(v=)_field"><a class="permalink" href="#_fBversion()_fP__-_get_or_set_the__s-1DKIM_s0_specification_version_(v=)_field"><b>version()</b>
  - get or set the DKIM specification version (v=) field</a></h2>
This is the version of the DKIM specification that applies to this signature
  record.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
Mail::DKIM::DkSignature for DomainKey-Signature headers
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Jason Long, &lt;jlong@messiah.edu&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
Copyright (C) 2006-2007 by Messiah College
<p class="Pp">This library is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself, either Perl version 5.8.6 or,
    at your option, any later version of Perl 5 you may have available.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2018-10-13</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
