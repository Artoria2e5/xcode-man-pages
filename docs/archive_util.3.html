<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2003-2007 Tim Kientzle
   All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
  
   THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
   $FreeBSD$
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>ARCHIVE_UTIL(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ARCHIVE_UTIL(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">ARCHIVE_UTIL(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">archive_clear_error</code>,
  <code class="Nm">archive_compression</code>,
  <code class="Nm">archive_compression_name</code>,
  <code class="Nm">archive_copy_error</code>,
  <code class="Nm">archive_errno</code>,
  <code class="Nm">archive_error_string</code>,
  <code class="Nm">archive_file_count</code>,
  <code class="Nm">archive_filter_code</code>,
  <code class="Nm">archive_filter_count</code>,
  <code class="Nm">archive_filter_name</code>,
  <code class="Nm">archive_format</code>,
  <code class="Nm">archive_format_name</code>,
  <code class="Nm">archive_position</code>,
  <code class="Nm">archive_set_error</code> &#x2014;
<div class="Nd">libarchive utility functions</div>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
Streaming Archive Library (libarchive, -larchive)
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<code class="In">#include &lt;<a class="In">archive.h</a>&gt;</code>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_clear_error</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_compression</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_compression_name</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_copy_error</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>, <var class="Fa" style="white-space: nowrap;">struct archive
    *</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_errno</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_error_string</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_file_count</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_filter_code</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>,
  <var class="Fa" style="white-space: nowrap;">int</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_filter_count</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>,
  <var class="Fa" style="white-space: nowrap;">int</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_filter_name</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>,
  <var class="Fa" style="white-space: nowrap;">int</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_format</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_format_name</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>);</p>
<p class="Pp"><var class="Ft">int64_t</var>
  <br/>
  <code class="Fn">archive_position</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive *</var>,
  <var class="Fa" style="white-space: nowrap;">int</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_set_error</code>(<var class="Fa">struct archive
    *</var>, <var class="Fa">int error_code</var>, <var class="Fa">const char
    *fmt</var>, <var class="Fa">...</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
These functions provide access to various information about the struct archive
  object used in the <a class="Xr">libarchive(3)</a> library.
<dl class="Bl-tag Bl-compact">
  <dt><code class="Fn">archive_clear_error</code>()</dt>
  <dd>Clears any error information left over from a previous call. Not generally
      used in client code.</dd>
  <dt><code class="Fn">archive_compression</code>()</dt>
  <dd>Synonym for
      <code class="Fn">archive_filter_code</code>(<var class="Fa">a</var>,
      <var class="Fa">0</var>).</dd>
  <dt><code class="Fn">archive_compression_name</code>()</dt>
  <dd>Synonym for
      <code class="Fn">archive_filter_name</code>(<var class="Fa">a</var>,
      <var class="Fa">0</var>).</dd>
  <dt><code class="Fn">archive_copy_error</code>()</dt>
  <dd>Copies error information from one archive to another.</dd>
  <dt><code class="Fn">archive_errno</code>()</dt>
  <dd>Returns a numeric error code (see <a class="Xr">errno(2)</a>) indicating
      the reason for the most recent error return. Note that this can not be
      reliably used to detect whether an error has occurred. It should be used
      only after another libarchive function has returned an error status.</dd>
  <dt><code class="Fn">archive_error_string</code>()</dt>
  <dd>Returns a textual error message suitable for display. The error message
      here is usually more specific than that obtained from passing the result
      of <code class="Fn">archive_errno</code>() to
      <a class="Xr">strerror(3)</a>.</dd>
  <dt><code class="Fn">archive_file_count</code>()</dt>
  <dd>Returns a count of the number of files processed by this archive object.
      The count is incremented by calls to
      <a class="Xr">archive_write_header(3)</a> or
      <a class="Xr">archive_read_next_header(3)</a>.</dd>
  <dt><code class="Fn">archive_filter_code</code>()</dt>
  <dd>Returns a numeric code identifying the indicated filter. See
      <code class="Fn">archive_filter_count</code>() for details of the
      numbering.</dd>
  <dt><code class="Fn">archive_filter_count</code>()</dt>
  <dd>Returns the number of filters in the current pipeline. For read archive
      handles, these filters are added automatically by the automatic format
      detection. For write archive handles, these filters are added by calls to
      the various <code class="Fn">archive_write_add_filter_XXX</code>()
      functions. Filters in the resulting pipeline are numbered so that filter 0
      is the filter closest to the format handler. As a convenience, functions
      that expect a filter number will accept -1 as a synonym for the
      highest-numbered filter.
    <p class="Pp">For example, when reading a uuencoded gzipped tar archive,
        there are three filters: filter 0 is the gunzip filter, filter 1 is the
        uudecode filter, and filter 2 is the pseudo-filter that wraps the
        archive read functions. In this case, requesting
        <code class="Fn">archive_position</code>(<var class="Fa">a</var>,
        <var class="Fa">-1</var>) would be a synonym for
        <code class="Fn">archive_position</code>(<var class="Fa">a</var>,
        <var class="Fa">2</var>) which would return the number of bytes
        currently read from the archive, while
        <code class="Fn">archive_position</code>(<var class="Fa">a</var>,
        <var class="Fa">1</var>) would return the number of bytes after
        uudecoding, and
        <code class="Fn">archive_position</code>(<var class="Fa">a</var>,
        <var class="Fa">0</var>) would return the number of bytes after
        decompression.</p>
  </dd>
  <dt><code class="Fn">archive_filter_name</code>()</dt>
  <dd>Returns a textual name identifying the indicated filter. See
      <code class="Fn">archive_filter_count</code>() for details of the
      numbering.</dd>
  <dt><code class="Fn">archive_format</code>()</dt>
  <dd>Returns a numeric code indicating the format of the current archive entry.
      This value is set by a successful call to
      <code class="Fn">archive_read_next_header</code>(). Note that it is common
      for this value to change from entry to entry. For example, a tar archive
      might have several entries that utilize GNU tar extensions and several
      entries that do not. These entries will have different format codes.</dd>
  <dt><code class="Fn">archive_format_name</code>()</dt>
  <dd>A textual description of the format of the current entry.</dd>
  <dt><code class="Fn">archive_position</code>()</dt>
  <dd>Returns the number of bytes read from or written to the indicated filter.
      In particular,
      <code class="Fn">archive_position</code>(<var class="Fa">a</var>,
      <var class="Fa">0</var>) returns the number of bytes read or written by
      the format handler, while
      <code class="Fn">archive_position</code>(<var class="Fa">a</var>,
      <var class="Fa">-1</var>) returns the number of bytes read or written to
      the archive. See <code class="Fn">archive_filter_count</code>() for
      details of the numbering here.</dd>
  <dt><code class="Fn">archive_set_error</code>()</dt>
  <dd>Sets the numeric error code and error description that will be returned by
      <code class="Fn">archive_errno</code>() and
      <code class="Fn">archive_error_string</code>(). This function should be
      used within I/O callbacks to set system-specific error codes and error
      descriptions. This function accepts a printf-like format string and
      arguments. However, you should be careful to use only the following printf
      format specifiers: &#x201C;%c&#x201D;, &#x201C;%d&#x201D;,
      &#x201C;%jd&#x201D;, &#x201C;%jo&#x201D;, &#x201C;%ju&#x201D;,
      &#x201C;%jx&#x201D;, &#x201C;%ld&#x201D;, &#x201C;%lo&#x201D;,
      &#x201C;%lu&#x201D;, &#x201C;%lx&#x201D;, &#x201C;%o&#x201D;,
      &#x201C;%u&#x201D;, &#x201C;%s&#x201D;, &#x201C;%x&#x201D;,
      &#x201C;%%&#x201D;. Field-width specifiers and other printf features are
      not uniformly supported and should not be used.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">archive_read(3)</a>, <a class="Xr">archive_write(3)</a>,
  <a class="Xr">libarchive(3)</a>, <a class="Xr">printf(3)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
The <code class="Nm">libarchive</code> library first appeared in
  <span class="Ux">FreeBSD 5.3</span>.
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
The <code class="Nm">libarchive</code> library was written by
  <span class="An">Tim Kientzle</span> &#x27E8;kientzle@acm.org&#x27E9;.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 2, 2012</td>
    <td class="foot-os">Mac OS X 11.0</td>
  </tr>
</table>
</body>
</html>
