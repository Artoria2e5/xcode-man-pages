<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Mail::SPF::Util(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mail::SPF::Util(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Mail::SPF::Util(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Mail::SPF::Util - Mail::SPF utility class
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
    use Mail::SPF::Util;

    $hostname = Mail::SPF::Util-&gt;hostname;

    $ipv6_address_v4mapped =
        Mail::SPF::Util-&gt;ipv4_address_to_ipv6($ipv4_address);

    $ipv4_address =
        Mail::SPF::Util-&gt;ipv6_address_to_ipv4($ipv6_address_v4mapped);

    $is_v4mapped =
        Mail::SPF::Util-&gt;ipv6_address_is_ipv4_mapped($ipv6_address);

    $ip_address_string  = Mail::SPF::Util-&gt;ip_address_to_string($ip_address);
    $reverse_name       = Mail::SPF::Util-&gt;ip_address_reverse($ip_address);

    $validated_domain = Mail::SPF::Util-&gt;valid_domain_for_ip_address(
        $spf_server, $request,
        $ip_address, $domain,
        $find_best_match,       # defaults to false
        $accept_any_domain      # defaults to false
    );

    $sanitized_string = Mail::SPF::Util-&gt;sanitize_string($string);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>Mail::SPF::Util</b> is Mail::SPF's utility class.
<section class="Ss">
<h2 class="Ss" id="Class_methods"><a class="permalink" href="#Class_methods">Class
  methods</a></h2>
The following class methods are provided:
<dl class="Bl-tag">
  <dt><b>hostname</b>: returns <i>string</i></dt>
  <dd>Returns the fully qualified domain name (FQDN) of the local host.</dd>
  <dt><b>ipv4_address_to_ipv6($ipv4_address)</b>: returns <i>NetAddr::IP</i>;
    throws <i>Mail::SPF::EInvalidOptionValue</i></dt>
  <dd>Converts the specified <i>NetAddr::IP</i> IPv4 address into an IPv4-mapped
      IPv6 address. Throws a <i>Mail::SPF::EInvalidOptionValue</i> exception if
      the specified IP address is not an IPv4 address.</dd>
  <dt><b>ipv6_address_to_ipv4($ipv6_address)</b>: returns <i>NetAddr::IP</i>;
    throws <i>Mail::SPF::EInvalidOptionValue</i></dt>
  <dd>Converts the specified <i>NetAddr::IP</i> IPv4-mapped IPv6 address into a
      proper IPv4 address. Throws a <i>Mail::SPF::EInvalidOptionValue</i>
      exception if the specified IP address is not an IPv4-mapped IPv6
    address.</dd>
  <dt><b>ipv6_address_is_ipv4_mapped($ipv6_address)</b>: returns
    <i>boolean</i></dt>
  <dd>Returns <b>true</b> if the specified <i>NetAddr::IP</i> IPv6 address is an
      IPv4-mapped address, <b>false</b> otherwise.</dd>
  <dt><b>ip_address_to_string($ip_address)</b>: returns <i>string</i>; throws
    <i>Mail::SPF::EInvalidOptionValue</i></dt>
  <dd>Returns the given <i>NetAddr::IP</i> IPv4 or IPv6 address compactly
      formatted as a <i>string</i>. For IPv4 addresses, this is equivalent to
      calling NetAddr::IP's <span class="Li">&quot;addr&quot;</span> method. For
      IPv6 addresses, this is equivalent to calling NetAddr::IP's
      <span class="Li">&quot;short&quot;</span> method. Throws a
      <i>Mail::SPF::EInvalidOptionValue</i> exception if the specified object is
      not a <i>NetAddr::IP</i> IPv4 or IPv6 address object.</dd>
  <dt><b>ip_address_reverse($ip_address)</b>: returns <i>string</i>; throws
    <i>Mail::SPF::EInvalidOptionValue</i></dt>
  <dd>Returns the
      <span class="Li">&quot;in-addr.arpa.&quot;</span>/<span class="Li">&quot;ip6.arpa.&quot;</span>
      reverse notation of the given <i>NetAddr::IP</i> IPv4 or IPv6 address.
      Throws a <i>Mail::SPF::EInvalidOptionValue</i> exception if the specified
      object is not a <i>NetAddr::IP</i> IPv4 or IPv6 address object.</dd>
  <dt><b>valid_domain_for_ip_address($server, </b><b>$request</b><b>,
    </b><b>$ip_address</b><b>, </b><b>$domain</b><b>,
    </b><b>$find_best_match</b> <b> = false, </b><b>$accept_any_domain</b><b> =
    false)</b>: returns <i>string</i> or <b>undef</b></dt>
  <dd>Finds a valid domain name for the given <i>NetAddr::IP</i> IP address that
      matches the given domain or a sub-domain thereof. A domain name is valid
      for the given IP address if the IP address reverse-maps to that domain
      name in DNS, and the domain name in turn forward-maps to the IP address.
      Uses the given <i>Mail::SPF::Server</i> and <i>Mail::SPF::Request</i>
      objects to perform DNS look-ups. Returns the validated domain name.
    <p class="Pp">If <span class="Li">$find_best_match</span> is <b>true</b>,
        the one domain name is selected that best matches the given domain name,
        preferring direct matches over sub-domain matches. Defaults to
        <b>false</b>.</p>
    <p class="Pp">If <span class="Li">$accept_any_domain</span> is <b>true</b>,
        <i>any</i> domain names are considered acceptable, even if they differ
        completely from the given domain name (which is then effectively unused
        unless a best match is requested). Defaults to <b>false</b>.</p>
  </dd>
  <dt><b>sanitize_string($string)</b>: returns <i>string</i> or
    <b>undef</b></dt>
  <dd>Replaces all non-printable or non-ascii characters in a string with their
      hex-escaped representation (e.g.,
      <span class="Li">&quot;\x00&quot;</span>).</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
Mail::SPF
<p class="Pp">For availability, support, and license information, see the README
    file included with Mail::SPF.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
Julian Mehnle &lt;julian@mehnle.net&gt;, Shevek &lt;cpan@anarres.org&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="POD_ERRORS"><a class="permalink" href="#POD_ERRORS">POD
  ERRORS</a></h1>
Hey! <b>The above document had some coding errors, which are explained
  below:</b>
<dl class="Bl-tag">
  <dt>Around line 157:</dt>
  <dd>L&lt;&gt; starts or ends with whitespace
    <p class="Pp">L&lt;&gt; starts or ends with whitespace</p>
  </dd>
</dl>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-09-30</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
