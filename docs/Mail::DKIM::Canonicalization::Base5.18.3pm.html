<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Mail::DKIM::Canonicalization::Base(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mail::DKIM::Canonicalization::Base(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Mail::DKIM::Canonicalization::Base(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Mail::DKIM::Canonicalization::Base - base class for canonicalization methods
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
  # canonicalization results get output to STDOUT
  my $method = new Mail::DKIM::Canonicalization::relaxed(
                    output_fh =&gt; *STDOUT,
                    Signature =&gt; $dkim_signature);

  # add headers
  $method-&gt;add_header(&quot;Subject: this is the subject\015\012&quot;);
  $method-&gt;finish_header(Headers =&gt; \@all_headers);

  # add body
  $method-&gt;add_body(&quot;This is the body.\015\012&quot;);
  $method-&gt;add_body(&quot;Another two lines\015\012of the body.\015\012&quot;);
  $method-&gt;finish_body;

  # this adds the signature to the end
  $method-&gt;finish_message;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSTRUCTOR"><a class="permalink" href="#CONSTRUCTOR">CONSTRUCTOR</a></h1>
Use the <i>new()</i> method of the desired canonicalization implementation class
  to construct a canonicalization object. E.g.
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $method = new Mail::DKIM::Canonicalization::relaxed(
                    output_fh =&gt; *STDOUT,
                    Signature =&gt; $dkim_signature);
</pre>
<p class="Pp">The constructors accept these arguments:</p>
<dl class="Bl-tag">
  <dt>Signature</dt>
  <dd>(Required) Provide the DKIM signature being constructed (if the message is
      being signed), or the DKIM signature being verified (if the message is
      being verified). The canonicalization method either writes parameters to
      the signature, or reads parameters from the signature (e.g. the h=
    tag).</dd>
  <dt>output</dt>
  <dd>If specified, the canonicalized message will be passed to this object with
      the PRINT method.</dd>
  <dt>output_digest</dt>
  <dd>If specified, the canonicalized message will be added to this digest.
      (Uses the <i>add()</i> method.)</dd>
  <dt>output_fh</dt>
  <dd>If specified, the canonicalized message will be written to this file
      handle.</dd>
</dl>
<p class="Pp">If none of the output parameters are specified, then the
    canonicalized message is appended to an internal buffer. The contents of
    this buffer can be accessed using the <i>result()</i> method.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_fIadd_body()_fP__-_feeds_part_of_the_body_into_the_canonicalization"><a class="permalink" href="#_fIadd_body()_fP__-_feeds_part_of_the_body_into_the_canonicalization"><i>add_body()</i>
  - feeds part of the body into the canonicalization</a></h2>
<span class="Li"></span>
<pre>
  $method-&gt;add_body(&quot;This is the body.\015\012&quot;);
  $method-&gt;add_body(&quot;Another two lines\015\012of the body.\015\012&quot;);
</pre>
<p class="Pp">The body should be fed one or more &quot;lines&quot; at a time.
    I.e. do not feed part of a line.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fIfinish_header()_fP__-_called_when_the_header_has_been_completely_parsed"><a class="permalink" href="#_fIfinish_header()_fP__-_called_when_the_header_has_been_completely_parsed"><i>finish_header()</i>
  - called when the header has been completely parsed</a></h2>
<span class="Li"></span>
<pre>
  $method-&gt;finish_header(Headers =&gt; \@all_headers);
</pre>
<p class="Pp">Formerly the canonicalization object would only get the header
    data through successive invocations of <i>add_header()</i>. However, that
    required the canonicalization object to store a copy of the entire header so
    that it could choose the order in which headers were fed to the digest
    object. This is inefficient use of memory, since a message with many
    signatures may use many canonicalization objects and each canonicalization
    object has its own copy of the header.</p>
<p class="Pp">The headers array is an array of one element per header field,
    with the headers not processed/canonicalized in any way.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fIresult()_fP"><a class="permalink" href="#_fIresult()_fP"><i>result()</i></a></h2>
<span class="Li"></span>
<pre>
  my $result = $method-&gt;result;
</pre>
<p class="Pp">If you did not specify an object or handle to send the output to,
    the result of the canonicalization is stored in the canonicalization method
    itself, and can be accessed using this method.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
Mail::DKIM
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Jason Long, &lt;jlong@messiah.edu&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
Copyright (C) 2006-2007 by Messiah College
<p class="Pp">This library is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself, either Perl version 5.8.6 or,
    at your option, any later version of Perl 5 you may have available.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2012-11-28</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
