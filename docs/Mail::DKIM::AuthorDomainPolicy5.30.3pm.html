<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Mail::DKIM::AuthorDomainPolicy(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mail::DKIM::AuthorDomainPolicy(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Mail::DKIM::AuthorDomainPolicy(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Mail::DKIM::AuthorDomainPolicy - represents an Author Domain Signing Practices
  (ADSP) record
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The Author Domain Signing Policies (ADSP) record can be published by any domain
  to help a receiver know what to do when it encounters an unsigned message
  claiming to originate from that domain.
<p class="Pp">The record is published as a DNS TXT record at
    _adsp._domainkey.DOMAIN where DOMAIN is the domain of the message's
    &quot;From&quot; address.</p>
<p class="Pp">More details about this record can be found by reading the
    specification itself at &lt;http://tools.ietf.org/html/rfc5617&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSTRUCTORS"><a class="permalink" href="#CONSTRUCTORS">CONSTRUCTORS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_fBfetch()_fP"><a class="permalink" href="#_fBfetch()_fP"><b>fetch()</b></a></h2>
Lookup an ADSP record in DNS.
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $policy = Mail::DKIM::AuthorDomainPolicy-&gt;fetch(
            Protocol =&gt; 'dns',
            Author =&gt; 'jsmith@example.org',
          );
</pre>
<p class="Pp">If the ADSP record is found and appears to be valid, an object
    containing that record's information will be constructed and returned. If
    the ADSP record is blank or simply does not exist, an object representing
    the default policy will be returned instead. (See also
    &quot;<b>is_implied_default_policy()</b>&quot;.) If a DNS error occurs (e.g.
    SERVFAIL or time-out), this method will &quot;die&quot;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBnew()_fP"><a class="permalink" href="#_fBnew()_fP"><b>new()</b></a></h2>
Construct a default policy object.
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $policy = Mail::DKIM::AuthorDomainPolicy-&gt;new;
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBparse()_fP"><a class="permalink" href="#_fBparse()_fP"><b>parse()</b></a></h2>
Construct an ADSP record from a string.
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $policy = Mail::DKIM::AuthorDomainPolicy-&gt;parse(
          String =&gt; 'dkim=all',
          Domain =&gt; 'aaa.example',
      );
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_fBapply()_fP"><a class="permalink" href="#_fBapply()_fP"><b>apply()</b></a></h2>
Apply the policy to the results of a DKIM verifier.
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $result = $policy-&gt;apply($dkim_verifier);
</pre>
<p class="Pp">The caller must provide an instance of Mail::DKIM::Verifier, one
    which has already been fed the message being verified.</p>
<p class="Pp">Possible results are:</p>
<dl class="Bl-tag">
  <dt>accept</dt>
  <dd>The message is approved by the sender signing policy.</dd>
  <dt>reject</dt>
  <dd>The message is rejected by the sender signing policy. It can be considered
      very suspicious.</dd>
  <dt>neutral</dt>
  <dd>The message is neither approved nor rejected by the sender signing policy.
      It can be considered somewhat suspicious.</dd>
</dl>
<p class="Pp">Note: in the future, these values may become:
   none - no ADSP record is published
   pass - a passing signature is present
   fail - ADSP record is &quot;all&quot; and no passing signature is found
   discard - ADSP record is &quot;discardable&quot; and no passing signature is
    found
   nxdomain - the DNS domain does not exist
   temperror - transient error occurred
   permerror - non-transient error occurred</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBis_implied_default_policy()_fP"><a class="permalink" href="#_fBis_implied_default_policy()_fP"><b>is_implied_default_policy()</b></a></h2>
Tells whether this policy implied.
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $is_implied = $policy-&gt;is_implied_default_policy;
</pre>
<p class="Pp">If you fetch the policy for a particular domain, but that domain
    does not have a policy published, then the &quot;default policy&quot; is in
    effect. Use this method to detect when that happens.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBlocation()_fP"><a class="permalink" href="#_fBlocation()_fP"><b>location()</b></a></h2>
Tells where the policy was fetched from.
<p class="Pp">If the policy is domain-wide, this will be domain where the policy
    was published.</p>
<p class="Pp">If the policy is user-specific, TBD.</p>
<p class="Pp">If nothing is published for the domain, and the default policy was
    returned instead, the location will be
    <span class="Li">&quot;undef&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBpolicy()_fP"><a class="permalink" href="#_fBpolicy()_fP"><b>policy()</b></a></h2>
Get or set the outbound signing policy (dkim=) tag.
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $sp = $policy-&gt;policy;
</pre>
<p class="Pp">Outbound signing policy for the entity. Possible values are:</p>
<dl class="Bl-tag">
  <dt>&quot;unknown&quot;</dt>
  <dd>The default. The entity may sign some or all email.</dd>
  <dt>&quot;all&quot;</dt>
  <dd>All mail from the domain is expected to be signed, using a valid Author
      signature, but the author does not suggest discarding mail without a valid
      signature.</dd>
  <dt>&quot;discardable&quot;</dt>
  <dd>All mail from the domain is expected to be signed, using a valid Author
      signature, and the author is so confident that non-signed mail claiming to
      be from this domain can be automatically discarded by the recipient's mail
      server.</dd>
  <dt>&quot;NXDOMAIN&quot;</dt>
  <dd>The domain is out of scope, i.e., the domain does not exist in the
    DNS.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_fBsignall()_fP"><a class="permalink" href="#_fBsignall()_fP"><b>signall()</b></a></h2>
True if policy is &quot;all&quot;.
</section>
<section class="Ss">
<h2 class="Ss" id="_fBsignall_discardable()_fP"><a class="permalink" href="#_fBsignall_discardable()_fP"><b>signall_discardable()</b></a></h2>
True if policy is &quot;strict&quot;.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Section 4.3 of the specification says to perform a query on the domain
      itself just to see if it exists. This class is not currently doing that,
      i.e. it might report NXDOMAIN because _adsp._domainkey.example.org is
      nonexistent, but it should not be treated the same as example.org being
      nonexistent.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Jason Long, &lt;jlong@messiah.edu&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
Copyright (C) 2006-2009 by Messiah College
<p class="Pp">This library is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself, either Perl version 5.8.6 or,
    at your option, any later version of Perl 5 you may have available.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-11-13</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
