<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>DBI::DBD::Metadata(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DBI::DBD::Metadata(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">DBI::DBD::Metadata(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
DBI::DBD::Metadata - Generate the code and data for some DBI metadata methods
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
The idea is to extract metadata information from a good quality ODBC driver and
  use it to generate code and data to use in your own DBI driver for the same
  database.
<p class="Pp">To generate code to support the get_info method:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  perl -MDBI::DBD::Metadata -e &quot;write_getinfo_pm('dbi:ODBC:dsn-name','user','pass','Driver')&quot;

  perl -MDBI::DBD::Metadata -e write_getinfo_pm dbi:ODBC:foo_db username password Driver
</pre>
<p class="Pp">To generate code to support the type_info method:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  perl -MDBI::DBD::Metadata -e &quot;write_typeinfo_pm('dbi:ODBC:dsn-name','user','pass','Driver')&quot;

  perl -MDBI::DBD::Metadata -e write_typeinfo_pm dbi:ODBC:dsn-name user pass Driver
</pre>
<p class="Pp">Where <span class="Li">&quot;dbi:ODBC:dsn-name&quot;</span> is the
    connection to use to extract the data, and
    <span class="Li">&quot;Driver&quot;</span> is the name of the driver you
    want the code generated for (the driver name gets embedded into the output
    in numerous places).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Generating_a_GetInfo_package_for_a_driver"><a class="permalink" href="#Generating_a_GetInfo_package_for_a_driver">Generating
  a GetInfo package for a driver</a></h1>
The <span class="Li">&quot;write_getinfo_pm&quot;</span> in the
  DBI::DBD::Metadata module generates a DBD::Driver::GetInfo package on standard
  output.
<p class="Pp">This method generates a DBD::Driver::GetInfo package from the data
    source you specified in the parameter list or in the environment variable
    DBI_DSN. DBD::Driver::GetInfo should help a DBD author implement the DBI
    <b>get_info()</b> method. Because you are just creating this package, it is
    very unlikely that DBD::Driver already provides a good implementation for
    <b>get_info()</b>. Thus you will probably connect via DBD::ODBC.</p>
<p class="Pp">Once you are sure that it is producing reasonably sane data, you
    should typically redirect the standard output to lib/DBD/Driver/GetInfo.pm,
    and then hand edit the result. Do not forget to update your Makefile.PL and
    MANIFEST to include this as an extra PM file that should be installed.</p>
<p class="Pp">If you connect via DBD::ODBC, you should use version 0.38 or
    greater;</p>
<p class="Pp">Please take a critical look at the data returned! ODBC drivers
    vary dramatically in their quality.</p>
<p class="Pp">The generator assumes that most values are static and places these
    values directly in the <span class="Li">%info</span> hash. A few examples
    show the use of CODE references and the implementation via subroutines. It
    is very likely that you will have to write additional subroutines for values
    depending on the session state or server version, e.g. SQL_DBMS_VER.</p>
<p class="Pp">A possible implementation of <b>DBD::Driver::db::get_info()</b>
    may look like:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  sub get_info {
    my($dbh, $info_type) = @_;
    require DBD::Driver::GetInfo;
    my $v = $DBD::Driver::GetInfo::info{int($info_type)};
    $v = $v-&gt;($dbh) if ref $v eq 'CODE';
    return $v;
  }
</pre>
<p class="Pp">Please replace Driver (or &quot;&lt;foo&gt;&quot;) with the name
    of your driver. Note that this stub function is generated for you by
    write_getinfo_pm function, but you must manually transfer the code to
    Driver.pm.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Generating_a_TypeInfo_package_for_a_driver"><a class="permalink" href="#Generating_a_TypeInfo_package_for_a_driver">Generating
  a TypeInfo package for a driver</a></h1>
The <span class="Li">&quot;write_typeinfo_pm&quot;</span> function in the
  DBI::DBD::Metadata module generates on standard output the data needed for a
  driver's type_info_all method. It also provides default implementations of the
  type_info_all method for inclusion in the driver's main implementation file.
<p class="Pp">The driver parameter is the name of the driver for which the
    methods will be generated; for the sake of examples, this will be
    &quot;Driver&quot;. Typically, the dsn parameter will be of the form
    &quot;dbi:ODBC:odbc_dsn&quot;, where the odbc_dsn is a DSN for one of the
    driver's databases. The user and pass parameters are the other optional
    connection parameters that will be provided to the DBI connect method.</p>
<p class="Pp">Once you are sure that it is producing reasonably sane data, you
    should typically redirect the standard output to lib/DBD/Driver/TypeInfo.pm,
    and then hand edit the result if necessary. Do not forget to update your
    Makefile.PL and MANIFEST to include this as an extra PM file that should be
    installed.</p>
<p class="Pp">Please take a critical look at the data returned! ODBC drivers
    vary dramatically in their quality.</p>
<p class="Pp">The generator assumes that all the values are static and places
    these values directly in the <span class="Li">%info</span> hash.</p>
<p class="Pp">A possible implementation of <b>DBD::Driver::type_info_all()</b>
    may look like:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  sub type_info_all {
    my ($dbh) = @_;
    require DBD::Driver::TypeInfo;
    return [ @$DBD::Driver::TypeInfo::type_info_all ];
  }
</pre>
<p class="Pp">Please replace Driver (or &quot;&lt;foo&gt;&quot;) with the name
    of your driver. Note that this stub function is generated for you by the
    write_typeinfo_pm function, but you must manually transfer the code to
    Driver.pm.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
Jonathan Leffler &lt;jleffler@us.ibm.com&gt; (previously
  &lt;jleffler@informix.com&gt;), Jochen Wiedmann &lt;joe@ispsoft.de&gt;,
  Steffen Goeldner &lt;sgoeldner@cpan.org&gt;, and Tim Bunce
  &lt;dbi-users@perl.org&gt;.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-05-26</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
