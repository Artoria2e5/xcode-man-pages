<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   t
   @(#)rmid.1 1.8 00/06/13 SMI;
   Copyright 2004 Sun Microsystems, Inc. All rights reserved.
   Copyright 2004 Sun Microsystems, Inc. Tous droits r\[u00E9]serv\[u00E9]s.
   -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>rmid(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">rmid(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">rmid(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
rmid - RMI activation system daemon
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>rmid</b> [ <i>options</i> ]
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>rmid</b> tool starts the activation system daemon. Before activatable
  objects can be either registered with the activation system or activated in a
  Java VM, the activation system daemon must be started. See the <i>RMI
  Specification</i> and <i>Activation Tutorials</i> for details on how to write
  programs that use activatable remote objects.
<p class="Pp">The daemon can be started by executing the <b>rmid</b> command,
    and specifying a security policy file, as follows:</p>
<p class="Pp"><b>example% rmid -J-Djava.security.policy=rmid.policy</b></p>
<p class="Pp">Note: When running Sun's implementation of <b>rmid</b>, by default
    you will need to specify a security policy file so that <b>rmid can verify
    whether or not the information in each</b> <b>ActivationGroupDesc</b> is
    allowed to be used to launch a JVM for an activation group. Specifically,
    the command and options specified by the <b>CommandEnvironment</b> and any
    <b>Properties</b> passed to an <b>ActivationGroupDesc</b>'s constructor must
    now be explicitly allowed in the security policy file for <b>rmid</b>. The
    value of the <b>sun.rmi.activation.execPolicy</b> property dictates the
    policy that <b>rmid</b> uses to determine whether or not the information in
    an <b>ActivationGroupDesc</b> may be used to launch a JVM for an activation
    group.</p>
<p class="Pp">Executing <b>rmid</b> by default</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>starts the Activator and an internal registry on the default port,
      <b>1098</b>, and</dd>
  <dt>&#x2022;</dt>
  <dd>binds an <b>ActivationSystem</b> to the name
      <b>java.rmi.activation.ActivationSystem</b> in this internal
    registry.</dd>
</dl>
</div>
<p class="Pp">To specify an alternate port for the registry, you must specify
    the <b>-port</b> option when starting up <b>rmid</b>. For example,</p>
<p class="Pp"><b>rmid -J-Djava.security.policy=rmid.policy -port 1099</b></p>
<p class="Pp">starts the activation system daemon and a registry on the
    registry's default port, <b>1099</b>.</p>
<section class="Ss">
<h2 class="Ss" id="Starting_rmid_from_inetd/xinetd"><a class="permalink" href="#Starting_rmid_from_inetd/xinetd">Starting
  rmid from inetd/xinetd</a></h2>
An alternative to starting rmid from the command line is to configure inetd
  (Solaris) or xinetd (Linux) to start rmid on demand.
<p class="Pp">When rmid starts up, it attempts to obtain an inherited channel
    (inherited from inetd/xinetd) by invoking the System.inheritedChannel
    method. If the inherited channel is null, then rmid was started from the
    command line, and it starts up as described above.</p>
<p class="Pp">If the inherited channel is not an instance of
    java.io.channels.ServerSocketChannel, rmid exits.</p>
<p class="Pp">If the inherited channel is a ServerSocketChannel instance, then
    rmid uses the java.net.ServerSocket obtained from the ServerSocketChannel as
    the server socket that accepts requests for the remote objects it exports,
    namely the registry in which the java.rmi.activation.ActivationSystem is
    bound and the java.rmi.activation.Activator remote object.</p>
<p class="Pp">The rmid tool, when started from inetd/xinetd, behaves the same as
    when it is started from the command line, except:</p>
<dl class="Bl-tag">
  <dt>&#x2022; Output printed to System.err is redirected</dt>
  <dd>to a file. This file is located in the directory specified by the
      java.io.tmpdir system property (typically /var/tmp or /tmp) with the
      prefix &quot;rmid-err&quot; and the suffix &quot;tmp&quot;.</dd>
  <dt>&#x2022; The -port option is disallowed. If this</dt>
  <dd>option is specified, rmid will exit with an error message.</dd>
  <dt>&#x2022; The -log option is required. If this option</dt>
  <dd>is not specified, rmid will exit with an error message.</dd>
</dl>
<p class="Pp">See the man pages for inetd (Solaris) or xinetd (Linux) for
    details on how to configure services to be started on demand.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt><b>-C</b><i>someCommandLineOption</i></dt>
  <dd>Specifies an option that is passed as a command-line argument to each
      child process (activation group) of <b>rmid</b> when that process is
      created. For example, you could pass a property to each Java virtual
      machine spawned by the activation system daemon:
    <p class="Pp"><b>rmid -C-Dsome.property=value</b></p>
    <p class="Pp">This ability to pass command-line arguments o child processes
        can be useful for debugging. For example, the following command:</p>
    <p class="Pp"><b>rmid -C-Djava.rmi.server.logCalls=true</b></p>
    <p class="Pp">will enable server-call logging in all child JVMs.</p>
  </dd>
  <dt><b>-J</b><i>someCommandLineOption</i></dt>
  <dd>Specifies an option that is passed to the java interpreter running
      <b>rmid</b>. For example, to specify that <b>rmid</b> use a policy file
      named <b>rmid.policy</b>, the <b>-J</b> option can be used to define the
      <b>java.security.policy</b> property on <b>rmid</b>'s command line. For
      example:
    <p class="Pp"><b>rmid -J-Djava.security.policy=rmid.policy</b></p>
  </dd>
  <dt><b>-J-Dsun.rmi.activation.execPolicy=</b><i>policy</i></dt>
  <dd>Specifies the policy that <b>rmid</b> employs to check commands and
      command-line options used to launch the JVM in which an activation group
      runs. Please note that this option exists only in Sun's implementation of
      the RMI activation daemon. If this property is not specified on the
      command line, the result is the same as if
      <b>-J-Dsun.rmi.activation.execPolicy=default</b> were specified. The
      possible values of <i>policy</i> can be <b>default</b>,
      <i>policyClassName</i>, or <b>none</b>:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>default (or if this property is <i>unspecified</i>) The default
      <b>execPolicy</b> allows <b>rmid</b> to execute commands with specific
      command-line options only if <b>rmid</b> has been granted permission to
      execute those commands and options in the security policy file that
      <b>rmid</b> uses. Only the default activation group implementation can be
      used with the <i>default</i> execution policy.
    <p class="Pp"><b>rmid</b> launches a JVM for an activation group using the
        information in the group's registered activation group descriptor, an
        <b>ActivationGroupDesc</b>. The group descriptor specifies an optional
        <b>ActivationGroupDesc.CommandEnvironment</b> which includes the
        <i>command</i> to execute to start the activation group as well as any
        command line <i>options</i> to be added to the command line. By default,
        <b>rmid</b> uses the <b>java</b> command found in <b>java.home</b>. The
        group descriptor also contains <i>properties</i> overrides that are
        added to the command line as options defined as:</p>
    <p class="Pp"><b>-D</b><i>property</i><b>=</b><i>value</i></p>
    <p class="Pp">The permission <b>com.sun.rmi.rmid.ExecPermission</b> is used
        to grant <b>rmid</b> permission to execute a command, specified in the
        group descriptor's <b>CommandEnvironment</b> to launch an activation
        group. The permission <b>com.sun.rmi.rmid.ExecOptionPermission</b> is
        used to allow <b>rmid</b> to use command-line options, specified as
        properties overrides in the group descriptor or as options in the
        <b>CommandEnvironment</b>, when launching the activation group.</p>
    <p class="Pp">When granting <b>rmid</b> permission to execute various
        commands and options, the permissions <b>ExecPermission</b> and
        <b>ExecOptionPermission</b> need to be granted universally (that is,
        granted to all code sources).</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>ExecPermission</b></dt>
  <dd>The <b>ExecPermission</b> class represents permission for <b>rmid</b> to
      execute a specific command to launch an activation group.
    <p class="Pp"><b>Syntax</b>
      <br/>
      The name of an <b>ExecPermission</b> is the path name of a command to
        grant <b>rmid</b> permission to execute. A path name that ends in
        &quot;/*&quot; indicates all the files contained in that directory
        (where &quot;/&quot; is the file-separator character,
        <b>File.separatorChar</b>). A path name that ends with &quot;/-&quot;
        indicates all files and subdirectories contained in that directory
        (recursively). A path name consisting of the special token
        &quot;&lt;&lt;ALL FILES&gt;&gt;&quot; matches <i>any</i> file.</p>
    <p class="Pp"><b>Note:</b> A path name consisting of a single &quot;*&quot;
        indicates all the files in the current directory, while a path name
        consisting of a single &quot;-&quot; indicates all the files in the
        current directory and (recursively) all files and subdirectories
        contained in the current directory.</p>
  </dd>
  <dt><b>ExecOptionPermission</b></dt>
  <dd>The <b>ExecOptionPermission</b> class represents permission for
      <b>rmid</b> to use a specific command-line option when launching an
      activation group. The name of an <b>ExecOptionPermission</b> is the value
      of a command line option.
    <p class="Pp"><b>Syntax</b>
      <br/>
      Options support a limited wildcard scheme. An asterisk signifies a
        wildcard match, and it may appear as the option name itself (that is, it
        matches any option), or an asterisk may appear at the end of the option
        name only if the asterisk follows either a &quot;.&quot; or
        &quot;=&quot;.</p>
    <p class="Pp">For example: &quot;*&quot; or &quot;-Dfoo.*&quot; or
        &quot;-Da.b.c=*&quot; is valid; &quot;*foo&quot; or &quot;-Da*b&quot; or
        &quot;ab*&quot; is not.</p>
  </dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt><b>Policy file for rmid</b></dt>
  <dd>When granting <b>rmid</b> permission to execute various commands and
      options, the permissions <b>ExecPermission</b> and
      <b>ExecOptionPermission</b> need to be granted universally (that is,
      granted to all code sources). It is safe to grant these permissions
      universally because only <b>rmid</b> checks these permissions.
    <p class="Pp">An example policy file that grants various execute permissions
        to <b>rmid</b> is:</p>
    <p class="Pp"><b></b></p>
    <pre>
grant {
    permission com.sun.rmi.rmid.ExecPermission
        &quot;/files/apps/java/jdk1.2.2/bin/java&quot;;
    permission com.sun.rmi.rmid.ExecPermission
        &quot;/files/apps/rmidcmds/*&quot;;
    permission com.sun.rmi.rmid.ExecOptionPermission
        &quot;-Djava.security.policy=/files/policies/group.policy&quot;;
    permission com.sun.rmi.rmid.ExecOptionPermission
        &quot;-Djava.security.debug=*&quot;;
    permission com.sun.rmi.rmid.ExecOptionPermission
        &quot;-Dsun.rmi.*&quot;;
};
    </pre>
    <p class="Pp">The first permission granted allow <b>rmid</b> to execute the
        1.2.2 version of the <b>java</b> command, specified by its explicit path
        names. Note that by default, the version of the <b>java</b> command
        found in <b>java.home</b> is used (the same one that <b>rmid</b> uses),
        and does not need to be specified in the policy file. The third
        permission allows <b>rmid</b> to execute any command in the directory
        <b>/files/apps/rmidcmds</b>.</p>
    <p class="Pp">The fourth permission granted, an <b>ExecOptionPermission</b>,
        allows <b>rmid</b> to launch an activation group that defines the
        security policy file to be <b>/files/policies/group.policy</b>. The next
        permission allows the <b>java.security.debug</b> property to be used by
        an activation group. The last permission allows any property in the
        <b>sun.rmi</b> property name hierarchy to be used by activation
      groups.</p>
    <p class="Pp">To start <b>rmid</b> with a policy file, the
        <b>java.security.policy</b> property needs to be specified on
        <b>rmid</b>'s command line. For example:</p>
    <p class="Pp"><b>rmid -J-Djava.security.policy=rmid.policy</b></p>
  </dd>
  <dt>&#x2022;</dt>
  <dd><i>policyClassName</i>
    <p class="Pp">If the default behavior is not flexible enough, an
        administrator can provide, when starting <b>rmid</b>, the name of a
        class whose <b>checkExecCommand</b> method is executed in order to check
        commands to be executed by <b>rmid</b>.</p>
    <p class="Pp">The <b>policyClassName</b> specifies a public class with a
        public, no-argument constructor and an implementation of the following
        <b>checkExecCommand</b> method:</p>
    <p class="Pp"><b></b></p>
    <pre>
<br/>

public void checkExecCommand(ActivationGroupDesc desc,
                                         String[] command)
                throws SecurityException;
<br/>

    </pre>
    <p class="Pp">Before launching an activation group, <b>rmid</b> calls the
        policy's <b>checkExecCommand</b> method, passing it the activation group
        descriptor and an array containing the complete command to launch the
        activation group. If the <b>checkExecCommand</b> throws a
        <b>SecurityException</b>, <b>rmid</b> will not launch the activation
        group and an <b>ActivationException</b> will be thrown to the caller
        attempting to activate the object.</p>
  </dd>
  <dt>&#x2022;</dt>
  <dd><b>none</b>
    <p class="Pp">If the <b>sun.rmi.activation.execPolicy</b> property value is
        &quot;none&quot;, then <b>rmid</b> will not perform any validation of
        commands to launch activation groups.</p>
  </dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt><b>-log</b><i> dir</i></dt>
  <dd>Specifies the name of the directory the activation system daemon uses to
      write its database and associated information. The log directory defaults
      to creating a directory, <b>log</b>, in the directory in which the
      <b>rmid</b> command was executed.</dd>
  <dt><b>-port</b><i> port</i></dt>
  <dd>Specifies the port <b>rmid</b>'s registry uses. The activation system
      daemon binds the <b>ActivationSystem</b>, with the name
      <b>java.rmi.activation.ActivationSystem</b>, in this registry. Thus, the
      <b>ActivationSystem</b> on the local machine can be obtained using the
      following <b>Naming.lookup</b> method call:</dd>
</dl>
<p class="Pp"></p>
<div class="Bd-indent"><b></b>
<pre>
import java.rmi.*;
import java.rmi.activation.*;
ActivationSystem system;
system = (ActivationSystem)
Naming.lookup(&quot;//:port/java.rmi.activation.ActivationSystem&quot;);
</pre>
</div>
<dl class="Bl-tag">
  <dt><b>-stop</b></dt>
  <dd>Stops the current invocation of <b>rmid</b>, for a port specified by the
      <b>-port</b> option. If no <i>port</i> is specified, it will stop the
      <b>rmid</b> running on port <b>1098</b>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT_VARIABLES"><a class="permalink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<dl class="Bl-tag">
  <dt><small><b>CLASSPATH</b></small></dt>
  <dd>Used to provide the system a path to user-defined classes. Directories are
      separated by colons. For example,</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"><b></b></p>
<pre>
example% .:/usr/local/java/classes
</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>rmic</b>(1)
<p class="Pp">See (or search <b>java.sun.com</b>) for the following:</p>
<dl class="Bl-tag">
  <dt><b>RMI Specification @</b></dt>
  <dd>http://java.sun.com/j2se/1.5/docs/guide/rmi/spec/rmiTOC.doc.html</dd>
</dl>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">10 March 2001</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
