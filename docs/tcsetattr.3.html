<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1991, 1993
  	The Regents of the University of California.  All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   3. All advertising materials mentioning features or use of this software
      must display the following acknowledgement:
  	This product includes software developed by the University of
  	California, Berkeley and its contributors.
   4. Neither the name of the University nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
  	@(#)tcsetattr.3	8.3 (Berkeley) 1/2/94
   $FreeBSD: src/lib/libc/gen/tcsetattr.3,v 1.9 2001/10/01 16:08:51 ru Exp $
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>TCSETATTR(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TCSETATTR(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">TCSETATTR(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">cfgetispeed</code>, <code class="Nm">cfgetospeed</code>,
  <code class="Nm">cfmakeraw</code>, <code class="Nm">cfsetispeed</code>,
  <code class="Nm">cfsetospeed</code>, <code class="Nm">cfsetspeed</code>,
  <code class="Nm">tcgetattr</code>, <code class="Nm">tcsetattr</code> &#x2014;
<div class="Nd">manipulating the termios structure</div>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<span class="Lb">Standard C&#x00A0;Library (libc, -lc)</span>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<code class="In">#include &lt;<a class="In">termios.h</a>&gt;</code>
<p class="Pp"><var class="Ft">speed_t</var>
  <br/>
  <code class="Fn">cfgetispeed</code>(<var class="Fa">const struct termios
    *termios_p</var>);</p>
<p class="Pp"><var class="Ft">speed_t</var>
  <br/>
  <code class="Fn">cfgetospeed</code>(<var class="Fa">const struct termios
    *termios_p</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">cfmakeraw</code>(<var class="Fa">struct termios
    *termios_p</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">cfsetispeed</code>(<var class="Fa">struct termios
    *termios_p</var>, <var class="Fa">speed_t speed</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">cfsetospeed</code>(<var class="Fa">struct termios
    *termios_p</var>, <var class="Fa">speed_t speed</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">cfsetspeed</code>(<var class="Fa">struct termios
    *termios_p</var>, <var class="Fa">speed_t speed</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tcgetattr</code>(<var class="Fa">int fildes</var>,
    <var class="Fa">struct termios *termios_p</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tcsetattr</code>(<var class="Fa">int fildes</var>,
    <var class="Fa">int optional_actions</var>, <var class="Fa">const struct
    termios *termios_p</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <code class="Fn">cfmakeraw</code>(), <code class="Fn">tcgetattr</code>(),
  and <code class="Fn">tcsetattr</code>() functions are provided for getting and
  setting the termios structure.
<p class="Pp">The <code class="Fn">cfgetispeed</code>(),
    <code class="Fn">cfsetispeed</code>(),
    <code class="Fn">cfgetospeed</code>(),
    <code class="Fn">cfsetospeed</code>(), and
    <code class="Fn">cfsetspeed</code>() functions are provided for getting and
    setting the baud rate values in the termios structure. As described below,
    the effects of the functions on the terminal do not become effective, nor
    are all errors detected, until the <code class="Fn">tcsetattr</code>()
    function is called. Certain values for baud rates, set in the termios
    structure and passed to <code class="Fn">tcsetattr</code>(), have special
    meanings. These are discussed in the portion of the manual page that
    describes the <code class="Fn">tcsetattr</code>() function.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="GETTING_AND_SETTING_THE_BAUD_RATE"><a class="permalink" href="#GETTING_AND_SETTING_THE_BAUD_RATE">GETTING
  AND SETTING THE BAUD RATE</a></h1>
The input and output baud rates are found in the termios structure. The unsigned
  integer <code class="Li">speed_t</code> is typedef'd in the include file
  &#x27E8;<span class="Pa">termios.h</span>&#x27E9;. The value of the integer
  corresponds directly to the baud rate being represented; however, the
  following symbolic values are defined:
<div class="Bd Pp">
<pre>
#define B0	0
#define B50	50
#define B75	75
#define B110	110
#define B134	134
#define B150	150
#define B200	200
#define B300	300
#define B600	600
#define B1200	1200
#define	B1800	1800
#define B2400	2400
#define B4800	4800
#define B9600	9600
#define B19200	19200
#define B38400	38400
#ifndef _POSIX_C_SOURCE
#define EXTA	19200
#define EXTB	38400
#endif  /*_POSIX_C_SOURCE */
</pre>
</div>
<p class="Pp">The <code class="Fn">cfgetispeed</code>() function returns the
    input baud rate in the termios structure referenced by
    <var class="Fa">termios_p</var>.</p>
<p class="Pp">The <code class="Fn">cfsetispeed</code>() function sets the input
    baud rate in the termios structure referenced by
    <var class="Fa">termios_p</var> to <var class="Fa">speed</var>.</p>
<p class="Pp">The <code class="Fn">cfgetospeed</code>() function returns the
    output baud rate in the termios structure referenced by
    <var class="Fa">termios_p</var>.</p>
<p class="Pp">The <code class="Fn">cfsetospeed</code>() function sets the output
    baud rate in the termios structure referenced by
    <var class="Fa">termios_p</var> to <var class="Fa">speed</var>.</p>
<p class="Pp">The <code class="Fn">cfsetspeed</code>() function sets both the
    input and output baud rate in the termios structure referenced by
    <var class="Fa">termios_p</var> to <var class="Fa">speed</var>.</p>
<p class="Pp">Upon successful completion, the functions
    <code class="Fn">cfsetispeed</code>(),
    <code class="Fn">cfsetospeed</code>(), and
    <code class="Fn">cfsetspeed</code>() return a value of 0. Otherwise, a value
    of -1 is returned and the global variable <var class="Va">errno</var> is set
    to indicate the error.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="GETTING_AND_SETTING_THE_TERMIOS_STATE"><a class="permalink" href="#GETTING_AND_SETTING_THE_TERMIOS_STATE">GETTING
  AND SETTING THE TERMIOS STATE</a></h1>
This section describes the functions that are used to control the general
  terminal interface. Unless otherwise noted for a specific command, these
  functions are restricted from use by background processes. Attempts to perform
  these operations shall cause the process group to be sent a SIGTTOU signal. If
  the calling process is blocking or ignoring SIGTTOU signals, the process is
  allowed to perform the operation and the SIGTTOU signal is not sent.
<p class="Pp">In all of the functions, although <var class="Fa">fildes</var> is
    an open file descriptor, the functions affect the underlying terminal file,
    not just the open file description that is associated with the particular
    file descriptor.</p>
<p class="Pp">The <code class="Fn">cfmakeraw</code>() function modifies the
    flags stored in the termios structure to a state disabling all input and
    output processing, giving a &#x201C;raw I/O path&#x201D;. It should be noted
    that there is no function to reverse this effect. Because a variety of
    processing options could be re-enabled, the correct method is for an
    application to snapshot the current terminal state using the function
    <code class="Fn">tcgetattr</code>(), setting raw mode with
    <code class="Fn">cfmakeraw</code>() and the subsequent
    <code class="Fn">tcsetattr</code>(), and then using another
    <code class="Fn">tcsetattr</code>() with the saved state to revert to the
    previous terminal state.</p>
<p class="Pp">The <code class="Fn">tcgetattr</code>() function copies the
    parameters associated with the terminal referenced by
    <var class="Fa">fildes</var> in the termios structure referenced by
    <var class="Fa">termios_p</var>. This function is allowed from a background
    process; however, the terminal attributes may be subsequently changed by a
    foreground process.</p>
<p class="Pp">The <code class="Fn">tcsetattr</code>() function sets the
    parameters associated with the terminal from the termios structure
    referenced by <var class="Fa">termios_p</var>. The
    <var class="Fa">optional_actions</var> field is created by
    <i class="Em">or</i>'ing the following values, as specified in the include
    file &#x27E8;<span class="Pa">termios.h</span>&#x27E9;.</p>
<dl class="Bl-tag">
  <dt><var class="Fa">TCSANOW</var></dt>
  <dd>The change occurs immediately.</dd>
  <dt><var class="Fa">TCSADRAIN</var></dt>
  <dd>The change occurs after all output written to <var class="Fa">fildes</var>
      has been transmitted to the terminal. This value of
      <var class="Fa">optional_actions</var> should be used when changing
      parameters that affect output.</dd>
  <dt><var class="Fa">TCSAFLUSH</var></dt>
  <dd>The change occurs after all output written to <var class="Fa">fildes</var>
      has been transmitted to the terminal. Additionally, any input that has
      been received but not read is discarded.</dd>
  <dt><var class="Fa">TCSASOFT</var></dt>
  <dd>If this value is <i class="Em">or</i>'ed into the
      <var class="Fa">optional_actions</var> value, the values of the
      <i class="Em">c_cflag</i>, <i class="Em">c_ispeed</i>, and
      <i class="Em">c_ospeed</i> fields are ignored.</dd>
</dl>
<p class="Pp">The 0 baud rate is used to terminate the connection. If 0 is
    specified as the output speed to the function
    <code class="Fn">tcsetattr</code>(), modem control will no longer be
    asserted on the terminal, disconnecting the terminal.</p>
<p class="Pp">If zero is specified as the input speed to the function
    <code class="Fn">tcsetattr</code>(), the input baud rate will be set to the
    same value as that specified by the output baud rate.</p>
<p class="Pp">If <code class="Fn">tcsetattr</code>() is unable to make any of
    the requested changes, it returns -1 and sets errno. Otherwise, it makes all
    of the requested changes it can. If the specified input and output baud
    rates differ and are a combination that is not supported, neither baud rate
    is changed.</p>
<p class="Pp">Upon successful completion, the functions
    <code class="Fn">tcgetattr</code>() and <code class="Fn">tcsetattr</code>()
    return a value of 0. Otherwise, they return -1 and the global variable
    <var class="Va">errno</var> is set to indicate the error, as follows:</p>
<dl class="Bl-tag">
  <dt>[<code class="Er">EBADF</code>]</dt>
  <dd>The <var class="Fa">fildes</var> argument to
      <code class="Fn">tcgetattr</code>() or <code class="Fn">tcsetattr</code>()
      was not a valid file descriptor.</dd>
  <dt>[<code class="Er">EINTR</code>]</dt>
  <dd>The <code class="Fn">tcsetattr</code>() function was interrupted by a
      signal.</dd>
  <dt>[<code class="Er">EINVAL</code>]</dt>
  <dd>The <var class="Fa">optional_actions</var> argument to the
      <code class="Fn">tcsetattr</code>() function was not valid, or an attempt
      was made to change an attribute represented in the termios structure to an
      unsupported value.</dd>
  <dt>[<code class="Er">ENOTTY</code>]</dt>
  <dd>The file associated with the <var class="Fa">fildes</var> argument to
      <code class="Fn">tcgetattr</code>() or <code class="Fn">tcsetattr</code>()
      is not a terminal.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">tcsendbreak(3)</a>, <a class="Xr">termios(4)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="STANDARDS"><a class="permalink" href="#STANDARDS">STANDARDS</a></h1>
The <code class="Fn">cfgetispeed</code>(),
  <code class="Fn">cfsetispeed</code>(), <code class="Fn">cfgetospeed</code>(),
  <code class="Fn">cfsetospeed</code>(), <code class="Fn">tcgetattr</code>(),
  and <code class="Fn">tcsetattr</code>() functions are expected to be compliant
  with the <span class="St">IEEE Std 1003.1-1988
  (&#x201C;POSIX.1&#x201D;)</span> specification. The
  <code class="Fn">cfmakeraw</code>() and <code class="Fn">cfsetspeed</code>()
  functions, as well as the <code class="Li">TCSASOFT</code> option to the
  <code class="Fn">tcsetattr</code>() function are extensions to the
  <span class="St">IEEE Std 1003.1-1988 (&#x201C;POSIX.1&#x201D;)</span>
  specification.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 2, 1994</td>
    <td class="foot-os">Mac OS X 11.0</td>
  </tr>
</table>
</body>
</html>
