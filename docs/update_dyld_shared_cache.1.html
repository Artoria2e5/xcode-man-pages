<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>update_dyld_shared_cache(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">update_dyld_shared_cache(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">update_dyld_shared_cache(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">update_dyld_shared_cache</code> &#x2014;
<div class="Nd">Updates dyld's shared cache</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">update_dyld_shared_cache</code></td>
    <td>[<code class="Fl">-root</code> <var class="Ar">directory</var>]
      [<code class="Fl">-overlay</code> <var class="Ar">directory</var>]
      [<code class="Fl">-arch</code> <var class="Ar">arch</var>]
      [<code class="Fl">-force</code>] [<code class="Fl">-debug</code>]
      [<code class="Fl">-universal_boot</code>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">update_dyld_shared_cache</code> ensures that dyld's shared
  cache is up-to-date. This tool is normally only run by Apple's Installer and
  Software Update, as they are the only official ways for OS dylibs to be
  updated. But if for some reason you used another mechanism to alter an OS
  dylib, you should manually run
  <code class="Nm">update_dyld_shared_cache</code>.
<p class="Pp">Note that the new cache does not take effect until the OS is
    rebooted.</p>
<p class="Pp">The dyld shared cache is mapped by dyld into a process at launch
    time. Later, when loading any mach-o image, dyld will first check if is in
    the share cache, and if it is will use that pre-bound version instead of
    opening, mapping, and binding the original file. This results in significant
    performance improvements to launch time.</p>
<p class="Pp"><code class="Nm">update_dyld_shared_cache</code> scans the
    directory /System/Library/Receipts/ for .bom files which list all files
    installed. From that info it creates the set of OS dylibs to build into the
    dyld cache.</p>
<p class="Pp"><code class="Nm">update_dyld_shared_cache</code> builds a separate
    cache file for each architecture. The cache files and a readable text map of
    the cached are generated to /var/db/dyld.</p>
<p class="Pp">You must be root to run this tool.</p>
<p class="Pp">The options are as follows:</p>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#root"><code class="Fl" id="root">-root</code></a>
    <var class="Ar">directory</var></dt>
  <dd>This option specifies the root of an OS installation for which dyld's
      shared cache should be updated. This is used by the Installer to update
      the dyld shared cache in a partition other than the one you into which you
      are currently booted. The cache files are created in the var/db/dyld
      directory of the specified directory. Note: if you are manually doing
      this, be sure to run the update_dyld_shared_cache tool that is in the
      partition being updated. This assures the cache format created will match
      that expected when booting off that partition.</dd>
  <dt><a class="permalink" href="#overlay"><code class="Fl" id="overlay">-overlay</code></a>
    <var class="Ar">directory</var></dt>
  <dd>This option specifies the root of a sparse directory tree. When building
      the dyld shared cache, any corresponding mach-o files in the sparse
      directory will override those in the boot partition. This is used by
      Software Update to build a dyld shared cache for the update that is about
      to be installed. The cache files are created in the var/db/dyld directory
      of the specified directory.</dd>
  <dt><a class="permalink" href="#arch"><code class="Fl" id="arch">-arch</code></a>
    <var class="Ar">arch</var></dt>
  <dd>By default <code class="Nm">update_dyld_shared_cache</code> generates
      cache files for all architecture that the current machine can execute. You
      can override this behavior by specifying one or more -arch options and
      list exactly which architectures should have their shared caches
    updated.</dd>
  <dt><a class="permalink" href="#force"><code class="Fl" id="force">-force</code></a></dt>
  <dd>This option will cause <code class="Nm">update_dyld_shared_cache</code> to
      regenerated the shared cache files even if they appear to be already
      up-to-date.</dd>
  <dt><a class="permalink" href="#debug"><code class="Fl" id="debug">-debug</code></a></dt>
  <dd>This option prints out additional information about the work being
    done.</dd>
  <dt><a class="permalink" href="#universal_boot"><code class="Fl" id="universal_boot">-universal_boot</code></a></dt>
  <dd>This option builds caches for all machines.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">dyld(1)</a>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 1, 2017</td>
    <td class="foot-os">Darwin</td>
  </tr>
</table>
</body>
</html>
