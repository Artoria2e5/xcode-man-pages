<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>asctl(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">asctl(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">asctl(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">asctl</code> &#x2014;
<div class="Nd">App Sandbox Control Tool</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">asctl</code></td>
    <td>[<code class="Fl">-p</code>] [<code class="Fl">-l</code>]
      <var class="Ar">command</var> [<var class="Ar">arguments</var>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">asctl</code> is a facility for manipulating the filesystem
  container for an applications using App Sandbox. A container is a
  per-application filesytem hierarchy rooted in
  <span class="Pa">~/Library/Containers.</span>
</section>
<section class="Sh">
<h1 class="Sh" id="GENERAL_COMMANDS"><a class="permalink" href="#GENERAL_COMMANDS">GENERAL
  COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt>help</dt>
  <dd>Prints a summary of commands and their behaviours.</dd>
  <dt>sandbox check &lt;app specification&gt;</dt>
  <dd>Determines with the given application is signed with App Sandbox
      entitlements. In addition, if the application is specified by pid using
      the --pid syntax, prints out whether the application is actually running
      with App Sandbox enabled, a traditional sandbox, or no sandbox at
    all.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CONTAINER_MANAGEMENT_COMMANDS"><a class="permalink" href="#CONTAINER_MANAGEMENT_COMMANDS">CONTAINER
  MANAGEMENT COMMANDS</a></h1>
The following commands manage filesystem containers for sandboxed apps.
<dl class="Bl-tag">
  <dt>container path &lt;app specification&gt;</dt>
  <dd>Print the path to the application's container.</dd>
  <dt>container create &lt;app specification&gt;</dt>
  <dd>Create and initialize the application's container. Containers are normally
      created automatically when sandboxed applications are run. This command
      creates the container for an application without running the
    application.</dd>
  <dt>container upgrade &lt;app specification&gt;</dt>
  <dd>Upgrade the application's container to the current container schema.
      Existing containers are normally automatically upgraded to the latest
      container schema when their associated applications are run. This command
      upgrades an existing container without running the associated
    application.</dd>
  <dt>container repair &lt;app specification&gt;</dt>
  <dd>Repair a container's structure by re-creating missing files and symlinks,
      repairing file permissions so that files are owned by and accessible to
      the current user, and rebuilding the application's sandbox information.
      This operation may require authorization by the user.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CONTAINER_ACL_MANAGEMENT_COMMANDS"><a class="permalink" href="#CONTAINER_ACL_MANAGEMENT_COMMANDS">CONTAINER
  ACL MANAGEMENT COMMANDS</a></h1>
Each container has an access control list comprised of code requirements. A
  sandboxed application must satify one or more of the code requirements on
  their container in order to run.
<p class="Pp">The following commands manipulate the container's access control
    list:</p>
<dl class="Bl-tag">
  <dt>container acl add &lt;app specification&gt;</dt>
  <dd>Update the access control list for the application's container to include
      the application's designated code requirement.</dd>
  <dt>container acl add &lt;app specification&gt; &lt;code requirement&gt;</dt>
  <dd>Update the access control list for the application's container to include
      the specified code requirement.</dd>
  <dt>container acl update &lt;app specification&gt;</dt>
  <dd>Update the access control list for the application's container such that
      it consists of only the application's designated code requirement. Any
      other code requirements will be removed from the ACL.</dd>
  <dt>container acl list &lt;app specification&gt;</dt>
  <dd>Print list of code requirements in the access control list for the given
      application's container.</dd>
  <dt>container acl validate &lt;app specification&gt;</dt>
  <dd>Validate the application against each of the code requirements in its
      container's access control list. Each code requirement in the ACL is
      labeled with one of the following:
    <dl class="Bl-tag">
      <dt>[FAIL]</dt>
      <dd>application does not validate against code requirement.</dd>
      <dt>[VALID]</dt>
      <dd>application validates against code requirement.</dd>
      <dt>[EXACT]</dt>
      <dd>application validates against code requirement and code requirement is
          the same as the application's designated code requirement.</dd>
    </dl>
  </dd>
  <dt>container acl verify &lt;app specification&gt;</dt>
  <dd>Synonym for acl validate.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SYMLINK_SUPPORT_COMMANDS"><a class="permalink" href="#SYMLINK_SUPPORT_COMMANDS">SYMLINK
  SUPPORT COMMANDS</a></h1>
App Sandbox will follow any symlinks in the paths to users' home directories. In
  addition, it has a whitelist of other locations where it will acknowledge and
  honor symbolic links. Any symlinks not in this whitelist will not be followed
  and, as a result, App Sandboxed applications will not have access to the paths
  that the symlinks refer to.
<p class="Pp">The following command displays the whitelist of paths where App
    Sandbox will acknowledge symlinks at:</p>
<dl class="Bl-tag">
  <dt>symlink list &lt;path ...&gt;</dt>
  <dd>Display the list of paths that App Sandbox searches for symlinks and, for
      any paths that are symlinks, display where the symlinks currently resolve
      to.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTIC_COMMAND"><a class="permalink" href="#DIAGNOSTIC_COMMAND">DIAGNOSTIC
  COMMAND</a></h1>
Collect diagnostic information related to Application Sandboxing and containers.
  The information is collected into a single file that can be sent to Apple to
  aid in diagnosing problems when an application runs inside of a sandbox.
  Should you choose to send the diagnostic information to Apple, then you must
  agree to this disclaimer:
<div class="Bd Pp">
<div class="Bf Sy">This diagnostic tool generates files that allow Apple to
  investigate issues with your computer and help Apple to improve its products.
  The generated files may contain some of your personal information, which may
  include, but not be limited to, the serial number or similar unique number for
  your device, your user name, your file names or your computer name. The
  information is used by Apple in accordance with its privacy policy
  (www.apple.com/privacy) and is not shared with any third party. By enabling
  this diagnostic tool and sending a copy of the generated files to Apple, you
  are consenting to Apple's use of the content of such files.</div>
</div>
<p class="Pp">Additional information concerning a specific application can be
    gathered via the app subcommand. This command must be run as 'root'.</p>
<p class="Pp">The following command collects diagnostic information:</p>
<dl class="Bl-tag">
  <dt>diagnose [--no-compress | --no-disclaimer | --no-reveal | --no-verbose]
    [app &lt;app specification&gt;]</dt>
  <dd>Collection diagnostic information. Outputs the path to the folder or file
      containing the information.
    <br/>
    Optional arguments:
    <dl class="Bl-tag">
      <dt>--no-compress</dt>
      <dd>Do not compress the folder containing the dianostic files into a Zip
          file.</dd>
      <dt>--no-disclaimer</dt>
      <dd>Do not show the disclaimer. Use of this option constitutes acceptance
          of the disclaimer.</dd>
      <dt>--no-reveal</dt>
      <dd>Do not reveal the resulting diagnostic file in Finder.</dd>
      <dt>--no-verbose</dt>
      <dd>Do not show verbose output while running the diagnostic.</dd>
    </dl>
    <p class="Pp">Optional subcommand:</p>
    <dl class="Bl-tag">
      <dt>app &lt;app specification&gt;</dt>
      <dd>Specify an application for which additional information will be
          gathered.</dd>
    </dl>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="GLOBAL_OPTIONS"><a class="permalink" href="#GLOBAL_OPTIONS">GLOBAL
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#p"><code class="Fl" id="p">-p</code></a></dt>
  <dd>By default, <code class="Nm">asctl</code> displays paths relative to the
      user's home directory. This flag causes any paths in the output to be
      displayed as absolute paths instead.</dd>
  <dt><a class="permalink" href="#l"><code class="Fl" id="l">-l</code></a></dt>
  <dd>Write internal logging information to a temporary file.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="APPLICATION_SPECIFIERS"><a class="permalink" href="#APPLICATION_SPECIFIERS">APPLICATION
  SPECIFIERS</a></h1>
Many commands require an application specification as one of their arguments.
  Applications can be specified any of the following ways:
<dl class="Bl-tag">
  <dt>&lt;name&gt;</dt>
  <dd>The application name as it appears in the Applications folder, with or
      without the .app extension. For example, &quot;TextEdit&quot;.</dd>
  <dt>&lt;path&gt;</dt>
  <dd>The path to the application binary or bundle. For example,
    <div class="Bd
      Bd-indent"><code class="Li">/System/Applications/TextEdit.app.</code></div>
  </dd>
  <dt>--file &lt;path&gt;</dt>
  <dd>Explicitly indicate the following argument is to be interpreted as the
      path to the application binary or bundle. The --file flag removes
      ambiguity when an argument can be interpreted as either an application
      name or a valid path to an application. For example,
    <div class="Bd Bd-indent"><code class="Li">--file
      /Applications/TextEdit.app.</code></div>
  </dd>
  <dt>--bundle &lt;bundle Id&gt;</dt>
  <dd>Interpret the following argument as the bunder identifier of the
      application. For example,
    <div class="Bd Bd-indent"><code class="Li">--bundle
      com.apple.TextEdit.</code></div>
  </dd>
  <dt>--pid &lt;process Id&gt;</dt>
  <dd>Interpret the following argument as the process identifier of a running
      application. For example,
    <div class="Bd Bd-indent"><code class="Li">--pid 1.</code></div>
  </dd>
  <dt>--container-path &lt;path to container&gt;</dt>
  <dd>Interpret the following argument as a path to an existing container and
      determine the application for that container . For example,
    <div class="Bd Bd-indent"><code class="Li">--container-path
      ~/Library/Containers/com.apple.TextEdit.</code></div>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt><span class="Pa">~/Library/Containers</span></dt>
  <dd>The user's containers folder.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">codesign(1)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
The <code class="Nm">asctl</code> command first appeared in Mac OS X Version
  10.7.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 20, 2014</td>
    <td class="foot-os">Darwin</td>
  </tr>
</table>
</body>
</html>
