<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
  	$NetBSD: rpcgen.1,v 1.8 1998/04/28 07:19:29 fair Exp $
   from: @(#)rpcgen.new.1	1.1 90/11/09 TIRPC 1.0; from 40.10 of 10/10/89
   Copyright (c) 1988,1990 Sun Microsystems, Inc. - All Rights Reserved.
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>RPCGEN(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">RPCGEN(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">RPCGEN(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">rpcgen</code> &#x2014;
<div class="Nd">Remote Procedure Call (RPC) protocol compiler</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">rpcgen</code></td>
    <td><var class="Ar">infile</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">rpcgen</code></td>
    <td>[<code class="Fl">-D</code> [<var class="Ar">name=value</var>]]
      [<code class="Fl">-A</code>] [<code class="Fl">-M</code>]
      [<code class="Fl">-T</code>] [<code class="Fl">-K</code>
      <var class="Ar">secs</var>] <var class="Ar">infile</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">rpcgen</code></td>
    <td>[<code class="Fl">-L</code>] <code class="Fl">-c</code> |
      <code class="Fl">-h</code> | <code class="Fl">-l</code> |
      <code class="Fl">-m</code> | <code class="Fl">-t</code> |
      <code class="Fl">-Sc</code> | <code class="Fl">-Ss</code> |
      [<code class="Fl">-o</code> <var class="Ar">outfile</var>]
      [<var class="Ar">infile</var>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">rpcgen</code></td>
    <td><code class="Fl">-c</code> | <var class="Ar">nettype</var>
      [<code class="Fl">-o</code> <var class="Ar">outfile</var>]
      [<var class="Ar">infile</var>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">rpcgen</code></td>
    <td><code class="Fl">-s</code> | <var class="Ar">netid</var>
      [<code class="Fl">-o</code> <var class="Ar">outfile</var>]
      [<var class="Ar">infile</var>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">rpcgen</code> is a tool that generates C code to implement an
  RPC protocol. The input to <code class="Nm">rpcgen</code> is a language
  similar to C known as RPC Language (Remote Procedure Call Language).
  <code class="Nm">rpcgen</code> is normally used as in the first synopsis where
  it takes an input file and generates up to four output files. If the
  <var class="Ar">infile</var> is named <span class="Pa">proto.x</span>, then
  <code class="Nm">rpcgen</code> will generate a header file in
  <span class="Pa">proto.h</span>, XDR routines in
  <span class="Pa">proto_xdr.c</span>, server-side stubs in
  <span class="Pa">proto_svc.c</span>, and client-side stubs in
  <span class="Pa">proto_clnt.c</span>. With the <code class="Fl">-T</code>
  option, it will also generate the RPC dispatch table in
  <span class="Pa">proto_tbl.i</span>. With the <code class="Fl">-Sc</code>
  option, it will also generate sample code which would illustrate how to use
  the remote procedures on the client side. This code would be created in
  <span class="Pa">proto_client.c</span>. With the <code class="Fl">-Ss</code>
  option, it will also generate a sample server code which would illustrate how
  to write the remote procedures. This code would be created in
  <span class="Pa">proto_server.c</span>.
<p class="Pp">The server created can be started both by the port monitors (for
    example, <i class="Em">inetd</i> or <i class="Em">listen</i>) or by itself.
    When it is started by a port monitor, it creates servers only for the
    transport for which the file descriptor 0 was passed. The name of the
    transport must be specified by setting up the environmental variable
    <code class="Ev">PM_TRANSPORT</code>. When the server generated by
    <code class="Nm">rpcgen</code> is executed, it creates server handles for
    all the transports specified in <code class="Ev">NETPATH</code> environment
    variable, or if it is unset, it creates server handles for all the visible
    transports from <span class="Pa">/etc/netconfig</span> file.</p>
<p class="Pp"><i class="Em">Note:</i> the transports are chosen at run time and
    not at compile time. When the server is self-started, it backgrounds itself
    by default. A special define symbol <code class="Dv">RPC_SVC_FG</code> can
    be used to run the server process in foreground. The second synopsis
    provides special features which allow for the creation of more sophisticated
    RPC servers. These features include support for user provided
    <code class="Li">#defines</code> and RPC dispatch tables. The entries in the
    RPC dispatch table contain:</p>
<p class="Pp"></p>
<dl class="Bl-inset Bd-indent Bl-compact">
  <dt>+</dt>
  <dd>pointers to the service routine corresponding to that procedure,</dd>
  <dt>+</dt>
  <dd>a pointer to the input and output arguments,</dd>
  <dt>+</dt>
  <dd>the size of these routines</dd>
</dl>
<p class="Pp">A server can use the dispatch table to check authorization and
    then to execute the service routine; a client library may use it to deal
    with the details of storage management and XDR data conversion.</p>
<p class="Pp">The other three synopses shown above are used when one does not
    want to generate all the output files, but only a particular one. Some
    examples of their usage is described in the EXAMPLE section below. When
    <code class="Nm">rpcgen</code> is executed with the
    <code class="Fl">-s</code> option, it creates servers for that particular
    class of transports. When executed with the <code class="Fl">-n</code>
    option, it creates a server for the transport specified by
    <i class="Em">netid</i>. If <var class="Ar">infile</var> is not specified,
    <code class="Nm">rpcgen</code> accepts the standard input.</p>
<p class="Pp">The C preprocessor, <a class="Xr">cpp(1)</a> is run on the input
    file before it is actually interpreted by <code class="Nm">rpcgen</code> For
    each type of output file, <code class="Nm">rpcgen</code> defines a special
    preprocessor symbol for use by the <code class="Nm">rpcgen</code>
    programmer:</p>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#RPC_HDR"><code class="Dv" id="RPC_HDR">RPC_HDR</code></a></dt>
  <dd>defined when compiling into header files</dd>
  <dt><a class="permalink" href="#RPC_XDR"><code class="Dv" id="RPC_XDR">RPC_XDR</code></a></dt>
  <dd>defined when compiling into XDR routines</dd>
  <dt><a class="permalink" href="#RPC_SVC"><code class="Dv" id="RPC_SVC">RPC_SVC</code></a></dt>
  <dd>defined when compiling into server-side stubs</dd>
  <dt><a class="permalink" href="#RPC_CLNT"><code class="Dv" id="RPC_CLNT">RPC_CLNT</code></a></dt>
  <dd>defined when compiling into client-side stubs</dd>
  <dt><a class="permalink" href="#RPC_TBL"><code class="Dv" id="RPC_TBL">RPC_TBL</code></a></dt>
  <dd>defined when compiling into RPC dispatch tables</dd>
</dl>
<p class="Pp">Any line beginning with &#x2018;%&#x2019; is passed directly into
    the output file, uninterpreted by <code class="Nm">rpcgen</code>.</p>
<p class="Pp">For every data type referred to in <var class="Ar">infile</var>
    <code class="Nm">rpcgen</code> assumes that there exists a routine with the
    string &#x201C;xdr_&#x201D; prepended to the name of the data type. If this
    routine does not exist in the RPC/XDR library, it must be provided.
    Providing an undefined data type allows customization of XDR routines.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#a"><code class="Fl" id="a">-a</code></a></dt>
  <dd>Generate all the files including sample code for client and server
    side.</dd>
  <dt><a class="permalink" href="#b"><code class="Fl" id="b">-b</code></a></dt>
  <dd>This generates code for the SunOS 4.1 style of RPC. This is the
    default.</dd>
  <dt><a class="permalink" href="#C"><code class="Fl" id="C">-C</code></a></dt>
  <dd>Generate code in ANSI C. This option also generates code that could be
      compiled with the C++ compiler.</dd>
  <dt><a class="permalink" href="#c"><code class="Fl" id="c">-c</code></a></dt>
  <dd>Compile into XDR routines.</dd>
  <dt><a class="permalink" href="#D"><code class="Fl" id="D">-D</code></a>
    <var class="Ar">name</var>[<var class="Ar">=value</var>]</dt>
  <dd>Define a symbol <code class="Dv">name</code>. Equivalent to the
      <code class="Dv">#define</code> directive in the source. If no
      <code class="Dv">value</code> is given, <code class="Dv">value</code> is
      defined as 1. This option may be specified more than once.</dd>
  <dt><a class="permalink" href="#h"><code class="Fl" id="h">-h</code></a></dt>
  <dd>Compile into C data-definitions (a header file). The
      <code class="Fl">-T</code> option can be used in conjunction to produce a
      header file which supports RPC dispatch tables.</dd>
  <dt><a class="permalink" href="#K"><code class="Fl" id="K">-K</code></a>
    <var class="Ar">secs</var></dt>
  <dd>By default, services created using <code class="Nm">rpcgen</code> wait 120
      seconds after servicing a request before exiting. That interval can be
      changed using the <code class="Fl">-K</code> flag. To create a server that
      exits immediately upon servicing a request,
      &#x201C;<code class="Fl">-K</code> <span class="No">0</span>&#x201D; can
      be used. To create a server that never exits, the appropriate argument is
      &#x201C;<code class="Fl">-K</code> <span class="No">-1</span>&#x201D;.
    <p class="Pp">When monitoring for a server, some port monitors, like the
        <span class="Ux">AT&amp;T System&#x00A0;V Release&#x00A0;4 UNIX</span>
        utility <a class="Xr">listen(1)</a>, <i class="Em">always</i> spawn a
        new process in response to a service request. If it is known that a
        server will be used with such a monitor, the server should exit
        immediately on completion. For such servers,
        <code class="Nm">rpcgen</code> should be used with
        &#x201C;<code class="Fl">-K</code>
      <span class="No">-1</span>&#x201D;.</p>
  </dd>
  <dt><a class="permalink" href="#L"><code class="Fl" id="L">-L</code></a></dt>
  <dd>Server errors will be sent to syslog instead of stderr.</dd>
  <dt><a class="permalink" href="#l"><code class="Fl" id="l">-l</code></a></dt>
  <dd>Compile into client-side stubs.</dd>
  <dt><a class="permalink" href="#m"><code class="Fl" id="m">-m</code></a></dt>
  <dd>Compile into server-side stubs, but do not generate a
      <code class="Fn">main</code>() routine. This option is useful for doing
      callback-routines and for users who need to write their own
      <code class="Fn">main</code>() routine to do initialization.</dd>
  <dt><a class="permalink" href="#N"><code class="Fl" id="N">-N</code></a></dt>
  <dd>Use the newstyle of <code class="Nm">rpcgen</code>. This allows procedures
      to have multiple arguments. It also uses the style of parameter passing
      that closely resembles C. So, when passing an argument to a remote
      procedure you do not have to pass a pointer to the argument but the
      argument itself. This behaviour is different from the oldstyle of
      <code class="Nm">rpcgen</code> generated code. The newstyle is not the
      default case because of backward compatibility.</dd>
  <dt><a class="permalink" href="#n"><code class="Fl" id="n">-n</code></a>
    <var class="Ar">netid</var></dt>
  <dd>Compile into server-side stubs for the transport specified by
      <var class="Ar">netid.</var> There should be an entry for
      <var class="Ar">netid</var> in the netconfig database. This option may be
      specified more than once, so as to compile a server that serves multiple
      transports.</dd>
  <dt><a class="permalink" href="#o"><code class="Fl" id="o">-o</code></a>
    <var class="Ar">outfile</var></dt>
  <dd>Specify the name of the output file. If none is specified, standard output
      is used (<code class="Fl">-c</code> <code class="Fl">-h</code>
      <code class="Fl">-l</code> <code class="Fl">-m</code>
      <code class="Fl">-n</code> <code class="Fl">-s</code> modes only)</dd>
  <dt><a class="permalink" href="#S_&amp;c"><code class="Fl" id="S_&amp;c">-Sc</code></a></dt>
  <dd>Generate sample code to show the use of remote procedure and how to bind
      to the server before calling the client side stubs generated by
      <code class="Nm">rpcgen</code>.</dd>
  <dt><a class="permalink" href="#S_&amp;s"><code class="Fl" id="S_&amp;s">-Ss</code></a></dt>
  <dd>Generate skeleton code for the remote procedures on the server side. You
      would need to fill in the actual code for the remote procedures.</dd>
  <dt><a class="permalink" href="#s"><code class="Fl" id="s">-s</code></a>
    <var class="Ar">nettype</var></dt>
  <dd>Compile into server-side stubs for all the transports belonging to the
      class <var class="Ar">nettype</var>. The supported classes are
      <i class="Em">netpath,</i> <i class="Em">visible,</i>
      <i class="Em">circuit_n,</i> <i class="Em">circuit_v,</i>
      <i class="Em">datagram_n,</i> <i class="Em">datagram_v,</i>
      <i class="Em">tcp,</i> and <i class="Em">udp</i> [see
      <a class="Xr">rpc(3)</a> for the meanings associated with these classes.
      <i class="Em">Note:</i> <span class="Ux">BSD</span> currently supports
      only the <i class="Em">tcp</i> and <i class="Em">udp</i> classes]. This
      option may be specified more than once. <i class="Em">Note:</i> the
      transports are chosen at run time and not at compile time.</dd>
  <dt><a class="permalink" href="#T"><code class="Fl" id="T">-T</code></a></dt>
  <dd>Generate the code to support RPC dispatch tables.</dd>
  <dt><a class="permalink" href="#t"><code class="Fl" id="t">-t</code></a></dt>
  <dd>Compile into RPC dispatch table.</dd>
</dl>
<p class="Pp">The options <code class="Fl">-c</code>,
    <code class="Fl">-h</code>, <code class="Fl">-l</code>,
    <code class="Fl">-m</code>, <code class="Fl">-s</code>, and
    <code class="Fl">-t</code> are used exclusively to generate a particular
    type of file, while the options <code class="Fl">-D</code> and
    <code class="Fl">-T</code> are global and can be used with the other
    options.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
The RPC Language does not support nesting of structures. As a work-around,
  structures can be declared at the top-level, and their name used inside other
  structures in order to achieve the same effect.
<p class="Pp">Name clashes can occur when using program definitions, since the
    apparent scoping does not really apply. Most of these can be avoided by
    giving unique names for programs, versions, procedures and types.</p>
<p class="Pp">The server code generated with <code class="Fl">-n</code> option
    refers to the transport indicated by <i class="Em">netid</i> and hence is
    very site specific.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLE"><a class="permalink" href="#EXAMPLE">EXAMPLE</a></h1>
The command
<div class="Bd Pp Bd-indent">
<pre>
$ rpcgen -T prot.x
</pre>
</div>
<p class="Pp">generates the five files: <span class="Pa">prot.h</span>,
    <span class="Pa">prot_clnt.c</span>, <span class="Pa">prot_svc.c</span>,
    <span class="Pa">prot_xdr.c</span> and
  <span class="Pa">prot_tbl.i</span>.</p>
<p class="Pp">The following example sends the C data-definitions (header file)
    to standard output.</p>
<div class="Bd Pp Bd-indent">
<pre>
$ rpcgen -h prot.x
</pre>
</div>
<p class="Pp">To send the test version of the <code class="Dv">-DTEST</code>,
    server side stubs for all the transport belonging to the class
    <i class="Em">datagram_n</i> to standard output, use:</p>
<div class="Bd Pp Bd-indent">
<pre>
$ rpcgen -s datagram_n -DTEST prot.x
</pre>
</div>
<p class="Pp">To create the server side stubs for the transport indicated by
    <i class="Em">netid</i> <i class="Em">tcp</i>, use:</p>
<div class="Bd Pp Bd-indent">
<pre>
$ rpcgen -n tcp -o prot_svc.c prot.x
</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">cpp(1)</a>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 11, 1995</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
