<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>AA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">AA(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">AA(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
aa - Manipulate Apple Archives
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>aa <b>command</b> [<b>options</b>]</b>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>aa creates and manipulates Apple Archives</b>
</section>
<section class="Sh">
<h1 class="Sh" id="VERBS"><a class="permalink" href="#VERBS">VERBS</a></h1>
<b>archive</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Archive
  the contents of the target directory
<p class="Pp"><b>extract</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Extract
    the contents of an archive to the target directory</p>
<p class="Pp"><b>list</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;List
    the contents of an archive</p>
<p class="Pp"><b>convert</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Convert
    an archive into another archive</p>
<p class="Pp"><b>manifest</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Alias
    for 'archive -manifest'</p>
<p class="Pp"><b>verify</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Compare
    the contents of the target directory with a manifest</p>
<p class="Pp"><b>check-and-fix</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Verify
    and fix the contents of the target directory using an error correcting
    manifest</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt><b>-v</b></dt>
  <dd>Increase verbosity. Default is silent operation.</dd>
  <dt><b>-h</b></dt>
  <dd>Print usage and exit.</dd>
  <dt><b>-d&#x00A0;<i>dir</i></b></dt>
  <dd>Target directory for archive/extract. Default is the current
    directory.</dd>
  <dt><b>-i&#x00A0;<i>input_file</i></b></dt>
  <dd>Input file. Default is <i>stdin</i>.</dd>
  <dt><b>-o&#x00A0;<i>output_file</i></b></dt>
  <dd>Output file. Default is <i>stdout</i>.</dd>
  <dt><b>-subdir&#x00A0;<i>subdir</i></b></dt>
  <dd>Path to archive under <i>dir</i>. <i>subdir</i> will be included in the
      archived paths, and extracted. Default is empty.</dd>
  <dt><b>-D&#x00A0;<i>dir_and_subdir</i></b></dt>
  <dd>Set both <i>dir</i> to `dirname <i>dir_and_subdir</i>` and <i>subdir</i>
      to `basename <i>dir_and_subdir</i>`.</dd>
  <dt><b>-a&#x00A0;<i>algorithm</i></b></dt>
  <dd>Compression algorithm used when creating archives. One of <i>lzfse</i>,
      <i>lzma</i>, <i>lz4</i>, <i>zlib</i>, <i>raw</i>. Default is
    <i>lzfse</i>.</dd>
  <dt><b>-b&#x00A0;<i>block_size</i></b></dt>
  <dd>Block size used when compressing archives, a number with optional
      <i>b</i>, <i>k</i>, <i>m</i>, <i>g</i> suffix (bytes are assumed if no
      suffix is specified). Default is <i>4m</i> for <i>archive</i> and
      <i>1m</i> for the other commands.</dd>
  <dt><b>-t&#x00A0;<i>worker_threads</i></b></dt>
  <dd>Number of worker threads compressing/decompressing data. Default is the
      number of physical CPU on the running machine.</dd>
  <dt><b>-wt&#x00A0;<i>writer_threads</i></b></dt>
  <dd>Number of writer threads extracting archive content. Default is to match
      <i>worker_threads</i>.</dd>
  <dt><b>-enable-dedup&#x00A0;(-no-enable-dedup)</b></dt>
  <dd>If set, and SLC fields are present in the archive, files with same data
      will be extracted as clones</dd>
  <dt><b>-enable-holes&#x00A0;(-no-enable-holes)</b></dt>
  <dd>If set, and the filesystem supports it, detect and create holes in files
      to store 0-filled segments</dd>
  <dt><b>-ignore-eperm&#x00A0;(-no-ignore-eperm)</b></dt>
  <dd>If set, ignore EPERM (operation not permitted) errors when setting files
      attributes</dd>
  <dt><b>-manifest</b></dt>
  <dd>Alias for the following options:
    <br/>
    <b>-exclude-field</b> <i>dat</i>
    <br/>
    <b>-include-field</b> <i>sh1,cks,siz</i>
    <br/>
    <b>-a</b> <i>lzfse</i> <b>-b</b> <i>1m</i></dd>
  <dt><b>-include-path&#x00A0;<i>path</i></b></dt>
  <dd>Include entry paths exactly matching <i>path</i>. This option can be given
      multiple times.</dd>
  <dt><b>-exclude-path&#x00A0;<i>path</i></b></dt>
  <dd>Exclude entry paths excatly matching <i>path</i>. This option can be given
      multiple times.</dd>
  <dt><b>-include-path-list&#x00A0;<i>path_list_file</i></b></dt>
  <dd>File containing a list of paths to include, one entry per line. This
      option can be given multiple times.</dd>
  <dt><b>-exclude-path-list&#x00A0;<i>path_list_file</i></b></dt>
  <dd>File containing a list of paths to exclude, one entry per line. This
      option can be given multiple times.</dd>
  <dt><b>-include-regex&#x00A0;<i>expr</i></b></dt>
  <dd>Include entry paths matching regular expression <i>expr</i>, see
      <i>re_format(7)</i>. This option can be given multiple times.</dd>
  <dt><b>-exclude-regex&#x00A0;<i>expr</i></b></dt>
  <dd>Exclude entry paths matching regular expression <i>expr</i>, see
      <i>re_format(7)</i>. This option can be given multiple times.</dd>
  <dt><b>-exclude-name&#x00A0;<i>name</i></b></dt>
  <dd>Exclude entry paths where a single component of the path matches exactly
      <i>name</i>. This option can be given multiple times.</dd>
  <dt><b>-include-type&#x00A0;<i>&lt;type_spec&gt;</i></b></dt>
  <dd>Include only entries matching the given types. <i>&lt;type_spec&gt;</i> is
      a word containing one or more of the entry type characters listed
    below.</dd>
  <dt><b>-exclude-type&#x00A0;<i>&lt;type_spec&gt;</i></b></dt>
  <dd>Include only entries not matching the given types.
      <i>&lt;type_spec&gt;</i> is a word containing one or more of the entry
      type characters listed below.</dd>
  <dt><b>-include-field&#x00A0;<i>&lt;field_spec&gt;</i></b></dt>
  <dd>Add the given fields to the set of field keys. This option can be given
      multiple times. <i>&lt;field_spec&gt;</i> is a comma separated list of
      entry field keys listed below.</dd>
  <dt><b>-exclude-field&#x00A0;<i>&lt;field_spec&gt;</i></b></dt>
  <dd>Remove the given fields from the set of field keys. This option can be
      given multiple times. <i>&lt;field_spec&gt;</i> is a comma separated list
      of entry field keys listed below.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ENTRY_TYPES"><a class="permalink" href="#ENTRY_TYPES">ENTRY
  TYPES</a></h1>
<b>b</b> block special
<br/>
<b>c</b> character special
<br/>
<b>d</b> directory
<br/>
<b>f</b> regular file
<br/>
<b>l</b> symbolic link
<br/>
<b>m</b> metadata
<br/>
<b>p</b> fifo
<br/>
<b>s</b> socket
</section>
<section class="Sh">
<h1 class="Sh" id="ENTRY_FIELDS"><a class="permalink" href="#ENTRY_FIELDS">ENTRY
  FIELDS</a></h1>
<b>typ</b> entry type
<br/>
<b>pat</b> path
<br/>
<b>lnk</b> link path
<br/>
<b>dev</b> device id
<br/>
<b>uid</b> user id
<br/>
<b>gid</b> group id
<br/>
<b>mod</b> access permissions
<br/>
<b>flg</b> flags
<br/>
<b>mtm</b> modification time
<br/>
<b>ctm</b> creation time
<br/>
<b>btm</b> backup time
<br/>
<b>xat</b> extended attributes
<br/>
<b>acl</b> access control list
<br/>
<b>cks</b> CRC32 checksum
<br/>
<b>sh1</b> SHA1 digest
<br/>
<b>sh2</b> SHA2 digest
<br/>
<b>dat</b> file contents
<br/>
<b>siz</b> file size
<br/>
<b>duz</b> disk usage
<br/>
<b>idx</b> entry index in main archive
<br/>
<b>yec</b> file data error correcting codes
<br/>
<b>yaf</b> Apple Archive fields (in metadata entry)
<br/>
<b>all</b> alias for all fields (exclude only)
<br/>
<b>attr</b> alias for <i>uid,gid,mod,flg,mtm,btm,ctm</i>
</section>
<section class="Sh">
<h1 class="Sh" id="ENTRY_SELECTION"><a class="permalink" href="#ENTRY_SELECTION">ENTRY
  SELECTION</a></h1>
<b>-include-path</b> and <b>-include-path-list</b> options are applied first to
  select an initial set of entries, then <b>-exclude-path</b>,
  <b>-exclude-path-list</b>, <b>-exclude-name</b>, <b>-exclude-regex</b> are
  applied to remove entries from this set. If no <b>-include-path</b> or
  <b>-include-path-list</b> option is given, all entries are included in the
  initial set. If a directory is included/excluded, the entire sub-tree is
  included/excluded.
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
Archive the contents of directory <i>foo</i> into archive <i>foo.aar</i>, using
  LZMA compression with 8 MB blocks
<p class="Pp"></p>
<div class="Bd-indent"><b>aa archive -d foo -o foo.aar -a lzma -b 8m</b></div>
<p class="Pp">Extract the contents of <i>foo.aar</i> in directory <i>dst</i></p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aa extract -d dst -i foo.aar</b></div>
<p class="Pp">Create a manifest of the contents of directory <i>foo</i> into
    <i>foo.manifest</i>, using LZFSE compression with 1 MB blocks</p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aa manifest -d foo -o foo.manifest -a lzfse -b
  1m</b></div>
<p class="Pp">Verify the contents of <i>dst</i> match the manifest
    <i>foo.manifest</i></p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aa verify -i foo.manifest -d dst -v</b></div>
<p class="Pp">Print all entry paths in <i>foo.manifest</i></p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aa list -i foo.manifest</b></div>
<p class="Pp">Print all entry paths, uid, gid for regular files in
    <i>foo.manifest</i></p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aa list -v -i foo.manifest -include-type f
  -exclude-field all -include-field uid,gid,pat</b></div>
<p class="Pp">Create a manifest of the contents of archive <i>foo.aar</i> in
    <i>foo.manifest</i></p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aa convert -manifest -v -i foo.aar -o
  foo.manifest</b></div>
<p class="Pp">Extract a subset of entries matching prefix
    <i>Applications/Mail.app</i> from archive <i>foo.aar</i> in directory
    <i>dst</i></p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aa extract -i foo.aar -include-path
  Applications/Mail.app -d dst</b></div>
<p class="Pp"></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
