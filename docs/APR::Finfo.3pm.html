<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.10 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Finfo(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Finfo(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Finfo(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
APR::Finfo - Perl API for APR fileinfo structure
</section>
<section class="Sh">
<h1 class="Sh" id="Synopsis"><a class="permalink" href="#Synopsis">Synopsis</a></h1>
<span class="Li"></span>
<pre>
  use APR::Finfo ();
  use APR::Const -compile =&gt; qw(FINFO_NORM);
  my $finfo = APR::Finfo::stat(&quot;/tmp/test&quot;, APR::Const::FINFO_NORM, $pool);
  
  $device = $finfo-&gt;device;     # (stat $file)[0]
  $inode  = $finfo-&gt;inode;      # (stat $file)[1]
  # stat returns an octal number while protection is hex
  $prot   = $finfo-&gt;protection; # (stat $file)[2]
  $nlink  = $finfo-&gt;nlink;      # (stat $file)[3]
  $gid    = $finfo-&gt;group;      # (stat $file)[4]
  $uid    = $finfo-&gt;user;       # (stat $file)[5]
  $size   = $finfo-&gt;size;       # (stat $file)[7]
  $atime  = $finfo-&gt;atime;      # (stat $file)[8]
  $mtime  = $finfo-&gt;mtime;      # (stat $file)[9]
  $ctime  = $finfo-&gt;ctime;      # (stat $file)[10]
  
  $csize = $finfo-&gt;csize; # consumed size: not portable!
  
  $filetype = $finfo-&gt;filetype; # file/dir/socket/etc
  
  $fname = $finfo-&gt;fname;
  $name  = $finfo-&gt;name;  # in filesystem case:
  
  # valid fields that can be queried
  $valid = $finfo-&gt;valid;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="Description"><a class="permalink" href="#Description">Description</a></h1>
APR fileinfo structure provides somewhat similar information to Perl's
  <span class="Li">&quot;stat()&quot;</span> call, but you will want to use this
  module's API to query an already <span class="Li">&quot;stat()'ed&quot;</span>
  filehandle to avoid an extra system call or to query attributes specific to
  APR file handles.
<p class="Pp">During the HTTP request handlers coming after
    <span class="Li">&quot;PerlMapToStorageHandler&quot;</span>,
    <span class="Li">&quot;$r-&gt;finfo&quot;</span> already contains the cached
    values from the apr's <span class="Li">&quot;stat()&quot;</span> call. So
    you don't want to perform it again, but instead get the
    <span class="Li">&quot;ARP::Finfo&quot;</span> object via:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $finfo = $r-&gt;finfo;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="API"><a class="permalink" href="#API">API</a></h1>
<span class="Li">&quot;APR::Finfo&quot;</span> provides the following functions
  and/or methods:
<section class="Ss">
<h2 class="Ss" id="_atime_"><a class="permalink" href="#_atime_">&quot;atime&quot;</a></h2>
Get the time the file was last accessed:
<p class="Pp"><span class="Li"></span></p>
<pre>
  $atime = $finfo-&gt;atime;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $atime ( integer )</dt>
  <dd>Last access time in seconds since the epoch</dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[8]
</pre>
<p class="Pp">Note that this method may not be reliable on all platforms, most
    notably Win32 -- FAT32 filesystems appear to work properly, but NTFS
    filesystems do not.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_csize_"><a class="permalink" href="#_csize_">&quot;csize&quot;</a></h2>
Get the storage size consumed by the file
<p class="Pp"><span class="Li"></span></p>
<pre>
  $csize = $finfo-&gt;csize;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $csize ( integer )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">Chances are that you don't want to use this method, since its
    functionality is not supported on most platforms (in which case it always
    returns 0).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_ctime_"><a class="permalink" href="#_ctime_">&quot;ctime&quot;</a></h2>
Get the time the file was last changed
<p class="Pp"><span class="Li"></span></p>
<pre>
  $ctime = $finfo-&gt;ctime;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $ctime ( integer )</dt>
  <dd>Inode change time in seconds since the epoch</dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[10]
</pre>
<p class="Pp">The ctime field is non-portable. In particular, you cannot expect
    it to be a &quot;creation time&quot;, see &quot;Files and Filesystems&quot;
    in the <i>perlport</i> manpage for details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_device_"><a class="permalink" href="#_device_">&quot;device&quot;</a></h2>
Get the id of the device the file is on.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $device = $finfo-&gt;device;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $device ( integer )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[0]
</pre>
<p class="Pp">Note that this method is non-portable. It doesn't work on all
    platforms, most notably Win32.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_filetype_"><a class="permalink" href="#_filetype_">&quot;filetype&quot;</a></h2>
Get the type of file.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $filetype = $finfo-&gt;filetype;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $filetype ( &quot;:filetype constant&quot; )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use APR::Pool;
  use APR::Finfo;
  use APR::Const -compile =&gt; qw(FILETYPE_DIR FILETYPE_REG FINFO_NORM);
  my $pool  = APR::Pool-&gt;new();
  my $finfo = APR::Finfo::stat(&quot;/tmp&quot;, APR::Const::FINFO_NORM, $pool);
  my $finfo = $finfo-&gt;filetype;
  if ($finfo == APR::Const::FILETYPE_REG) {
      print &quot;regular file&quot;;
  }
  elsif ($finfo == APR::Const::FILETYPE_REG) {
      print &quot;directory&quot;;
  }
  else {
      print &quot;other file&quot;;
  }
</pre>
<p class="Pp">Since <i>/tmp</i> is a directory, this will print:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  directory
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_fname_"><a class="permalink" href="#_fname_">&quot;fname&quot;</a></h2>
Get the pathname of the file (possibly unrooted)
<p class="Pp"><span class="Li"></span></p>
<pre>
  $fname = $finfo-&gt;fname;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $filetype ( string )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_group_"><a class="permalink" href="#_group_">&quot;group&quot;</a></h2>
Get the group id that owns the file:
<p class="Pp"><span class="Li"></span></p>
<pre>
  $gid = $finfo-&gt;group;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $gid ( number )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[5]
</pre>
<p class="Pp">Note that this method may not be meaningful on all platforms, most
    notably Win32. Incorrect results have also been reported on some versions of
    OSX.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_inode_"><a class="permalink" href="#_inode_">&quot;inode&quot;</a></h2>
Get the inode of the file.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $inode = $finfo-&gt;inode;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $inode ( integer )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[1]
</pre>
<p class="Pp">Note that this method may not be meaningful on all platforms, most
    notably Win32.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_mtime_"><a class="permalink" href="#_mtime_">&quot;mtime&quot;</a></h2>
The time the file was last modified
<p class="Pp"><span class="Li"></span></p>
<pre>
  $mtime = $finfo-&gt;mtime;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $mtime ( integer )</dt>
  <dd>Last modify time in seconds since the epoch</dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[9]
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_name_"><a class="permalink" href="#_name_">&quot;name&quot;</a></h2>
Get the file's name (no path) in filesystem case:
<p class="Pp"><span class="Li"></span></p>
<pre>
  $name = $finfo-&gt;name;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $device ( string )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_nlink_"><a class="permalink" href="#_nlink_">&quot;nlink&quot;</a></h2>
Get the number of hard links to the file.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $nlink = $finfo-&gt;nlink;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $nlink ( integer )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[3]
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_protection_"><a class="permalink" href="#_protection_">&quot;protection&quot;</a></h2>
Get the access permissions of the file. Mimics Unix access rights.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $prot = $finfo-&gt;protection;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $prot ( &quot;:fprot constant&quot; )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[2]
</pre>
<p class="Pp">Note: Perl's stat returns an octal number while mod_perl's
    <span class="Li">&quot;protection&quot;</span> returns a hex number.</p>
<p class="Pp">See perldoc -f stat and APR's file_io for more information on
    each.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_size_"><a class="permalink" href="#_size_">&quot;size&quot;</a></h2>
Get the size of the file
<p class="Pp"><span class="Li"></span></p>
<pre>
  $size = $finfo-&gt;size;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $size ( integer )</dt>
  <dd>Total size of file, in bytes</dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[7]
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_stat_"><a class="permalink" href="#_stat_">&quot;stat&quot;</a></h2>
Get the specified file's stats.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $finfo = APR::Finfo::stat($fname, $wanted_fields, $p);
</pre>
<dl class="Bl-tag">
  <dt>arg1: $fname ( string )</dt>
  <dd>The path to the file to <span class="Li">&quot;stat()&quot;</span>.</dd>
  <dt>arg2: $wanted_fields ( &quot;:finfo constant&quot; )</dt>
  <dd>The desired fields, as a bitmask flag of
      <span class="Li">&quot;APR::FINFO_*&quot;</span> constants.
    <p class="Pp">Notice that you can also use the constants that already
        combine several elements in one. For example
        <span class="Li">&quot;APR::Const::FINFO_PROT&quot;</span> asks for all
        protection bits,
        <span class="Li">&quot;APR::Const::FINFO_MIN&quot;</span> asks for the
        following fields: type, mtime, ctime, atime, size and
        <span class="Li">&quot;APR::Const::FINFO_NORM&quot;</span> asks for all
        atomic unix <span class="Li">&quot;apr_stat()&quot;</span> fields
        (similar to perl's <span class="Li">&quot;stat()&quot;</span>).</p>
  </dd>
  <dt>arg3: $p ( &quot;APR::Pool object&quot; )</dt>
  <dd>the pool to use to allocate the file stat structure.</dd>
  <dt>ret: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">For example, here is how to get most of the
    <span class="Li">&quot;stat&quot;</span> fields:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use APR::Pool ();
  use APR::Finfo ();
  use APR::Const -compile =&gt; qw(FINFO_NORM);
  my $pool = APR::Pool-&gt;new();
  my $finfo = APR::Finfo::stat(&quot;/tmp/test&quot;, APR::Const::FINFO_NORM, $pool);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_user_"><a class="permalink" href="#_user_">&quot;user&quot;</a></h2>
Get the user id that owns the file:
<p class="Pp"><span class="Li"></span></p>
<pre>
  $uid = $finfo-&gt;user;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>return: $uid ( number )</dt>
  <dd></dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (stat $filename)[4]
</pre>
<p class="Pp">Note that this method may not be meaningful on all platforms, most
    notably Win32.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_valid_"><a class="permalink" href="#_valid_">&quot;valid&quot;</a></h2>
The bitmask describing valid fields of this apr_finfo_t structure including all
  available 'wanted' fields and potentially more
<p class="Pp"><span class="Li"></span></p>
<pre>
  $valid = $finfo-&gt;valid;
</pre>
<dl class="Bl-tag">
  <dt>obj: $finfo ( &quot;APR::Finfo object&quot; )</dt>
  <dd></dd>
  <dt>arg1: $valid ( bitmask )</dt>
  <dd>This bitmask flag should be bit-OR'ed against
      <span class="Li">&quot;:finfo</span>
      <span class="Li">constant&quot;</span> constants.</dd>
  <dt>since: 2.0.00</dt>
  <dd></dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="See_Also"><a class="permalink" href="#See_Also">See
  Also</a></h1>
mod_perl 2.0 documentation.
</section>
<section class="Sh">
<h1 class="Sh" id="Copyright"><a class="permalink" href="#Copyright">Copyright</a></h1>
mod_perl 2.0 and its core modules are copyrighted under The Apache Software
  License, Version 2.0.
</section>
<section class="Sh">
<h1 class="Sh" id="Authors"><a class="permalink" href="#Authors">Authors</a></h1>
The mod_perl development team and numerous contributors.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-06-18</td>
    <td class="foot-os">perl v5.28.2</td>
  </tr>
</table>
</body>
</html>
