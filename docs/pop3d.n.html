<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Generated from file '/Library/Caches/com.apple.xbs/Sources/tcl/tcl-129.100.1/tcl_ext/tcllib/tcllib/modules/pop3d/pop3d.man' by tcllib/doctools with format 'nroff'
   Copyright (c) 2002-2009 Andreas Kupries <andreas_kupries@users.sourceforge.net>
   Copyright (c) 2005 Reinhard Max  <max@suse.de>
  
   The definitions below are for supplemental macros used in Tcl/Tk
   manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO
  	Start of list of standard options for a Tk widget.  The
  	options follow on successive lines, in four columns separated
  	by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   RCS: @(#) $Id: man.macros,v 1.1 2009/01/30 04:56:47 andreas_kupries Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
  	# Start an argument description
  .b
  	# define tabbing values for .AP
  
  	# BS - start boxed text
  	# ^y = starting y location
  	# ^b = 1
  	# BE - end boxed text (draw box now)
  	Draw four-sided box normally, but don't draw top of
  	box if the box started on an earlier page.
  	# VS - start vertical sidebar
  	# ^Y = starting y location
  	# ^v = 1 (for troff;  for nroff this doesn't matter)
  	# VE - end of vertical sidebar
  	# Special macro to handle page bottom:  finish off current
  	# box/sidebar if in box/sidebar mode, then invoked standard
  	# page bottom macro.
  	Draw three-sided box if this is the box's first page,
  	draw two sides but no top otherwise.
  	# DS - begin display
  	# DE - end display
  	# SO - start of list of standard options
  	# SE - end of list of standard options
  	# OP - start of full description for a single option
  	# CS - begin code excerpt
  	# CE - end code excerpt
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>pop3d(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">pop3d(n)</td>
    <td class="head-vol">Tcl POP3 Server Package</td>
    <td class="head-rtitle">pop3d(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>

</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
pop3d - Tcl POP3 server implementation
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
package require <b>Tcl 8.3</b>
<p class="Pp">package require <b>pop3d ?1.1.0?</b></p>
<p class="Pp"><b>::pop3d::new</b> ?<i>serverName</i>?</p>
<p class="Pp"><b>serverName</b> <i>option</i> ?<i>arg arg ...</i>?</p>
<p class="Pp"><i>serverName</i> <b>up</b></p>
<p class="Pp"><i>serverName</i> <b>down</b></p>
<p class="Pp"><i>serverName</i> <b>destroy</b> ?<i>mode</i>?</p>
<p class="Pp"><i>serverName</i> <b>configure</b></p>
<p class="Pp"><i>serverName</i> <b>configure</b> <i>-option</i></p>
<p class="Pp"><i>serverName</i> <b>configure</b> <i>-option value</i>...</p>
<p class="Pp"><i>serverName</i> <b>cget</b> <i>-option</i></p>
<p class="Pp"><i>serverName</i> <b>conn</b> list</p>
<p class="Pp"><i>serverName</i> <b>conn</b> state <i>id</i></p>
<p class="Pp"><i>authCmd</i> <b>exists</b> <i>name</i></p>
<p class="Pp"><i>authCmd</i> <b>lookup</b> <i>name</i></p>
<p class="Pp"><i>storageCmd</i> <b>dele</b> <i>mbox</i> <i>msgList</i></p>
<p class="Pp"><i>storageCmd</i> <b>lock</b> <i>mbox</i></p>
<p class="Pp"><i>storageCmd</i> <b>unlock</b> <i>mbox</i></p>
<p class="Pp"><i>storageCmd</i> <b>size</b> <i>mbox</i> ?<i>msgId</i>?</p>
<p class="Pp"><i>storageCmd</i> <b>stat</b> <i>mbox</i></p>
<p class="Pp"><i>storageCmd</i> <b>get</b> <i>mbox</i> <i>msgId</i></p>
<p class="Pp"></p>
<pre>

</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<dl class="Bl-tag">
  <dt><b>::pop3d::new</b> ?<i>serverName</i>?</dt>
  <dd>This command creates a new server object with an associated global Tcl
      command whose name is <i>serverName</i>.</dd>
</dl>
<p class="Pp">The command <b>serverName</b> may be used to invoke various
    operations on the server. It has the following general form:</p>
<dl class="Bl-tag">
  <dt><b>serverName</b> <i>option</i> ?<i>arg arg ...</i>?</dt>
  <dd><i>Option</i> and the <i>arg</i>s determine the exact behavior of the
      command.</dd>
</dl>
<p class="Pp">A pop3 server can be started on any port the caller has permission
    for from the operating system. The default port will be 110, which is the
    port defined by the standard specified in RFC 1939
    (<i>http://www.rfc-editor.org/rfc/rfc1939.txt</i>). After creating,
    configuring and starting a the server object will listen for and accept
    connections on that port and handle them according to the POP3 protocol.</p>
<p class="Pp"><i>Note:</i> The server provided by this module will handle only
    the basic protocol by itself. For the higher levels of user authentication
    and handling of the actual mailbox contents callbacks will be invoked.</p>
<p class="Pp">The following commands are possible for server objects:</p>
<dl class="Bl-tag">
  <dt><i>serverName</i> <b>up</b></dt>
  <dd>After this call the server will listen for connections on its configured
      port.</dd>
  <dt><i>serverName</i> <b>down</b></dt>
  <dd>After this call the server will stop listening for connections. This does
      not affect existing connections.</dd>
  <dt><i>serverName</i> <b>destroy</b> ?<i>mode</i>?</dt>
  <dd>Destroys the server object. Currently open connections are handled
      depending on the chosen mode. The provided <i>mode</i>s are:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>kill</b></dt>
  <dd>Destroys the server immediately, and forcefully closes all currently open
      connections. This is the default mode.</dd>
  <dt><b>defer</b></dt>
  <dd>Stops the server from accepting new connections and will actually destroy
      it only after the last of the currently open connections for the server is
      closed.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt><i>serverName</i> <b>configure</b></dt>
  <dd>Returns a list containing all options and their current values in a format
      suitable for use by the command <b>array set</b>. The options themselves
      are described in section <b>Options</b>.</dd>
  <dt><i>serverName</i> <b>configure</b> <i>-option</i></dt>
  <dd>Returns the current value of the specified option. This is an alias for
      the method <b>cget</b>. The options themselves are described in section
      <b>Options</b>.</dd>
  <dt><i>serverName</i> <b>configure</b> <i>-option value</i>...</dt>
  <dd>Sets the specified option to the provided value. The options themselves
      are described in section <b>Options</b>.</dd>
  <dt><i>serverName</i> <b>cget</b> <i>-option</i></dt>
  <dd>Returns the current value of the specified option. The options themselves
      are described in section <b>Options</b>.</dd>
  <dt><i>serverName</i> <b>conn</b> list</dt>
  <dd>Returns a list containing the ids of all connections currently open.</dd>
  <dt><i>serverName</i> <b>conn</b> state <i>id</i></dt>
  <dd>Returns a list suitable for [<b>array set</b>] containing the state of the
      connection referenced by <i>id</i>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
The following options are available to pop3 server objects.
<dl class="Bl-tag">
  <dt><b>-port</b> <i>port</i></dt>
  <dd>Defines the <i>port</i> to listen on for new connections. Default is 110.
      This option is a bit special. If <i>port</i> is set to &quot;0&quot; the
      server, or rather the operating system, will select a free port on its
      own. When querying <b>-port</b> the id of this chosen port will be
      returned. Changing the port while the server is up will neither change the
      returned value, nor will it change on which port the server is listening
      on. Only after resetting the server via a call to <b>down</b> followed by
      a call to <b>up</b> will the new port take effect. It is at that time that
      the value returned when querying <b>-port</b> will change too.</dd>
  <dt><b>-auth</b> <i>command</i></dt>
  <dd>Defines a <i>command</i> prefix to call whenever the authentication of a
      user is required. If no such command is specified the server will reject
      all users. The interface which has to be provided by the command prefix is
      described in section <b>Authentication</b>.</dd>
  <dt><b>-storage</b> <i>command</i></dt>
  <dd>Defines a <i>command</i> prefix to call whenever the handling of mailbox
      contents is required. If no such command is specified the server will
      claim that all mailboxes are empty. The interface which has to be provided
      by the command prefix is described in section <b>Mailboxes</b>.</dd>
  <dt><b>-socket</b> <i>command</i></dt>
  <dd>Defines a <i>command</i> prefix to call for opening the listening socket.
      This can be used to make the pop3 server listen on a SSL socket as
      provided by the <b>tls</b> package, see the command
    <b>tls::socket</b>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHENTICATION"><a class="permalink" href="#AUTHENTICATION">AUTHENTICATION</a></h1>
Here we describe the interface which has to be provided by the authentication
  callback so that pop3 servers following the interface of this module are able
  to use it.
<dl class="Bl-tag">
  <dt><i>authCmd</i> <b>exists</b> <i>name</i></dt>
  <dd>This method is given a user<i>name</i> and has to return a boolean value
      telling whether or not the specified user exists.</dd>
  <dt><i>authCmd</i> <b>lookup</b> <i>name</i></dt>
  <dd>This method is given a user<i>name</i> and has to return a two-element
      list containing the password for this user and a storage reference, in
      this order.
    <p class="Pp">The storage reference is passed unchanged to the storage
        callback, see sections <b>Options</b> and <b>Mailboxes</b> for either
        the option defining it and or the interface to provide,
      respectively.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="MAILBOXES"><a class="permalink" href="#MAILBOXES">MAILBOXES</a></h1>
Here we describe the interface which has to be provided by the storage callback
  so that pop3 servers following the interface of this module are able to use
  it. The <i>mbox</i> argument is the storage reference as returned by the
  <b>lookup</b> method of the authentication command, see section
  <b>Authentication</b>.
<dl class="Bl-tag">
  <dt><i>storageCmd</i> <b>dele</b> <i>mbox</i> <i>msgList</i></dt>
  <dd>] Deletes the messages whose numeric ids are contained in the
      <i>msgList</i> from the mailbox specified via <i>mbox</i>.</dd>
  <dt><i>storageCmd</i> <b>lock</b> <i>mbox</i></dt>
  <dd>This method locks the specified mailbox for use by a single connection to
      the server. This is necessary to prevent havoc if several connections to
      the same mailbox are open. The complementary method is <b>unlock</b>. The
      command will return true if the lock could be set successfully or false if
      not.</dd>
  <dt><i>storageCmd</i> <b>unlock</b> <i>mbox</i></dt>
  <dd>This is the complementary method to <b>lock</b>, it revokes the lock on
      the specified mailbox.</dd>
  <dt><i>storageCmd</i> <b>size</b> <i>mbox</i> ?<i>msgId</i>?</dt>
  <dd>Determines the size of the message specified through its id in
      <i>msgId</i>, in bytes, and returns this number. The command will return
      the size of the whole maildrop if no message id was specified.</dd>
  <dt><i>storageCmd</i> <b>stat</b> <i>mbox</i></dt>
  <dd>Determines the number of messages in the specified mailbox and returns
      this number.</dd>
  <dt><i>storageCmd</i> <b>get</b> <i>mbox</i> <i>msgId</i></dt>
  <dd>Returns a handle for the specified message. This handle is a mime token
      following the interface described in the documentation of package
      <b>mime</b>. The pop3 server will use the functionality of the mime token
      to send the mail to the requestor at the other end of a pop3
    connection.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SECURE_MAIL_TRANSFER"><a class="permalink" href="#SECURE_MAIL_TRANSFER">SECURE
  MAIL TRANSFER</a></h1>
The option <b>-socket</b> (see <b>Options</b>) enables users of the package to
  override how the server opens its listening socket. The envisioned main use is
  the specification of the <b>tls::socket</b> command, see package <b>tls</b>,
  to secure the communication.
<pre>
	package require tls
	tls::init \\
		...
	pop3d::new S -socket tls::socket
	...
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS,_IDEAS,_FEEDBACK"><a class="permalink" href="#BUGS,_IDEAS,_FEEDBACK">BUGS,
  IDEAS, FEEDBACK</a></h1>
This document, and the package it describes, will undoubtedly contain bugs and
  other problems. Please report such in the category <i>pop3d</i> of the
  <i>Tcllib SF Trackers</i> [http://sourceforge.net/tracker/?group_id=12883].
  Please also report any ideas for enhancements you may have for either package
  and/or documentation.
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
internet, network, pop3, protocol, rfc 1939, secure, ssl, tls
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORY"><a class="permalink" href="#CATEGORY">CATEGORY</a></h1>
Networking
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<pre>
Copyright (c) 2002-2009 Andreas Kupries &lt;andreas_kupries@users.sourceforge.net&gt;
Copyright (c) 2005 Reinhard Max  &lt;max@suse.de&gt;
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">1.1.0</td>
    <td class="foot-os">pop3d</td>
  </tr>
</table>
</body>
</html>
